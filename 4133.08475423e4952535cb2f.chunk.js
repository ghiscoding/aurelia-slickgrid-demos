"use strict";(self.webpackChunkau_slickgrid_demo=self.webpackChunkau_slickgrid_demo||[]).push([[4133],{387:(e,t,a)=>{var i=a(1601),n=a.n(i),r=a(6314);a.n(r)()(n()).push([e.id,".display-inline-block{display:inline-block}",""])},4133:(e,t,a)=>{a.r(t),a.d(t,{Example46:()=>G});var i={};a.r(i),a.d(i,{bindables:()=>d,default:()=>s,dependencies:()=>o,name:()=>r,register:()=>p,template:()=>l});var n=a(5394);a(387);const r="example46",l='<h2>\n  <span>\n    Example 46: Tree Data with Lazy Loading\n    <small>\n      <span class="mdi mdi-file-tree font-27px"></span> (from a Hierarchical Dataset -\n      <a href="https://ghiscoding.gitbook.io/aurelia-slickgrid/grid-functionalities/tree-data-grid" target="_blank">Wiki</a>)</small\n    >\n  </span>\n  <span class="float-end">\n    <a\n      style="font-size: 18px"\n      target="_blank"\n      href="https://github.com/ghiscoding/slickgrid-universal/blob/master/demos/aurelia/src/examples/slickgrid/example46.ts"\n    >\n      <span class="mdi mdi-link mdi-v-align-sub"></span> code\n    </a>\n  </span>\n  <button class="ms-2 btn btn-outline-secondary btn-sm btn-icon" type="button" data-test="toggle-subtitle" click.trigger="toggleSubTitle()">\n    <span class="mdi mdi-information-outline" title="Toggle example sub-title details"></span>\n  </button>\n</h2>\n\n<div class="subtitle">\n  <ul>\n    <li>\n      Lazy Loading only works with Hierarchical Tree Data, also when creating a Lazy Tree Data grid, you would typically assign the\n      <code>data</code> as the root collection but with empty children items.\n    </li>\n    <li>\n      However please note that Parents do require the children arrays to be defined but can be left as empty arrays (e.g.\n      <code>chapters: []</code> in our example). Parents without empty children arrays defined <b>will not</b> be detected as parents.\n    </li>\n    <li>\n      Calling the "Expand All" command will <b>only</b> expand the nodes that were already lazily loaded (the other ones will remain as\n      collapsed). Aggregators will also be lazily calculated and aggregate only the data that it currently has loaded.\n    </li>\n    <li>In the example below, clicking on the last <b>"Chapter X"</b> will demo an API call failure</li>\n  </ul>\n</div>\n\n<div class="row">\n  <div class="col-md-7">\n    <button class="btn btn-outline-secondary btn-xs btn-icon" data-test="clear-filters-btn" click.trigger="clearFilters()">\n      <span class="mdi mdi-close"></span>\n      <span>Clear Filters</span>\n    </button>\n    <button click.trigger="collapseAll()" data-test="collapse-all-btn" class="btn btn-outline-secondary btn-xs btn-icon">\n      <span class="mdi mdi-arrow-collapse"></span>\n      <span>Collapse All</span>\n    </button>\n    <button click.trigger="expandAll()" data-test="expand-all-btn" class="btn btn-outline-secondary btn-xs btn-icon">\n      <span class="mdi mdi-arrow-expand"></span>\n      <span>Expand All</span>\n    </button>\n    <span class="ml-2">\n      <label for="pinned-rows">Simulated Server Delay (ms): </label>\n      <input type="number" id="server-delay" data-test="server-delay" style="width: 60px" value.bind="serverApiDelay" />\n    </span>\n  </div>\n\n  <div class="col-md-5">\n    <div class="input-group input-group-sm">\n      <input\n        type="text"\n        class="form-control search-string"\n        placeholder="search value"\n        autocomplete="off"\n        data-test="search-string"\n        value.bind="searchString"\n      />\n      <button\n        class="btn btn-sm btn-outline-secondary d-flex align-items-center"\n        data-test="clear-search-string"\n        click.trigger="clearSearch()"\n      >\n        <span class="icon mdi mdi-close-thick"></span>\n      </button>\n    </div>\n  </div>\n</div>\n\n<br />\n\n<div id="grid-container" class="col-sm-12">\n  <aurelia-slickgrid\n    grid-id="grid46"\n    columns.bind="columnDefinitions"\n    options.bind="gridOptions"\n    dataset-hierarchical.bind="datasetHierarchical"\n    instances.bind="aureliaGrid"\n  >\n  </aurelia-slickgrid>\n</div>\n',s=l,o=[],d={};let c;function p(e){c||(c=n.K9.define({name:r,template:l,dependencies:o,bindables:d})),e.register(c)}var h=a(6407),m=a(2484),u=a(5895),b=a(3940),g=a(5072),f=a.n(g),x=a(7825),y=a.n(x),v=a(7659),w=a.n(v),D=a(5056),N=a.n(D),S=a(540),T=a.n(S),C=a(1113),k=a.n(C),A=a(8809),I={};I.styleTagTransform=k(),I.setAttributes=N(),I.insert=w().bind(null,"head"),I.domAPI=y(),I.insertStyleElement=T(),f()(A.A,I),A.A&&A.A.locals&&A.A.locals,a(6757);var F=function(e,t,a,i,n,r){function l(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,o=i.kind,d="getter"===o?"get":"setter"===o?"set":"value",c=!t&&e?i.static?e:e.prototype:null,p=t||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),h=!1,m=a.length-1;m>=0;m--){var u={};for(var b in i)u[b]="access"===b?{}:i[b];for(var b in i.access)u.access[b]=i.access[b];u.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");r.push(l(e||null))};var g=(0,a[m])("accessor"===o?{get:p.get,set:p.set}:p[d],u);if("accessor"===o){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(s=l(g.get))&&(p.get=s),(s=l(g.set))&&(p.set=s),(s=l(g.init))&&n.unshift(s)}else(s=l(g))&&("field"===o?n.unshift(s):p[d]=s)}c&&Object.defineProperty(c,i.name,p),h=!0},E=function(e,t,a){for(var i=arguments.length>2,n=0;n<t.length;n++)a=i?t[n].call(e,a):t[n].call(e);return i?a:void 0};let G=(()=>{let e,t,a,r=[(0,n.EM)(i)],l=[],s=[],o=[];return t=class{constructor(){this.columnDefinitions=[],this.datasetHierarchical=[],this.hideSubTitle=!1,this.isExcludingChildWhenFiltering=!1,this.isAutoApproveParentItemWhenTreeColumnIsValid=!0,this.isAutoRecalcTotalsOnFilterChange=!1,this.isRemoveLastInsertedPopSongDisabled=!0,this.serverApiDelay=1e3,this.searchString=E(this,s,""),E(this,o),this.defineGrid()}attached(){this.datasetHierarchical=this.mockDataset()}defineGrid(){this.columnDefinitions=[{id:"chapterName",name:"Chapter",field:"chapterName",width:150,formatter:u._tQ.tree,filterable:!0,sortable:!0},{id:"label",name:"Label",field:"label",minWidth:90,formatter:this.coloredTextFormatter,filterable:!0,sortable:!0},{id:"description",name:"Description",field:"description",minWidth:90,formatter:this.coloredTextFormatter,filterable:!0,sortable:!0},{id:"pageNumber",name:"Page Number",field:"pageNumber",minWidth:90,type:"number",exportWithFormatter:!0,excelExportOptions:{autoDetectCellFormat:!1},filterable:!0,filter:{model:u.CuW.compoundInputNumber}},{id:"dateModified",name:"Last Date Modified",field:"dateModified",formatter:u._tQ.date,params:{dateFormat:"MMM DD, YYYY, h:mm:ss a"},type:"dateUtc",outputType:"dateTimeIso",minWidth:90,exportWithFormatter:!0,filterable:!0,filter:{model:u.CuW.compoundDate}}],this.gridOptions={autoResize:{autoHeight:!1,container:"#demo-container",rightPadding:10},enableAutoSizeColumns:!0,enableAutoResize:!0,enableExcelExport:!0,excelExportOptions:{exportWithFormatter:!0,sanitizeDataExport:!0},enableTextExport:!0,textExportOptions:{exportWithFormatter:!0,sanitizeDataExport:!0},enableCheckboxSelector:!0,enableRowSelection:!0,multiSelect:!1,checkboxSelector:{hideInFilterHeaderRow:!1,hideInColumnTitleRow:!0,onRowToggleStart:(e,t)=>console.log("onBeforeRowToggle",t),onSelectAllToggleStart:()=>this.aureliaGrid.treeDataService.toggleTreeDataCollapse(!1,!1)},externalResources:[new h.N,new m.f],enableFiltering:!0,enableTreeData:!0,multiColumnSort:!1,rowHeight:35,showCustomFooter:!0,treeDataOptions:{columnId:"chapterName",childrenPropName:"chapters",initiallyCollapsed:!0,lazy:!0,onLazyLoad:(e,t,a)=>{setTimeout((()=>{"lazy fetch will FAIL"===e.label?(a(),(0,b.P0)("Lazy fetching failed","danger")):t(this.getChaptersByParentNode(e))}),this.serverApiDelay)}}}}clearSearch(){this.searchString=""}searchStringChanged(){this.updateFilter()}updateFilter(){this.aureliaGrid.filterService.updateFilters([{columnId:"label",searchTerms:[this.searchString]}],!0,!1,!0)}clearFilters(){this.clearSearch(),this.aureliaGrid.filterService.clearFilters()}collapseAll(){this.aureliaGrid.treeDataService.toggleTreeDataCollapse(!0)}expandAll(){this.aureliaGrid.treeDataService.toggleTreeDataCollapse(!1)}mockDataset(){return[{id:this.generateGUID(),chapterName:"Chapter 1",label:"The intro",chapters:[],description:"it's all about the introduction",pageNumber:2,dateModified:"2024-03-05T12:44:00.123Z"},{id:this.generateGUID(),chapterName:"Chapter 2",label:"Where it all started",chapters:[],description:"hometown to the big city",pageNumber:50,dateModified:"2024-04-23T08:33:00.123Z"},{id:this.generateGUID(),chapterName:"Chapter 3",label:"Here I come...",chapters:[],description:"here comes a wall",pageNumber:78,dateModified:"2024-05-05T12:22:00.123Z"},{id:this.generateGUID(),chapterName:"Chapter 4",label:"Are we there yet?",chapters:[],description:"soon...",pageNumber:120,dateModified:"2024-04-29T10:24:00.123Z"},{id:this.generateGUID(),chapterName:"Chapter 5",label:"The finale",chapters:[],description:"the end is near!",pageNumber:155,dateModified:"2024-06-21T07:22:00.123Z"},{id:this.generateGUID(),chapterName:"Chapter 6",label:"End",pageNumber:156,dateModified:"2024-06-22T07:22:00.123Z"},{id:this.generateGUID(),chapterName:"Chapter X",label:"lazy fetch will FAIL",chapters:[],description:"...demo an API call error!!!",pageNumber:999,dateModified:"2024-09-28T00:22:00.123Z",textColor:"color-danger"}]}getChaptersByParentNode(e){const t=this.prefixDots(e.chapterName.length-6);return[{id:this.generateGUID(),chapterName:`${e.chapterName}.1`,label:`${t}${e.chapterName?.toLowerCase()}.1`,chapters:[],pageNumber:e.pageNumber+1},{id:this.generateGUID(),chapterName:`${e.chapterName}.2`,label:`${t}${e.chapterName?.toLowerCase()}.2`,chapters:[],pageNumber:e.pageNumber+2},{id:this.generateGUID(),chapterName:`${e.chapterName}.3`,label:`${t}${e.chapterName?.toLowerCase()}.3`,pageNumber:e.pageNumber+3}]}coloredTextFormatter(e,t,a,i,n){if(n.textColor){const e=document.createElement("span");return e.className=n.textColor,e.textContent=a,e}return a}toggleSubTitle(){this.hideSubTitle=!this.hideSubTitle;const e=this.hideSubTitle?"add":"remove";document.querySelector(".subtitle")?.classList[e]("hidden"),this.aureliaGrid.resizerService.resizeGrid(0)}generateGUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}prefixDots(e){let t="";for(let a=0;a<e;a++)t+=".";return t}},d=t,"symbol"==typeof(c="Example46")&&(c=c.description?"[".concat(c.description,"]"):""),Object.defineProperty(d,"name",{configurable:!0,value:p?"".concat(p," ",c):c}),(()=>{const i="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;a=[(0,n._t)()],F(null,null,a,{kind:"field",name:"searchString",static:!1,private:!1,access:{has:e=>"searchString"in e,get:e=>e.searchString,set:(e,t)=>{e.searchString=t}},metadata:i},s,o),F(null,e={value:t},r,{kind:"class",name:t.name,metadata:i},null,l),t=e.value,i&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:i}),E(t,l)})(),t;var d,c,p})()},8809:(e,t,a)=>{a.d(t,{A:()=>s});var i=a(1601),n=a.n(i),r=a(6314),l=a.n(r)()(n());l.push([e.id,".display-inline-block{display:inline-block}",""]);const s=l}}]);