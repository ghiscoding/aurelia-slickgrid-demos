(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"4ysu":function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return ae})),i.d(t,"b",(function(){return V})),i.d(t,"c",(function(){return S}));var n=i("MP1E"),r=i("3U8n"),o=i("eP1p"),s=i("0esZ"),a=i("aurelia-event-aggregator"),l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};var c=function(){function t(e){this.plan=null,this.options={},Object.assign(this,e),this.params=this.params||{},this.viewPortInstructions={};var t=[],i=this;do{var n=Object.assign({},i.params);i.config&&i.config.hasChildRouter&&delete n[i.getWildCardName()],t.unshift(n),i=i.parentInstruction}while(i);var r=Object.assign.apply(Object,[{},this.queryParams].concat(t));this.lifecycleArgs=[r,this.config,this]}return t.prototype.getAllInstructions=function(){var e=[this],t=this.viewPortInstructions;for(var i in t){var n=t[i].childNavigationInstruction;n&&e.push.apply(e,n.getAllInstructions())}return e},t.prototype.getAllPreviousInstructions=function(){return this.getAllInstructions().map((function(e){return e.previousInstruction})).filter((function(e){return e}))},t.prototype.addViewPortInstruction=function(e,t,i,n){var r,o="string"==typeof e?e:e.name,s=this.lifecycleArgs,a=Object.assign({},s[1],{currentViewPort:o});return r="string"==typeof e?{name:e,strategy:t,moduleId:i,component:n,childRouter:n.childRouter,lifecycleArgs:[s[0],a,s[2]]}:{name:o,strategy:e.strategy,component:e.component,moduleId:e.moduleId,childRouter:e.component.childRouter,lifecycleArgs:[s[0],a,s[2]]},this.viewPortInstructions[o]=r},t.prototype.getWildCardName=function(){var e=this.config.route,t=e.lastIndexOf("*");return e.substr(t+1)},t.prototype.getWildcardPath=function(){var e=this.getWildCardName(),t=this.params[e]||"",i=this.queryString;return i&&(t+="?"+i),t},t.prototype.getBaseUrl=function(){var e=this,t=encodeURI,i=decodeURI(this.fragment);if(""===i){var n=this.router.routes.find((function(t){return t.name===e.config.name&&""!==t.route}));n&&(i=n.route)}if(!this.params)return t(i);var r=this.getWildCardName(),o=this.params[r]||"";return t(o?i.substr(0,i.lastIndexOf(o)):i)},t.prototype._commitChanges=function(t){var i=this,n=this.router;n.currentInstruction=this;var r=this.previousInstruction;r&&(r.config.navModel.isActive=!1),this.config.navModel.isActive=!0,n.refreshNavigation();var o=[],s=[],a=this.viewPortInstructions,l=function(i){var r=a[i],l=n.viewPorts[i];if(!l)throw new Error("There was no router-view found in the view for "+r.moduleId+".");var c=r.childNavigationInstruction;"replace"===r.strategy?c&&c.parentCatchHandler?o.push(c._commitChanges(t)):(t&&s.push({viewPort:l,viewPortInstruction:r}),o.push(l.process(r,t).then((function(){return c?c._commitChanges(t):e.resolve()})))):c&&o.push(c._commitChanges(t))};for(var c in a)l(c);return e.all(o).then((function(){return s.forEach((function(e){return e.viewPort.swap(e.viewPortInstruction)})),null})).then((function(){return u(i)}))},t.prototype._updateTitle=function(){var e=this.router,t=this._buildTitle(e.titleSeparator);t&&e.history.setTitle(t)},t.prototype._buildTitle=function(e){void 0===e&&(e=" | ");var t="",i=[],n=this.config.navModel.title,r=this.router,o=this.viewPortInstructions;for(var s in n&&(t=r.transformTitle(n)),o){var a=o[s].childNavigationInstruction;if(a){var l=a._buildTitle(e);l&&i.push(l)}}return i.length&&(t=i.join(e)+(t?e:"")+t),r.title&&(t+=(t?e:"")+r.transformTitle(r.title)),t},t}(),u=function(e){e.previousInstruction=null,e.plan=null},d=function(){function e(e,t){this.isActive=!1,this.title=null,this.href=null,this.relativeHref=null,this.settings={},this.config=null,this.router=e,this.relativeHref=t}return e.prototype.setTitle=function(e){this.title=e,this.isActive&&this.router.updateTitle()},e}();function h(e,t,i){return void 0===i&&(i=!1),t||"#"===e[0]||(e="#"+e),t&&i&&(e=e.substring(1,e.length)),e}function p(e,t,i,n){if(v.test(e))return e;var r="";return t.length&&"/"!==t[0]&&(r+="/"),(r+=t).length&&"/"===r[r.length-1]||"/"===e[0]||(r+="/"),r.length&&"/"===r[r.length-1]&&"/"===e[0]&&(r=r.substring(0,r.length-1)),h(r+e,i,n)}function g(e){var t=[];if(Array.isArray(e.route))for(var i=0,n=e.route.length;i<n;++i){var r=Object.assign({},e);r.route=e.route[i],t.push(r)}else t.push(Object.assign({},e));return t}var f=/^#?\//,v=/^([a-z][a-z0-9+\-.]*:)?\/\//i,m=function(){function e(){this.instructions=[],this.options={},this.pipelineSteps=[]}return e.prototype.addPipelineStep=function(e,t){if(null==t)throw new Error("Pipeline step cannot be null or undefined.");return this.pipelineSteps.push({name:e,step:t}),this},e.prototype.addAuthorizeStep=function(e){return this.addPipelineStep("authorize",e)},e.prototype.addPreActivateStep=function(e){return this.addPipelineStep("preActivate",e)},e.prototype.addPreRenderStep=function(e){return this.addPipelineStep("preRender",e)},e.prototype.addPostRenderStep=function(e){return this.addPipelineStep("postRender",e)},e.prototype.fallbackRoute=function(e){return this._fallbackRoute=e,this},e.prototype.map=function(e){var t=this;return Array.isArray(e)?(e.forEach((function(e){return t.map(e)})),this):this.mapRoute(e)},e.prototype.useViewPortDefaults=function(e){return this.viewPortDefaults=e,this},e.prototype.mapRoute=function(e){return this.instructions.push((function(t){for(var i,n=g(e),r=0,o=n.length;r<o;++r){var s=n[r];s.settings=s.settings||{},i||(i=t.createNavModel(s)),t.addRoute(s,i)}})),this},e.prototype.mapUnknownRoutes=function(e){return this.unknownRouteConfig=e,this},e.prototype.exportToRouter=function(e){for(var t=this.instructions,i=0,n=t.length;i<n;++i)t[i](e);var r=this,o=r.title,s=r.titleSeparator,a=r.unknownRouteConfig,l=r._fallbackRoute,c=r.viewPortDefaults;o&&(e.title=o),s&&(e.titleSeparator=s),a&&e.handleUnknownRoutes(a),l&&(e.fallbackRoute=l),c&&e.useViewPortDefaults(c),Object.assign(e.options,this.options);var u=this.pipelineSteps,d=u.length;if(d){if(!e.isRoot)throw new Error("Pipeline steps can only be added to the root router");var h=e.pipelineProvider;for(i=0,n=d;i<n;++i){var p=u[i],g=p.name,f=p.step;h.addStep(g,f)}}},e}(),S=function(){function t(e,t){var i=this;this.parent=null,this.options={},this.viewPortDefaults={},this.transformTitle=function(e){return i.parent?i.parent.transformTitle(e):e},this.container=e,this.history=t,this.reset()}return t.prototype.reset=function(){var t=this;this.viewPorts={},this.routes=[],this.baseUrl="",this.isConfigured=!1,this.isNavigating=!1,this.isExplicitNavigation=!1,this.isExplicitNavigationBack=!1,this.isNavigatingFirst=!1,this.isNavigatingNew=!1,this.isNavigatingRefresh=!1,this.isNavigatingForward=!1,this.isNavigatingBack=!1,this.couldDeactivate=!1,this.navigation=[],this.currentInstruction=null,this.viewPortDefaults={},this._fallbackOrder=100,this._recognizer=new s.a,this._childRecognizer=new s.a,this._configuredPromise=new e((function(e){t._resolveConfiguredPromise=e}))},Object.defineProperty(t.prototype,"isRoot",{get:function(){return!this.parent},enumerable:!0,configurable:!0}),t.prototype.registerViewPort=function(e,t){t=t||"default",this.viewPorts[t]=e},t.prototype.ensureConfigured=function(){return this._configuredPromise},t.prototype.configure=function(t){var i=this;this.isConfigured=!0;var n,r=t;return"function"==typeof t&&(r=t(n=new m)),e.resolve(r).then((function(e){e&&e.exportToRouter&&(n=e),n.exportToRouter(i),i.isConfigured=!0,i._resolveConfiguredPromise()}))},t.prototype.navigate=function(e,t){return!this.isConfigured&&this.parent?this.parent.navigate(e,t):(this.isExplicitNavigation=!0,this.history.navigate(function(e,t,i){return f.test(e)?h(e,i):p(e,t,i)}(e,this.baseUrl,this.history._hasPushState),t))},t.prototype.navigateToRoute=function(e,t,i){var n=this.generate(e,t);return this.navigate(n,i)},t.prototype.navigateBack=function(){this.isExplicitNavigationBack=!0,this.history.navigateBack()},t.prototype.createChild=function(e){var i=new t(e||this.container.createChild(),this.history);return i.parent=this,i},t.prototype.generate=function(e,t,i){void 0===t&&(t={}),void 0===i&&(i={});var n="childRoute"in t?this._childRecognizer:this._recognizer;if(!n.hasRoute(e)){if(this.parent)return this.parent.generate(e,t,i);throw new Error("A route with name '"+e+"' could not be found. Check that `name: '"+e+"'` was specified in the route's config.")}var r=p(n.generate(e,t),this.baseUrl,this.history._hasPushState,i.absolute);return i.absolute?""+this.history.getAbsoluteRoot()+r:r},t.prototype.createNavModel=function(e){var t=new d(this,"href"in e?e.href:e.route);return t.title=e.title,t.order=e.nav,t.href=e.href,t.settings=e.settings,t.config=e,t},t.prototype.addRoute=function(e,t){if(Array.isArray(e.route)){g(e).forEach(this.addRoute.bind(this))}else{y(e),"viewPorts"in e||e.navigationStrategy||(e.viewPorts={default:{moduleId:e.moduleId,view:e.view}}),t||(t=this.createNavModel(e)),this.routes.push(e);var i=e.route;"/"===i.charAt(0)&&(i=i.substr(1));var n=!0===e.caseSensitive,r=this._recognizer.add({path:i,handler:e,caseSensitive:n});if(i){var o=e.settings;delete e.settings;var s=JSON.parse(JSON.stringify(e));e.settings=o,s.route=i+"/*childRoute",s.hasChildRouter=!0,this._childRecognizer.add({path:s.route,handler:s,caseSensitive:n}),s.navModel=t,s.settings=e.settings,s.navigationStrategy=e.navigationStrategy}e.navModel=t;var a=this.navigation;if((t.order||0===t.order)&&-1===a.indexOf(t)){if(!t.href&&""!==t.href&&(r.types.dynamics||r.types.stars))throw new Error('Invalid route config for "'+e.route+'" : dynamic routes must specify an "href:" to be included in the navigation model.');"number"!=typeof t.order&&(t.order=++this._fallbackOrder),a.push(t),a.sort((function(e,t){return e.order-t.order}))}}},t.prototype.hasRoute=function(e){return!!(this._recognizer.hasRoute(e)||this.parent&&this.parent.hasRoute(e))},t.prototype.hasOwnRoute=function(e){return this._recognizer.hasRoute(e)},t.prototype.handleUnknownRoutes=function(e){var t=this;if(!e)throw new Error("Invalid unknown route handler");this.catchAllHandler=function(i){return t._createRouteConfig(e,i).then((function(e){return i.config=e,i}))}},t.prototype.updateTitle=function(){var e=this.parent;if(e)return e.updateTitle();var t=this.currentInstruction;t&&t._updateTitle()},t.prototype.refreshNavigation=function(){for(var e=this.navigation,t=0,i=e.length;t<i;t++){var n=e[t];n.config.href?n.href=h(n.config.href,this.history._hasPushState):n.href=p(n.relativeHref,this.baseUrl,this.history._hasPushState)}},t.prototype.useViewPortDefaults=function(e){var t=e;for(var i in t){var n=t[i];this.viewPortDefaults[i]={moduleId:n.moduleId}}},t.prototype._refreshBaseUrl=function(){var e=this.parent;e&&(this.baseUrl=b(e,e.currentInstruction))},t.prototype._createNavigationInstruction=function(t,i){void 0===t&&(t=""),void 0===i&&(i=null);var n=t,r="",o=t.indexOf("?");-1!==o&&(n=t.substr(0,o),r=t.substr(o+1));var s=this._recognizer.recognize(t);s&&s.length||(s=this._childRecognizer.recognize(t));var a,l={fragment:n,queryString:r,config:null,parentInstruction:i,previousInstruction:this.currentInstruction,router:this,options:{compareQueryParams:this.options.compareQueryParams}};if(s&&s.length){var u=s[0],d=new c(Object.assign({},l,{params:u.params,queryParams:u.queryParams||s.queryParams,config:u.config||u.handler}));a="function"==typeof u.handler?w(d,u.handler,u):u.handler&&"function"==typeof u.handler.navigationStrategy?w(d,u.handler.navigationStrategy,u.handler):e.resolve(d)}else if(this.catchAllHandler){d=new c(Object.assign({},l,{params:{path:n},queryParams:s?s.queryParams:{},config:null}));a=w(d,this.catchAllHandler)}else if(this.parent){var h=this._parentCatchAllHandler(this.parent);if(h){var p=this._findParentInstructionFromRouter(h,i);d=new c(Object.assign({},l,{params:{path:n},queryParams:s?s.queryParams:{},router:h,parentInstruction:p,parentCatchHandler:!0,config:null}));a=w(d,h.catchAllHandler)}}return a&&i&&(this.baseUrl=b(this.parent,i)),a||e.reject(new Error("Route not found: "+t))},t.prototype._findParentInstructionFromRouter=function(e,t){return t.router===e?(t.fragment=e.baseUrl,t):t.parentInstruction?this._findParentInstructionFromRouter(e,t.parentInstruction):void 0},t.prototype._parentCatchAllHandler=function(e){return e.catchAllHandler?e:!!e.parent&&this._parentCatchAllHandler(e.parent)},t.prototype._createRouteConfig=function(t,i){var n=this;return e.resolve(t).then((function(e){return"string"==typeof e?{moduleId:e}:"function"==typeof e?e(i):e})).then((function(e){return"string"==typeof e?{moduleId:e}:e})).then((function(e){return e.route=i.params.path,y(e),e.navModel||(e.navModel=n.createNavModel(e)),e}))},t}(),b=function(e,t){return""+(e.baseUrl||"")+(t.getBaseUrl()||"")},y=function(e){if("object"!=typeof e)throw new Error("Invalid Route Config");if("string"!=typeof e.route){var t=e.name||"(no name)";throw new Error('Invalid Route Config for "'+t+'": You must specify a "route:" pattern.')}if(!("redirect"in e||e.moduleId||e.navigationStrategy||e.viewPorts))throw new Error('Invalid Route Config for "'+e.route+'": You must specify a "moduleId:", "redirect:", "navigationStrategy:", or "viewPorts:".')},w=function(t,i,n){return e.resolve(i.call(n,t)).then((function(){return"viewPorts"in t.config||(t.config.viewPorts={default:{moduleId:t.config.moduleId}}),t}))},E=function(t,i){return function(t){return e.resolve({status:i,output:t,completed:"completed"===i})}},C=function(){function e(){this.steps=[]}return e.prototype.addStep=function(e){var t;if("function"==typeof e)t=e;else{if("function"==typeof e.getSteps){for(var i=e.getSteps(),n=0,r=i.length;n<r;n++)this.addStep(i[n]);return this}t=e.run.bind(e)}return this.steps.push(t),this},e.prototype.run=function(e){return function(e,t){var i=-1,n=function(){if(!(++i<t.length))return n.complete();var r=t[i];try{return r(e,n)}catch(e){return n.reject(e)}};return n.complete=E(n,"completed"),n.cancel=E(n,"canceled"),n.reject=E(n,"rejected"),n}(e,this.steps)()},e}();function _(e){return e&&"function"==typeof e.navigate}var T=function(){function e(e,t){void 0===t&&(t={}),this.url=e,this.options=Object.assign({trigger:!0,replace:!0},t),this.shouldContinueProcessing=!1}return e.prototype.setRouter=function(e){this.router=e},e.prototype.navigate=function(e){(this.options.useAppRouter?e:this.router||e).navigate(this.url,this.options)},e}();!function(){function e(e,t,i){void 0===t&&(t={}),void 0===i&&(i={}),this.route=e,this.params=t,this.options=Object.assign({trigger:!0,replace:!0},i),this.shouldContinueProcessing=!1}e.prototype.setRouter=function(e){this.router=e},e.prototype.navigate=function(e){(this.options.useAppRouter?e:this.router||e).navigateToRoute(this.route,this.params,this.options)}}();function O(t,i){var n=t.config;if("redirect"in n)return I(t);var r=t.previousInstruction,o=t.router.viewPortDefaults;if(r)return A(t,r,o,i);var s={},a=n.viewPorts;for(var l in a){var c=a[l];null===c.moduleId&&l in o&&(c=o[l]),s[l]={name:l,strategy:"replace",config:c}}return e.resolve(s)}var R,I=function(t){var i=t.config,n=t.router;return n._createNavigationInstruction(i.redirect).then((function(i){var r={},o=t.params,s=i.params;for(var a in s){var l=s[a];"string"==typeof l&&":"===l[0]?(l=l.slice(1))in o&&(r[a]=o[l]):r[a]=s[a]}var c=n.generate(i.config,r,t.options);for(var a in o)c=c.replace(":"+a,o[a]);var u=t.queryString;return u&&(c+="?"+u),e.resolve(new T(c))}))},A=function(t,i,n,r){var o={},s=t.config,a=D(i,t),l=[],c=i.viewPortInstructions,u=function(i){var u=c[i],d=u.component,h=s.viewPorts,p=i in h?h[i]:u;null===p.moduleId&&i in n&&(p=n[i]);var g=P(t,u,p,a,r),f=o[i]={name:i,config:p,prevComponent:d,prevModuleId:u.moduleId,strategy:g};if("replace"!==g&&u.childRouter){var v=t.getWildcardPath(),m=u.childRouter._createNavigationInstruction(v,t).then((function(t){return f.childNavigationInstruction=t,O(t,"invoke-lifecycle"===f.strategy).then((function(i){return i instanceof T?e.reject(i):(t.plan=i,null)}))}));l.push(m)}};for(var d in c)u(d);return e.all(l).then((function(){return o}))},P=function(e,t,i,n,r){var o=e.config,s=t.component.viewModel;return t.moduleId!==i.moduleId?"replace":"determineActivationStrategy"in s?s.determineActivationStrategy.apply(s,e.lifecycleArgs):o.activationStrategy?o.activationStrategy:n||r?"invoke-lifecycle":"no-change"},D=function(e,t){var i=e.params,n=t.params,r=t.config.hasChildRouter?t.getWildCardName():null;for(var o in n)if(o!==r&&i[o]!==n[o])return!0;for(var o in i)if(o!==r&&i[o]!==n[o])return!0;if(!t.options.compareQueryParams)return!1;var s=e.queryParams,a=t.queryParams;for(var o in a)if(s[o]!==a[o])return!0;for(var o in s)if(s[o]!==a[o])return!0;return!1},x=function(){function e(){}return e.prototype.run=function(e,t){return O(e).then((function(i){return i instanceof T?t.cancel(i):(e.plan=i,t())})).catch(t.cancel)},e}(),F=function(t,i){var n=N(i).map((function(e){return k(t,e.navigationInstruction,e.viewPortPlan)}));return e.all(n)},N=function(e,t){void 0===t&&(t=[]);var i=e.plan;for(var n in i){var r=i[n],o=r.childNavigationInstruction;if("replace"===r.strategy)t.push({viewPortPlan:r,navigationInstruction:e}),o&&N(o,t);else{var s=e.addViewPortInstruction({name:n,strategy:r.strategy,moduleId:r.prevModuleId,component:r.prevComponent});o&&(s.childNavigationInstruction=o,N(o,t))}}return t},k=function(t,i,n){var r=n.config,o=r?r.moduleId:null;return L(t,i,r).then((function(r){var s=i.addViewPortInstruction({name:n.name,strategy:n.strategy,moduleId:o,component:r}),a=r.childRouter;if(a){var l=i.getWildcardPath();return a._createNavigationInstruction(l,i).then((function(i){return n.childNavigationInstruction=i,O(i).then((function(n){return n instanceof T?e.reject(n):(i.plan=n,s.childNavigationInstruction=i,F(t,i))}))}))}}))},L=function(t,i,n){var r=i.router,o=i.lifecycleArgs;return e.resolve().then((function(){return t.loadRoute(r,n,i)})).then((function(e){var t=e.viewModel,i=e.childContainer;if(e.router=r,e.config=n,"configureRouter"in t){var s=i.getChildRouter();return e.childRouter=s,s.configure((function(e){return t.configureRouter(e,s,o[0],o[1],o[2])})).then((function(){return e}))}return e}))},V=function(){function e(){}return e.prototype.loadRoute=function(e,t,i){throw new Error('Route loaders must implement "loadRoute(router, config, navigationInstruction)".')},e}(),M=function(){function e(e){this.routeLoader=e}return e.inject=function(){return[V]},e.prototype.run=function(e,t){return F(this.routeLoader,e).then(t,t.cancel)},e}(),z=function(){function e(){}return e.prototype.run=function(e,t){return e._commitChanges(!0).then((function(){return e._updateTitle(),t()}))},e}();!function(e){e.NoChange="no-change",e.InvokeLifecycle="invoke-lifecycle",e.Replace="replace"}(R||(R={}));var G,j,H,B="invoke-lifecycle",U="replace",W=function(e,t,i,n){var r=e.plan,o=X(r,t),s=o.length;function a(e){return n||$(e)?l():i.cancel(e)}function l(){if(s--)try{var n=o[s][t](e);return J(n,a,i.cancel)}catch(e){return i.cancel(e)}return e.router.couldDeactivate=!0,i()}return l()},X=function(e,t,i){for(var n in void 0===i&&(i=[]),e){var r=e[n],o=r.prevComponent;if((r.strategy===B||r.strategy===U)&&o){var s=o.viewModel;t in s&&i.push(s)}r.strategy===U&&o?q(o,t,i):r.childNavigationInstruction&&X(r.childNavigationInstruction.plan,t,i)}return i},q=function(e,t,i){var n=e.childRouter;if(n&&n.currentInstruction){var r=n.currentInstruction.viewPortInstructions;for(var o in r){var s=r[o].component,a=s.viewModel;t in a&&i.push(a),q(s,t,i)}}},K=function(e,t,i,n){var r=Y(e,t),o=r.length,s=-1;function a(){var e;if(++s<o)try{var l=r[s],c=(e=l.viewModel)[t].apply(e,l.lifecycleArgs);return J(c,(function(e){return function(e,t){return n||$(e,t)?a():i.cancel(e)}(e,l.router)}),i.cancel)}catch(e){return i.cancel(e)}return i()}return a()},Y=function(e,t,i,n){void 0===i&&(i=[]);var r=e.plan;return Object.keys(r).forEach((function(o){var s=r[o],a=e.viewPortInstructions[o],l=a.component,c=l.viewModel;s.strategy!==B&&s.strategy!==U||!(t in c)||i.push({viewModel:c,lifecycleArgs:a.lifecycleArgs,router:n});var u=s.childNavigationInstruction;u&&Y(u,t,i,l.childRouter||n)})),i},$=function(e,t){return!(e instanceof Error)&&(_(e)?("function"==typeof e.setRouter&&e.setRouter(t),!!e.shouldContinueProcessing):void 0===e||e)},Q=function(){function e(e){this._subscribed=!0,this._subscription=e(this),this._subscribed||this.unsubscribe()}return Object.defineProperty(e.prototype,"subscribed",{get:function(){return this._subscribed},enumerable:!0,configurable:!0}),e.prototype.unsubscribe=function(){this._subscribed&&this._subscription&&this._subscription.unsubscribe(),this._subscribed=!1},e}(),J=function(t,i,n){if(t&&"function"==typeof t.then)return e.resolve(t).then(i).catch(n);if(t&&"function"==typeof t.subscribe){var r=t;return new Q((function(e){return r.subscribe({next:function(){e.subscribed&&(e.unsubscribe(),i(t))},error:function(t){e.subscribed&&(e.unsubscribe(),n(t))},complete:function(){e.subscribed&&(e.unsubscribe(),i(t))}})}))}try{return i(t)}catch(e){return n(e)}},Z=function(){function e(){}return e.prototype.run=function(e,t){return W(e,"canDeactivate",t)},e}(),ee=function(){function e(){}return e.prototype.run=function(e,t){return K(e,"canActivate",t)},e}(),te=function(){function e(){}return e.prototype.run=function(e,t){return W(e,"deactivate",t,!0)},e}(),ie=function(){function e(){}return e.prototype.run=function(e,t){return K(e,"activate",t,!0)},e}(),ne=function(){function e(e,t,i){this.steps=[],this.container=e,this.slotName=t,this.slotAlias=i}return e.prototype.getSteps=function(){var e=this;return this.steps.map((function(t){return e.container.get(t)}))},e}(),re=function(){function e(e){this.container=e,this.steps=[x,Z,M,oe(e,"authorize"),ee,oe(e,"preActivate","modelbind"),te,ie,oe(e,"preRender","precommit"),z,oe(e,"postRender","postcomplete")]}return e.inject=function(){return[r.a]},e.prototype.createPipeline=function(e){var t=this;void 0===e&&(e=!0);var i=new C;return this.steps.forEach((function(n){(e||n!==Z)&&i.addStep(t.container.get(n))})),i},e.prototype._findStep=function(e){return this.steps.find((function(t){return t.slotName===e||t.slotAlias===e}))},e.prototype.addStep=function(e,t){var i=this._findStep(e);if(!i)throw new Error("Invalid pipeline slot name: "+e+".");var n=i.steps;n.includes(t)||n.push(t)},e.prototype.removeStep=function(e,t){var i=this._findStep(e);if(i){var n=i.steps;n.splice(n.indexOf(t),1)}},e.prototype._clearSteps=function(e){void 0===e&&(e="");var t=this._findStep(e);t&&(t.steps=[])},e.prototype.reset=function(){this._clearSteps("authorize"),this._clearSteps("preActivate"),this._clearSteps("preRender"),this._clearSteps("postRender")},e}(),oe=function(e,t,i){return new ne(e,t,i)},se=Object(n.getLogger)("app-router"),ae=function(t){function i(e,i,n,r){var o=t.call(this,e,i)||this;return o.pipelineProvider=n,o.events=r,o}return function(e,t){function i(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(i,t),i.inject=function(){return[r.a,o.a,re,a.a]},i.prototype.reset=function(){t.prototype.reset.call(this),this.maxInstructionCount=10,this._queue?this._queue.length=0:this._queue=[]},i.prototype.loadUrl=function(e){var t=this;return this._createNavigationInstruction(e).then((function(e){return t._queueInstruction(e)})).catch((function(e){se.error(e),ue(t)}))},i.prototype.registerViewPort=function(i,n){var r=this,o=i;if(t.prototype.registerViewPort.call(this,o,n),this.isActive)this._dequeueInstruction();else{var s=this._findViewModel(o);if("configureRouter"in s){if(!this.isConfigured){var a=this._resolveConfiguredPromise;return this._resolveConfiguredPromise=function(){},this.configure((function(t){return e.resolve(s.configureRouter(t,r)).then((function(){return t}))})).then((function(){r.activate(),a()}))}}else this.activate()}return e.resolve()},i.prototype.activate=function(e){this.isActive||(this.isActive=!0,this.options=Object.assign({routeHandler:this.loadUrl.bind(this)},this.options,e),this.history.activate(this.options),this._dequeueInstruction())},i.prototype.deactivate=function(){this.isActive=!1,this.history.deactivate()},i.prototype._queueInstruction=function(t){var i=this;return new e((function(e){t.resolve=e,i._queue.unshift(t),i._dequeueInstruction()}))},i.prototype._dequeueInstruction=function(t){var i=this;return void 0===t&&(t=0),e.resolve().then((function(){if(!i.isNavigating||t){var e=i._queue.shift();if(i._queue.length=0,e){i.isNavigating=!0;var n=i.history.getState("NavigationTracker"),r=i.currentNavigationTracker;n||r?n?r?r<n?i.isNavigatingForward=!0:r>n&&(i.isNavigatingBack=!0):i.isNavigatingRefresh=!0:i.isNavigatingNew=!0:(i.isNavigatingFirst=!0,i.isNavigatingNew=!0),n||(n=Date.now(),i.history.setState("NavigationTracker",n)),i.currentNavigationTracker=n,e.previousInstruction=i.currentInstruction;var o=i.maxInstructionCount;if(t){if(t===o-1)return se.error(t+1+" navigation instructions have been attempted without success. Restoring last known good location."),ue(i),i._dequeueInstruction(t+1);if(t>o)throw new Error("Maximum navigation attempts exceeded. Giving up.")}else i.events.publish("router:navigation:processing",{instruction:e});return i.pipelineProvider.createPipeline(!i.couldDeactivate).run(e).then((function(n){return le(e,n,t,i)})).catch((function(e){return{output:e instanceof Error?e:new Error(e)}})).then((function(n){return ce(e,n,!!t,i)}))}}}))},i.prototype._findViewModel=function(e){if(this.container.viewModel)return this.container.viewModel;if(e.container)for(var t=e.container;t;){if(t.viewModel)return this.container.viewModel=t.viewModel,t.viewModel;t=t.parent}},i}(S),le=function(t,i,n,r){i&&"completed"in i&&"output"in i||((i=i||{}).output=new Error("Expected router pipeline to return a navigation result, but got ["+JSON.stringify(i)+"] instead."));var o=null,s=null;return _(i.output)?s=i.output.navigate(r):(o=i,i.completed||(i.output instanceof Error&&se.error(i.output.toString()),ue(r))),e.resolve(s).then((function(e){return r._dequeueInstruction(n+1)})).then((function(e){return o||e||i}))},ce=function(e,t,i,n){e.resolve(t);var r=n.events,o={instruction:e,result:t};if(i)r.publish("router:navigation:child:complete",o);else{n.isNavigating=!1,n.isExplicitNavigation=!1,n.isExplicitNavigationBack=!1,n.isNavigatingFirst=!1,n.isNavigatingNew=!1,n.isNavigatingRefresh=!1,n.isNavigatingForward=!1,n.isNavigatingBack=!1,n.couldDeactivate=!1;var s=void 0;if(t.output instanceof Error)s="router:navigation:error";else if(t.completed){var a=e.queryString?"?"+e.queryString:"";n.history.previousLocation=e.fragment+a,s="router:navigation:success"}else s="router:navigation:canceled";r.publish(s,o),r.publish("router:navigation:complete",o)}return t},ue=function(e){var t=e.history.previousLocation;t?e.navigate(t,{trigger:!1,replace:!0}):e.fallbackRoute?e.navigate(e.fallbackRoute,{trigger:!0,replace:!0}):se.error("Router navigation failed, and no previous location or fallbackRoute could be restored.")};!function(e){e.Completed="completed",e.Canceled="canceled",e.Rejected="rejected",e.Running="running"}(G||(G={})),function(e){e.Processing="router:navigation:processing",e.Error="router:navigation:error",e.Canceled="router:navigation:canceled",e.Complete="router:navigation:complete",e.Success="router:navigation:success",e.ChildComplete="router:navigation:child:complete"}(j||(j={})),function(e){e.Authorize="authorize",e.PreActivate="preActivate",e.PreRender="preRender",e.PostRender="postRender"}(H||(H={}))}).call(this,i("CW7D"))},DiJ9:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("fj9p");function r(e,t){if(Array.isArray(e))for(const i of e)if(i.editor)if(i.formatter&&i.formatter!==n.U.multiple&&i.formatter!==t){const e=i.formatter;i.formatter=n.U.multiple,i.params=Object.assign(Object.assign({},i.params),{formatters:[e,t]})}else i.formatter&&i.formatter===n.U.multiple&&i.params?-1===i.params.formatters.findIndex(e=>e===t)&&(i.params.formatters=[...i.params.formatters,t]):i.formatter=t}},Gc69:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("fj9p");const r={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoResize:{applyResizeToContainer:!0,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:180,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel",width:40},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1},columnGroupSeparator:" - ",columnPicker:{fadeSpeed:0,hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:o},compositeEditorOptions:{labels:{cancelButtonKey:"CANCEL",cloneButtonKey:"CLONE",resetEditorButtonTooltipKey:"RESET_INPUT_VALUE",resetFormButtonKey:"RESET_FORM",massSelectionButtonKey:"APPLY_TO_SELECTION",massSelectionStatusKey:"X_OF_Y_MASS_SELECTED",massUpdateButtonKey:"APPLY_MASS_UPDATE",massUpdateStatusKey:"ALL_X_RECORDS_SELECTED",saveButtonKey:"SAVE"},resetEditorButtonCssClass:"fa fa-repeat",resetFormButtonIconCssClass:"fa fa-repeat"},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCollapseAllGroupsCommand:"fa fa-compress",iconExpandAllGroupsCommand:"fa fa-expand",iconClearGroupingCommand:"fa fa-times",iconCopyCellValueCommand:"fa fa-clone",iconExportCsvCommand:"fa fa-download",iconExportExcelCommand:"fa fa-file-excel-o text-success",iconExportTextDelimitedCommand:"fa fa-download",width:200},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{items:"items",itemsKey:"ITEMS",of:"of",ofKey:"OF",itemsSelected:"items selected",itemsSelectedKey:"ITEMS_SELECTED"}},dataView:{syncGridSelection:!0,syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultColumnSortFieldId:"id",defaultAureliaEventPrefix:"",defaultSlickgridEventPrefix:"",defaultFilter:n.S.input,defaultFilterPlaceholder:"üîéÔ∏é",defaultBackendServiceFilterTypingDebounce:500,enableFilterTrimWhiteSpace:!1,defaultFilterRangeOperator:n.vb.rangeInclusive,editable:!1,editorTypingDebounce:450,filterTypingDebounce:0,enableEmptyDataWarningMessage:!0,emptyDataWarning:{className:"slick-empty-data-warning",message:"No data to display.",messageKey:"EMPTY_DATA_WARNING_MESSAGE",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!1,enableTextExport:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,eventNamingStyle:n.H.kebabCase,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,exportWithFormatter:!1,filename:"export",format:n.N.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"‚Æû",groupExpandedSymbol:"‚Æü",groupingAggregatorRowText:"",sanitizeDataExport:!1},textExportOptions:{delimiter:n.A.comma,exportWithFormatter:!1,filename:"export",format:n.N.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!1,useUtf8WithBom:!0},gridAutosizeColsMode:n.W.none,forceFitColumns:!1,frozenHeaderWidthCalcDifferential:1,gridMenu:{commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleFilterCommand:!1,hideTogglePreHeaderCommand:!1,iconCssClass:"fa fa-bars",iconClearAllFiltersCommand:"fa fa-filter",iconClearAllSortingCommand:"fa fa-unsorted",iconClearFrozenColumnsCommand:"fa fa-times",iconExportCsvCommand:"fa fa-download",iconExportExcelCommand:"fa fa-file-excel-o",iconExportTextDelimitedCommand:"fa fa-download",iconRefreshDatasetCommand:"fa fa-refresh",iconToggleFilterCommand:"fa fa-random",iconTogglePreHeaderCommand:"fa fa-random",menuWidth:16,resizeOnShowHeaderRow:!0,useClickToRepositionMenu:!1,headerColumnValueExtractor:o},headerMenu:{autoAlign:!0,autoAlignOffset:12,minWidth:140,iconClearFilterCommand:"fa fa-filter",iconClearSortCommand:"fa fa-unsorted",iconFreezeColumns:"fa fa-thumb-tack",iconSortAscCommand:"fa fa-sort-amount-asc",iconSortDescCommand:"fa fa-sort-amount-desc",iconColumnHideCommand:"fa fa-times",iconColumnResizeByContentCommand:"fa fa-arrows-h",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1},multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!0,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},rowDetailView:{cssClass:"detail-view-toggle",panelRows:1,keyPrefix:"__",useRowClick:!1,useSimpleViewportCalc:!0,saveDetailViewOnScroll:!1,viewModel:""},headerRowHeight:35,rowHeight:35,topPanelHeight:30,translationNamespaceSeparator:":",resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:"ÕèÕèÕèÕèÕèÕèÕèÕèÕè¬∑"}};function o(e,t){var i,n;const r=(null==e?void 0:e.columnGroup)||"",o=null!==(i=null==t?void 0:t.columnGroupSeparator)&&void 0!==i?i:" - ";return r?r+o+e.name:null!==(n=null==e?void 0:e.name)&&void 0!==n?n:""}},H9V8:function(e,t,i){"use strict";i.d(t,"a",(function(){return n.a})),i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a.a})),i.d(t,"d",(function(){return l.a})),i.d(t,"e",(function(){return c.a}));var n=i("lBQj"),r=i("aurelia-framework"),o=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let s=class{constructor(e){this.container=e}get(e){const t=this.container.get(e);return"string"==typeof e&&t===e?null:t}registerInstance(e,t){this.container.registerInstance(e,t)}};s=o([Object(r.o)(r.c),Object(r.q)(!0)],s);var a=i("XNjD"),l=i("cgQs"),c=i("eyxJ")},IlDx:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{}},XNjD:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return a}));var n=i("fj9p"),r=i("aurelia-framework"),o=i("IlDx"),s=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let a=class{constructor(e){this.pluginEa=e,this._subscriptions=[],this.eventNamingStyle=n.H.camelCase}dispatchCustomEvent(e,t,i,n="",o=!0,s=!0){const a=this.getEventNameByNamingConvention(t,n),l={bubbles:o,cancelable:s};return i&&(l.detail=i),e.dispatchEvent(r.d.createCustomEvent(a,l))}publish(t,i){const n=this.getEventNameByNamingConvention(t,"");return new e(e=>{this.pluginEa.publish(n,i),setTimeout(()=>e(!0),0)})}subscribe(e,t){const i=this.getEventNameByNamingConvention(e,""),n=this.pluginEa.subscribe(i,t);return this._subscriptions.push(n),n}unsubscribe(){throw new Error('The method "unsubscribe" is not implemented, please use "unsubscribeAll()" instead')}unsubscribeAll(e){let t=Array.isArray(e)?e:this._subscriptions;for(;t.length>0;){const e=t.pop();(null==e?void 0:e.dispose)&&e.dispose()}return t=[],t}getEventNameByNamingConvention(e,t){let i="";switch(this.eventNamingStyle){case n.H.camelCase:i=""!==t?`${t}${Object(n.Wd)(e)}`:e;break;case n.H.kebabCase:i=""!==t?`${t}-${Object(n.Yd)(e)}`:Object(n.Yd)(e);break;case n.H.lowerCase:i=`${t}${e}`.toLowerCase();break;case n.H.lowerCaseWithoutOnPrefix:i=`${t}${e.replace(/^on/,"")}`.toLowerCase()}return i}};a=s([Object(r.q)(!0),Object(r.o)(o.a)],a)}).call(this,i("CW7D"))},"aurelia-slickgrid":function(e,t,i){"use strict";i.r(t),i.d(t,"Constants",(function(){return n.u})),i.d(t,"GlobalGridOptions",(function(){return n.V})),i.d(t,"CaseType",(function(){return n.h})),i.d(t,"DelimiterType",(function(){return n.A})),i.d(t,"EmitterType",(function(){return n.F})),i.d(t,"EventNamingStyle",(function(){return n.H})),i.d(t,"ExtensionName",(function(){return n.J})),i.d(t,"FieldType",(function(){return n.M})),i.d(t,"FileType",(function(){return n.N})),i.d(t,"FilterMultiplePassType",(function(){return n.Q})),i.d(t,"GridAutosizeColsMode",(function(){return n.W})),i.d(t,"GridStateType",(function(){return n.bb})),i.d(t,"KeyCode",(function(){return n.nb})),i.d(t,"OperatorType",(function(){return n.vb})),i.d(t,"SortDirection",(function(){return n.Mb})),i.d(t,"SortDirectionNumber",(function(){return n.Nb})),i.d(t,"ToggleStateChangeType",(function(){return n.Tb})),i.d(t,"SumAggregator",(function(){return n.Rb})),i.d(t,"MaxAggregator",(function(){return n.pb})),i.d(t,"DistinctAggregator",(function(){return n.B})),i.d(t,"MinAggregator",(function(){return n.qb})),i.d(t,"CountAggregator",(function(){return n.x})),i.d(t,"CloneAggregator",(function(){return n.m})),i.d(t,"AvgAggregator",(function(){return n.e})),i.d(t,"Aggregators",(function(){return n.a})),i.d(t,"AutoCompleteEditor",(function(){return n.b})),i.d(t,"CheckboxEditor",(function(){return n.k})),i.d(t,"DateEditor",(function(){return n.y})),i.d(t,"DualInputEditor",(function(){return n.D})),i.d(t,"Editors",(function(){return n.E})),i.d(t,"FloatEditor",(function(){return n.T})),i.d(t,"InputEditor",(function(){return n.hb})),i.d(t,"IntegerEditor",(function(){return n.mb})),i.d(t,"LongTextEditor",(function(){return n.ob})),i.d(t,"MultipleSelectEditor",(function(){return n.rb})),i.d(t,"SelectEditor",(function(){return n.Cb})),i.d(t,"SingleSelectEditor",(function(){return n.Fb})),i.d(t,"SliderEditor",(function(){return n.Ib})),i.d(t,"AutoTooltipExtension",(function(){return n.d})),i.d(t,"CellExternalCopyManagerExtension",(function(){return n.i})),i.d(t,"CellMenuExtension",(function(){return n.j})),i.d(t,"CheckboxSelectorExtension",(function(){return n.l})),i.d(t,"ColumnPickerExtension",(function(){return n.o})),i.d(t,"ContextMenuExtension",(function(){return n.w})),i.d(t,"DraggableGroupingExtension",(function(){return n.C})),i.d(t,"ExtensionUtility",(function(){return n.L})),i.d(t,"GridMenuExtension",(function(){return n.Y})),i.d(t,"GroupItemMetaProviderExtension",(function(){return n.cb})),i.d(t,"HeaderButtonExtension",(function(){return n.fb})),i.d(t,"HeaderMenuExtension",(function(){return n.gb})),i.d(t,"RowDetailViewExtension",(function(){return n.yb})),i.d(t,"RowMoveManagerExtension",(function(){return n.zb})),i.d(t,"RowSelectionExtension",(function(){return n.Ab})),i.d(t,"executeStringFilterCondition",(function(){return n.Kc})),i.d(t,"getFilterParsedText",(function(){return n.Xc})),i.d(t,"executeObjectFilterCondition",(function(){return n.Jc})),i.d(t,"getFilterParsedObjectResult",(function(){return n.Wc})),i.d(t,"executeNumberFilterCondition",(function(){return n.Ic})),i.d(t,"getFilterParsedNumbers",(function(){return n.Vc})),i.d(t,"compareObjects",(function(){return n.sc})),i.d(t,"isCollectionOperator",(function(){return n.jd})),i.d(t,"testFilterCondition",(function(){return n.Ud})),i.d(t,"FilterConditions",(function(){return n.O})),i.d(t,"executeFilterConditionTest",(function(){return n.Hc})),i.d(t,"getParsedSearchTermsByFieldType",(function(){return n.Zc})),i.d(t,"getVarTypeOfByColumnFieldType",(function(){return n.cd})),i.d(t,"executeCollectionSearchFilterCondition",(function(){return n.Gc})),i.d(t,"executeBooleanFilterCondition",(function(){return n.Fc})),i.d(t,"getFilterParsedBoolean",(function(){return n.Uc})),i.d(t,"AutoCompleteFilter",(function(){return n.c})),i.d(t,"CompoundDateFilter",(function(){return n.p})),i.d(t,"CompoundInputFilter",(function(){return n.q})),i.d(t,"CompoundInputNumberFilter",(function(){return n.r})),i.d(t,"CompoundInputPasswordFilter",(function(){return n.s})),i.d(t,"CompoundSliderFilter",(function(){return n.t})),i.d(t,"DateRangeFilter",(function(){return n.z})),i.d(t,"Filters",(function(){return n.S})),i.d(t,"FilterFactory",(function(){return n.P})),i.d(t,"InputFilter",(function(){return n.ib})),i.d(t,"InputMaskFilter",(function(){return n.jb})),i.d(t,"InputNumberFilter",(function(){return n.kb})),i.d(t,"InputPasswordFilter",(function(){return n.lb})),i.d(t,"MultipleSelectFilter",(function(){return n.sb})),i.d(t,"NativeSelectFilter",(function(){return n.tb})),i.d(t,"SelectFilter",(function(){return n.Db})),i.d(t,"SingleSelectFilter",(function(){return n.Gb})),i.d(t,"SliderRangeFilter",(function(){return n.Kb})),i.d(t,"SliderFilter",(function(){return n.Jb})),i.d(t,"alignRightFormatter",(function(){return n.Zb})),i.d(t,"arrayObjectToCsvFormatter",(function(){return n.ac})),i.d(t,"arrayToCsvFormatter",(function(){return n.cc})),i.d(t,"boldFormatter",(function(){return n.hc})),i.d(t,"bsDropdownFormatter",(function(){return n.ic})),i.d(t,"centerFormatter",(function(){return n.lc})),i.d(t,"checkboxFormatter",(function(){return n.mc})),i.d(t,"checkmarkMaterialFormatter",(function(){return n.oc})),i.d(t,"checkmarkFormatter",(function(){return n.nc})),i.d(t,"collectionEditorFormatter",(function(){return n.pc})),i.d(t,"collectionFormatter",(function(){return n.qc})),i.d(t,"complexObjectFormatter",(function(){return n.tc})),i.d(t,"decimalFormatter",(function(){return n.vc})),i.d(t,"deleteIconFormatter",(function(){return n.xc})),i.d(t,"dollarFormatter",(function(){return n.Bc})),i.d(t,"dollarColoredFormatter",(function(){return n.Ac})),i.d(t,"dollarColoredBoldFormatter",(function(){return n.zc})),i.d(t,"editIconFormatter",(function(){return n.Cc})),i.d(t,"Formatters",(function(){return n.U})),i.d(t,"autoAddEditorFormatterToColumnsWithEditor",(function(){return n.dc})),i.d(t,"getValueFromParamsOrFormatterOptions",(function(){return n.bd})),i.d(t,"getAssociatedDateFormatter",(function(){return n.Rc})),i.d(t,"exportWithFormatterWhenDefined",(function(){return n.Lc})),i.d(t,"parseFormatterWhenExist",(function(){return n.Ad})),i.d(t,"hyperlinkFormatter",(function(){return n.gd})),i.d(t,"iconFormatter",(function(){return n.hd})),i.d(t,"infoIconFormatter",(function(){return n.id})),i.d(t,"italicFormatter",(function(){return n.ld})),i.d(t,"lowercaseFormatter",(function(){return n.md})),i.d(t,"maskFormatter",(function(){return n.sd})),i.d(t,"multipleFormatter",(function(){return n.vd})),i.d(t,"percentCompleteFormatter",(function(){return n.Ed})),i.d(t,"percentCompleteBarWithTextFormatter",(function(){return n.Dd})),i.d(t,"percentCompleteBarFormatter",(function(){return n.Cd})),i.d(t,"percentFormatter",(function(){return n.Fd})),i.d(t,"percentSymbolFormatter",(function(){return n.Gd})),i.d(t,"progressBarFormatter",(function(){return n.Hd})),i.d(t,"translateFormatter",(function(){return n.be})),i.d(t,"translateBooleanFormatter",(function(){return n.ae})),i.d(t,"treeExportFormatter",(function(){return n.ce})),i.d(t,"treeFormatter",(function(){return n.de})),i.d(t,"uppercaseFormatter",(function(){return n.ie})),i.d(t,"yesNoFormatter",(function(){return n.je})),i.d(t,"sumTotalsFormatter",(function(){return n.Td})),i.d(t,"sumTotalsDollarFormatter",(function(){return n.Sd})),i.d(t,"sumTotalsDollarColoredFormatter",(function(){return n.Rd})),i.d(t,"sumTotalsDollarColoredBoldFormatter",(function(){return n.Qd})),i.d(t,"sumTotalsDollarBoldFormatter",(function(){return n.Pd})),i.d(t,"sumTotalsColoredFormatter",(function(){return n.Od})),i.d(t,"sumTotalsBoldFormatter",(function(){return n.Nd})),i.d(t,"minTotalsFormatter",(function(){return n.ud})),i.d(t,"maxTotalsFormatter",(function(){return n.td})),i.d(t,"GroupTotalFormatters",(function(){return n.db})),i.d(t,"avgTotalsPercentageFormatter",(function(){return n.gc})),i.d(t,"avgTotalsFormatter",(function(){return n.fc})),i.d(t,"avgTotalsDollarFormatter",(function(){return n.ec})),i.d(t,"objectStringSortComparer",(function(){return n.xd})),i.d(t,"stringSortComparer",(function(){return n.Md})),i.d(t,"sortByFieldType",(function(){return n.Ld})),i.d(t,"SortComparers",(function(){return n.Lb})),i.d(t,"numericSortComparer",(function(){return n.wd})),i.d(t,"compareDates",(function(){return n.rc})),i.d(t,"getAssociatedDateSortComparer",(function(){return n.Sc})),i.d(t,"BackendUtilityService",(function(){return n.f})),i.d(t,"BindingEventService",(function(){return n.g})),i.d(t,"CollectionService",(function(){return n.n})),i.d(t,"ContainerService",(function(){return n.v})),i.d(t,"buildSelectEditorOrFilterDomElement",(function(){return n.jc})),i.d(t,"ExcelExportService",(function(){return n.I})),i.d(t,"ExtensionService",(function(){return n.K})),i.d(t,"FilterService",(function(){return n.R})),i.d(t,"GridService",(function(){return n.Z})),i.d(t,"GridEventService",(function(){return n.X})),i.d(t,"GridStateService",(function(){return n.ab})),i.d(t,"GroupingAndColspanService",(function(){return n.eb})),i.d(t,"PaginationService",(function(){return n.wb})),i.d(t,"ResizerService",(function(){return n.xb})),i.d(t,"RxJsFacade",(function(){return n.Bb})),i.d(t,"Observable",(function(){return n.ub})),i.d(t,"Subject",(function(){return n.Pb})),i.d(t,"Subscription",(function(){return n.Qb})),i.d(t,"SharedService",(function(){return n.Eb})),i.d(t,"SortService",(function(){return n.Ob})),i.d(t,"TextExportService",(function(){return n.Sb})),i.d(t,"TreeDataService",(function(){return n.Ub})),i.d(t,"addToArrayWhenNotExists",(function(){return n.Wb})),i.d(t,"addWhiteSpaces",(function(){return n.Yb})),i.d(t,"arrayRemoveItemByIndex",(function(){return n.bc})),i.d(t,"castObservableToPromise",(function(){return n.kc})),i.d(t,"unflattenParentChildArrayToTree",(function(){return n.ee})),i.d(t,"addTreeLevelByMutation",(function(){return n.Xb})),i.d(t,"flattenToParentChildArray",(function(){return n.Pc})),i.d(t,"deepCopy",(function(){return n.wc})),i.d(t,"emptyElement",(function(){return n.Dc})),i.d(t,"emptyObject",(function(){return n.Ec})),i.d(t,"findItemInHierarchicalStructure",(function(){return n.Mc})),i.d(t,"findItemInTreeStructure",(function(){return n.Nc})),i.d(t,"htmlEncode",(function(){return n.dd})),i.d(t,"htmlEntityDecode",(function(){return n.fd})),i.d(t,"htmlEncodedStringWithPadding",(function(){return n.ed})),i.d(t,"isNumber",(function(){return n.kd})),i.d(t,"decimalFormatted",(function(){return n.uc})),i.d(t,"destroyObjectDomElementProps",(function(){return n.yc})),i.d(t,"formatNumber",(function(){return n.Qc})),i.d(t,"getDescendantProperty",(function(){return n.Tc})),i.d(t,"getTranslationPrefix",(function(){return n.ad})),i.d(t,"mapMomentDateFormatWithFieldType",(function(){return n.od})),i.d(t,"mapFlatpickrDateFormatWithFieldType",(function(){return n.nd})),i.d(t,"mapOperatorType",(function(){return n.rd})),i.d(t,"mapOperatorToShorthandDesignation",(function(){return n.qd})),i.d(t,"mapOperatorByFieldType",(function(){return n.pd})),i.d(t,"objectWithoutKey",(function(){return n.yd})),i.d(t,"parseBoolean",(function(){return n.zd})),i.d(t,"parseUtcDate",(function(){return n.Bd})),i.d(t,"sanitizeHtmlToText",(function(){return n.Id})),i.d(t,"sanitizeTextByAvailableSanitizer",(function(){return n.Jd})),i.d(t,"setDeepValue",(function(){return n.Kd})),i.d(t,"thousandSeparatorFormatted",(function(){return n.Vd})),i.d(t,"titleCase",(function(){return n.Wd})),i.d(t,"toCamelCase",(function(){return n.Xd})),i.d(t,"toKebabCase",(function(){return n.Yd})),i.d(t,"findOrDefault",(function(){return n.Oc})),i.d(t,"getHtmlElementOffset",(function(){return n.Yc})),i.d(t,"toSnakeCase",(function(){return n.Zd})),i.d(t,"unsubscribeAll",(function(){return n.he})),i.d(t,"uniqueArray",(function(){return n.fe})),i.d(t,"uniqueObjectArray",(function(){return n.ge})),i.d(t,"Enums",(function(){return n.G})),i.d(t,"Utilities",(function(){return n.Vb})),i.d(t,"AureliaUtilService",(function(){return d.a})),i.d(t,"PubSubService",(function(){return d.c})),i.d(t,"TranslaterService",(function(){return d.d})),i.d(t,"disposeAllSubscriptions",(function(){return d.e})),i.d(t,"configure",(function(){return h})),i.d(t,"AureliaSlickgridCustomElement",(function(){return s.AureliaSlickgridCustomElement})),i.d(t,"SlickPaginationCustomElement",(function(){return a.SlickPaginationCustomElement})),i.d(t,"SlickgridConfig",(function(){return u}));var n=i("fj9p"),r=i("aurelia-event-aggregator"),o=i("aurelia-framework"),s=(i("70NS"),i("aurelia-slickgrid/custom-elements/aurelia-slickgrid")),a=i("aurelia-slickgrid/custom-elements/slick-pagination"),l=i("IlDx"),c=i("Gc69");class u{constructor(){this.options=c.a}}var d=i("H9V8");function h(e,t){e.globalResources("./custom-elements/aurelia-slickgrid"),e.globalResources("./custom-elements/slick-pagination"),e.globalResources("./value-converters/asgDateFormat"),e.globalResources("./value-converters/asgNumber"),e.container.registerResolver(l.a,o.f.of(r.a).as(l.a));const i=new u;e.container.registerInstance(u,i),"function"==typeof t&&t(i)}},"aurelia-slickgrid/custom-elements/aurelia-slickgrid":function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"AureliaSlickgridCustomElement",(function(){return f}));var n=i("EVdn"),r=(i("chtW"),i("kCXG"),i("NvoQ"),i("7TqN"),i("8vwt"),i("fXKB"),i("cKLe"),i("Oj9s"),i("uqKM"),i("9T+Z"),i("fj9p")),o=i("1KT3"),s=i("7OnR"),a=i("aurelia-framework"),l=i("aurelia-event-aggregator"),c=i("dbac"),u=i("Gc69"),d=i("H9V8"),h=i("pvKZ"),p=i("DiJ9"),g=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let f=class{constructor(e,t,i,n,o,s,a,l,c){var u,d,p,g,f,v,m,S,b,y,w,E,C,_;this.aureliaUtilService=e,this.bindingEngine=t,this.container=i,this.elm=n,this.globalEa=o,this.containerService=s,this.pubSubService=a,this.translaterService=l,this._columnDefinitions=[],this._currentDatasetLength=0,this._dataset=null,this._hideHeaderRowAfterPageLoad=!1,this._isGridInitialized=!1,this._isDatasetInitialized=!1,this._isDatasetHierarchicalInitialized=!1,this._isPaginationInitialized=!1,this._isLocalGrid=!0,this._registeredResources=[],this.showPagination=!1,this.serviceList=[],this.subscriptions=[],this.columnDefinitions=[],this.totalItems=0,this.instances=null,this.dataset=[],this.gridId="";const T=new r.Hb;this.pubSubService.eventNamingStyle=r.H.kebabCase,this.backendUtilityService=null!==(u=null==c?void 0:c.backendUtilityService)&&void 0!==u?u:new r.f,this.gridEventService=null!==(d=null==c?void 0:c.gridEventService)&&void 0!==d?d:new r.X,this.sharedService=null!==(p=null==c?void 0:c.sharedService)&&void 0!==p?p:new r.Eb,this.collectionService=null!==(g=null==c?void 0:c.collectionService)&&void 0!==g?g:new r.n(this.translaterService),this.extensionUtility=null!==(f=null==c?void 0:c.extensionUtility)&&void 0!==f?f:new r.L(this.sharedService,this.translaterService),this.filterFactory=new r.P(T,this.translaterService,this.collectionService),this.filterService=null!==(v=null==c?void 0:c.filterService)&&void 0!==v?v:new r.R(this.filterFactory,this.pubSubService,this.sharedService,this.backendUtilityService),this.resizerService=null!==(m=null==c?void 0:c.resizerService)&&void 0!==m?m:new r.xb(this.pubSubService),this.sortService=null!==(S=null==c?void 0:c.sortService)&&void 0!==S?S:new r.Ob(this.sharedService,this.pubSubService,this.backendUtilityService),this.treeDataService=null!==(b=null==c?void 0:c.treeDataService)&&void 0!==b?b:new r.Ub(this.pubSubService,this.sharedService,this.sortService),this.paginationService=null!==(y=null==c?void 0:c.paginationService)&&void 0!==y?y:new r.wb(this.pubSubService,this.sharedService,this.backendUtilityService);const O=new r.d(this.sharedService),R=new r.i(this.extensionUtility,this.sharedService),I=new r.j(this.extensionUtility,this.sharedService,this.translaterService),A=new r.w(this.extensionUtility,this.sharedService,this.treeDataService,this.translaterService),P=new r.o(this.extensionUtility,this.sharedService),D=new r.l(this.sharedService),x=new r.C(this.extensionUtility,this.sharedService),F=new r.Y(this.extensionUtility,this.filterService,this.sharedService,this.sortService,this.backendUtilityService,this.translaterService),N=new r.cb(this.sharedService),k=new r.fb(this.extensionUtility,this.sharedService),L=new r.gb(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService,this.translaterService),V=new h.a(this.aureliaUtilService,this.pubSubService,this.sharedService),M=new r.zb(this.sharedService),z=new r.Ab(this.sharedService);this.extensionService=null!==(w=null==c?void 0:c.extensionService)&&void 0!==w?w:new r.K(O,R,I,D,P,A,x,F,N,k,L,V,M,z,this.sharedService,this.translaterService),this.gridStateService=null!==(E=null==c?void 0:c.gridStateService)&&void 0!==E?E:new r.ab(this.extensionService,this.filterService,this.pubSubService,this.sharedService,this.sortService,this.treeDataService),this.gridService=null!==(C=null==c?void 0:c.gridService)&&void 0!==C?C:new r.Z(this.gridStateService,this.filterService,this.pubSubService,this.paginationService,this.sharedService,this.sortService,this.treeDataService),this.groupingService=null!==(_=null==c?void 0:c.groupingAndColspanService)&&void 0!==_?_:new r.eb(this.extensionUtility,this.extensionService,this.pubSubService),this.serviceList=[this.extensionService,this.filterService,this.gridEventService,this.gridService,this.gridStateService,this.groupingService,this.paginationService,this.resizerService,this.sortService,this.treeDataService],this.containerService.registerInstance("ExtensionUtility",this.extensionUtility),this.containerService.registerInstance("FilterService",this.filterService),this.containerService.registerInstance("CollectionService",this.collectionService),this.containerService.registerInstance("ExtensionService",this.extensionService),this.containerService.registerInstance("GridEventService",this.gridEventService),this.containerService.registerInstance("GridService",this.gridService),this.containerService.registerInstance("GridStateService",this.gridStateService),this.containerService.registerInstance("GroupingAndColspanService",this.groupingService),this.containerService.registerInstance("PaginationService",this.paginationService),this.containerService.registerInstance("ResizerService",this.resizerService),this.containerService.registerInstance("SharedService",this.sharedService),this.containerService.registerInstance("SortService",this.sortService),this.containerService.registerInstance("PubSubService",this.pubSubService),this.containerService.registerInstance("TranslaterService",this.translaterService),this.containerService.registerInstance("TreeDataService",this.treeDataService)}get eventHandler(){return this._eventHandler}get isDatasetInitialized(){return this._isDatasetInitialized}set isDatasetInitialized(e){this._isDatasetInitialized=e}get registeredResources(){return this._registeredResources}attached(){var e;if(this._eventHandler=new Slick.EventHandler,this.initialization(this._eventHandler),this._isGridInitialized=!0,null===(e=this.gridOptions)||void 0===e?void 0:e.enableEmptyDataWarningMessage){const e=this.dataset||[];if(Array.isArray(e)){const t=e.length;this.displayEmptyDataWarning(t<1)}}}initialization(e){var t,i,n,s,a,l,u,d,h,g,f,v,m,S,b,y,w,E,C,_;this.gridOptions.translater=this.translaterService,this._eventHandler=e,this.gridOptions&&(void 0!==this.gridOptions.frozenRow&&this.gridOptions.frozenRow>=0||void 0!==this.gridOptions.frozenColumn&&this.gridOptions.frozenColumn>=0)&&void 0===this.gridOptions.enableMouseWheelScrollHandler&&(this.gridOptions.enableMouseWheelScrollHandler=!0),this.pubSubService.eventNamingStyle=null!==(i=null===(t=this.gridOptions)||void 0===t?void 0:t.eventNamingStyle)&&void 0!==i?i:r.H.camelCase;const T=null!==(s=null===(n=this.gridOptions)||void 0===n?void 0:n.defaultAureliaEventPrefix)&&void 0!==s?s:"";if(this.pubSubService.dispatchCustomEvent(this.elm,"onBeforeGridCreate",!0,T),this._dataset=this._dataset||this.dataset||[],this._currentDatasetLength=this._dataset.length,this.gridOptions=this.mergeGridOptions(this.gridOptions),this._paginationOptions=null===(a=this.gridOptions)||void 0===a?void 0:a.pagination,this.locales=null!==(u=null===(l=this.gridOptions)||void 0===l?void 0:l.locales)&&void 0!==u?u:c.a.locales,this.backendServiceApi=null===(d=this.gridOptions)||void 0===d?void 0:d.backendServiceApi,this._isLocalGrid=!this.backendServiceApi,this.createBackendApiInternalPostProcessCallback(this.gridOptions),!this.customDataView){let e={inlineFilters:this.gridOptions.dataView&&this.gridOptions.dataView.inlineFilters||!1};(this.gridOptions.draggableGrouping||this.gridOptions.enableGrouping)&&(this.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider,this.sharedService.groupItemMetadataProvider=this.groupItemMetadataProvider,e=Object.assign(Object.assign({},e),{groupItemMetadataProvider:this.groupItemMetadataProvider})),this.dataview=new Slick.Data.DataView(e),this.pubSubService.dispatchCustomEvent(this.elm,"onDataviewCreated",this.dataview,T)}this.preRegisterResources(),this._columnDefinitions=this.swapInternalEditorToSlickGridFactoryEditor(this._columnDefinitions),this.gridOptions.autoAddCustomEditorFormatter&&Object(p.a)(this._columnDefinitions,this.gridOptions.autoAddCustomEditorFormatter),this.sharedService.allColumns=this._columnDefinitions,this.sharedService.visibleColumns=this._columnDefinitions,this.extensionService.createExtensionsBeforeGridCreation(this._columnDefinitions,this.gridOptions),(null===(h=this.gridOptions.presets)||void 0===h?void 0:h.pinning)&&(this.gridOptions=Object.assign(Object.assign({},this.gridOptions),this.gridOptions.presets.pinning)),this.grid=new Slick.Grid("#"+this.gridId,this.customDataView||this.dataview,this._columnDefinitions,this.gridOptions),this.sharedService.dataView=this.dataview,this.sharedService.slickGrid=this.grid,this.extensionService.bindDifferentExtensions(),this.bindDifferentHooks(this.grid,this.gridOptions,this.dataview);const O=null!==(f=null===(g=this.gridOptions)||void 0===g?void 0:g.frozenColumn)&&void 0!==f?f:-1;O>=0&&O<=this._columnDefinitions.length&&this._columnDefinitions.length>0&&(this.sharedService.frozenVisibleColumnId=null!==(m=null===(v=this._columnDefinitions[O])||void 0===v?void 0:v.id)&&void 0!==m?m:""),this.registerResources(),this.grid.init();const R=this.elm.querySelector("div");if(R&&this.resizerService.init(this.grid,R),!this.gridOptions.enablePagination&&this.gridOptions.showCustomFooter&&this.gridOptions.customFooterOptions&&R&&(this.slickFooter=new o.a(this.grid,this.gridOptions.customFooterOptions,this.translaterService),this.slickFooter.renderFooter(R)),!this.customDataView&&this.dataview){const e=(null===(S=this.gridOptions)||void 0===S?void 0:S.enableTreeData)?this.sortTreeDataset(this.dataset):this.dataset;Array.isArray(e)&&this.dataview.setItems(e,this.gridOptions.datasetIdPropertyName);if((null===(y=null===(b=this.grid)||void 0===b?void 0:b.getSelectionModel)||void 0===y?void 0:y.call(b))&&(null===(w=this.gridOptions)||void 0===w?void 0:w.dataView)&&this.gridOptions.dataView.hasOwnProperty("syncGridSelection")){let e=!1;this.gridOptions.backendServiceApi&&this.gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(e=this.gridOptions.dataView.syncGridSelectionWithBackendService);const t=this.gridOptions.dataView.syncGridSelection;if("boolean"==typeof t){let i=t;this._isLocalGrid||(i=t&&e),this.dataview.syncGridSelection(this.grid,i)}else"object"==typeof t&&this.dataview.syncGridSelection(this.grid,t.preserveHidden,t.preserveHiddenOnSelectionChange)}this._dataset.length>0&&(this._isDatasetInitialized||!this.gridOptions.enableCheckboxSelector&&!this.gridOptions.enableRowSelection||this.loadRowSelectionPresetWhenExists(),this.loadFilterPresetsWhenDatasetInitialized(),this._isDatasetInitialized=!0)}this._hideHeaderRowAfterPageLoad&&(this.showHeaderRow(!1),this.sharedService.hideHeaderRowAfterPageLoad=this._hideHeaderRowAfterPageLoad),this.pubSubService.dispatchCustomEvent(this.elm,"onGridCreated",this.grid,T),this.customDataView||this.executeAfterDataviewCreated(this.grid,this.gridOptions),this.bindResizeHook(this.grid,this.gridOptions),(null===(E=this.gridOptions)||void 0===E?void 0:E.backendServiceApi)&&this.bindBackendCallbackFunctions(this.gridOptions);const I={dataView:this.dataview,slickGrid:this.grid,dispose:this.dispose.bind(this),backendService:null===(_=null===(C=this.gridOptions)||void 0===C?void 0:C.backendServiceApi)||void 0===_?void 0:_.service,filterService:this.filterService,gridEventService:this.gridEventService,gridStateService:this.gridStateService,gridService:this.gridService,groupingService:this.groupingService,extensionService:this.extensionService,paginationService:this.paginationService,resizerService:this.resizerService,sortService:this.sortService,treeDataService:this.treeDataService};for(const e of c.a.exposedEvents)e&&this.subscriptions.push(this.pubSubService.subscribe(e,t=>this.pubSubService.dispatchCustomEvent(this.elm,e,t,T)));this.extensions=this.extensionService&&this.extensionService.extensionList,this.instances=I,this.pubSubService.dispatchCustomEvent(this.elm,"onAureliaGridCreated",I,T)}detached(e=!1){var t,i,n,r,o;const s=null!==(i=null===(t=this.gridOptions)||void 0===t?void 0:t.defaultAureliaEventPrefix)&&void 0!==i?i:"";if(this.pubSubService.dispatchCustomEvent(this.elm,"onBeforeGridDestroy",this.grid,s),null===(n=this._eventHandler)||void 0===n||n.unsubscribeAll(),e&&this.emptyGridContainerElm(),this.pubSubService.dispatchCustomEvent(this.elm,"onAfterGridDestroyed",!0,s),this.serviceList.forEach(e=>{e&&e.dispose&&e.dispose()}),this.serviceList=[],Array.isArray(this._registeredResources)){for(;this._registeredResources.length>0;){const e=this._registeredResources.pop();(null==e?void 0:e.dispose)&&e.dispose()}this._registeredResources=[]}if(null===(r=this.slickFooter)||void 0===r||r.dispose(),this.dataview&&(this.dataview.setItems&&this.dataview.setItems([]),this.dataview.destroy&&this.dataview.destroy()),(null===(o=this.grid)||void 0===o?void 0:o.destroy)&&this.grid.destroy(e),this.subscriptions=Object(d.e)(this.subscriptions),this.backendServiceApi){for(const e of Object.keys(this.backendServiceApi))this.backendServiceApi[e]=null;this.backendServiceApi=void 0}for(const e of Object.keys(this.columnDefinitions))this.columnDefinitions[e]=null;for(const e of Object.keys(this.sharedService))this.sharedService[e]=null;this._dataset=null,this.datasetHierarchical=null,this._columnDefinitions=[]}emptyGridContainerElm(){var e,t;const i=null!==(t=null===(e=this.gridOptions)||void 0===e?void 0:e.gridContainerId)&&void 0!==t?t:"grid1",n=document.querySelector("#"+i);Object(r.Dc)(n)}dispose(e=!1){this.detached(e)}bind(){this.gridOptions=Object.assign(Object.assign({},u.a),this.gridOptions),this._columnDefinitions=this.columnDefinitions,this.subscriptions.push(this.bindingEngine.collectionObserver(this.columnDefinitions).subscribe(this.columnDefinitionsChanged.bind(this)))}columnDefinitionsChanged(){this._columnDefinitions=this.columnDefinitions,this._isGridInitialized&&this.updateColumnDefinitionsList(this.columnDefinitions),this._columnDefinitions.length>0&&this.copyColumnWidthsReference(this._columnDefinitions)}commitEdit(e){if(this.grid.getOptions().autoCommitEdit){const t=this.grid.getActiveCellNode();setTimeout(()=>{var i;t&&t.contains(e)&&this.grid.getEditorLock().isActive()&&!(null===(i=null==e?void 0:e.classList)||void 0===i?void 0:i.contains("autocomplete"))&&this.grid.getEditorLock().commitCurrentEdit()})}}datasetChanged(e,t){var i;const n=this._currentDatasetLength;let r=e;this.grid&&(null===(i=this.gridOptions)||void 0===i?void 0:i.enableTreeData)&&Array.isArray(e)&&(e.length>0||e.length!==n)&&(this._isDatasetHierarchicalInitialized=!1,r=this.sortTreeDataset(e)),this._dataset=r,this.refreshGridData(r||[]),this._currentDatasetLength=(e||[]).length,this.gridOptions.autoFitColumnsOnFirstLoad&&(!t||t.length<1)&&this.grid.autosizeColumns()}datasetHierarchicalChanged(e){var t,i;const n=this._currentDatasetLength;this.sharedService.hierarchicalDataset=e,e&&this.columnDefinitions&&(null===(t=this.filterService)||void 0===t?void 0:t.clearFilters)&&this.filterService.clearFilters(),e&&this.grid&&(null===(i=this.sortService)||void 0===i?void 0:i.processTreeDataInitialSort)&&(this.dataview.setItems([],this.gridOptions.datasetIdPropertyName),this.sortService.processTreeDataInitialSort(),setTimeout(()=>{const e=this.dataview.getItemCount();e!==n&&e>0&&this.filterService.refreshTreeDataFilters()})),this._isDatasetHierarchicalInitialized=!0}createBackendApiInternalPostProcessCallback(e){const t=e&&e.backendServiceApi;if(t&&t.service){const e=t.service;"function"==typeof e.getDatasetName&&(t.internalPostProcess=i=>{const n=t&&e&&"function"==typeof e.getDatasetName?e.getDatasetName():"";if(null==i?void 0:i.data[n]){const e=i.data[n].hasOwnProperty("nodes")?i.data[n].nodes:i.data[n],t=i.data[n].hasOwnProperty("totalCount")?i.data[n].totalCount:i.data[n].length;this.refreshGridData(e,t||0)}})}}bindDifferentHooks(e,t,i){if(t.enableTranslate&&(this.translateColumnHeaderTitleKeys(),this.translateColumnGroupKeys(),this.translateCustomFooterTexts()),this.subscriptions.push(this.globalEa.subscribe("i18n:locale:changed",()=>{t.enableTranslate&&(this.extensionService.translateCellMenu(),this.extensionService.translateColumnHeaders(),this.extensionService.translateColumnPicker(),this.extensionService.translateContextMenu(),this.extensionService.translateGridMenu(),this.extensionService.translateHeaderMenu(),this.translateCustomFooterTexts(),this.translateColumnHeaderTitleKeys(),this.translateColumnGroupKeys(),t.createPreHeaderPanel&&!t.enableDraggableGrouping&&this.groupingService.translateGroupingAndColSpan())})),this.customDataView||(t.enableSorting&&(t.backendServiceApi&&!t.backendServiceApi.useLocalSorting?this.sortService.bindBackendOnSort(e):this.sortService.bindLocalOnSort(e)),t.enableFiltering&&(this.filterService.init(e),t.backendServiceApi&&!t.backendServiceApi.useLocalFiltering?this.filterService.bindBackendOnFilter(e):this.filterService.bindLocalOnFilter(e)),this.loadColumnPresetsWhenDatasetInitialized(),this.loadFilterPresetsWhenDatasetInitialized()),t.backendServiceApi){const e=t.backendServiceApi;e&&e.service&&e.service.init&&e.service.init(e.options,t.pagination,this.grid,this.sharedService)}if(i&&e){for(const t in e)if(e.hasOwnProperty(t)&&t.startsWith("on")){const i=e[t];this._eventHandler.subscribe(i,(e,i)=>{var n,r;const o=null!==(r=null===(n=this.gridOptions)||void 0===n?void 0:n.defaultSlickgridEventPrefix)&&void 0!==r?r:"";return this.pubSubService.dispatchCustomEvent(this.elm,t,{eventData:e,args:i},o)})}for(const e in i)if(i.hasOwnProperty(e)&&e.startsWith("on")){const t=i[e];this._eventHandler.subscribe(t,(t,i)=>{var n,r;const o=null!==(r=null===(n=this.gridOptions)||void 0===n?void 0:n.defaultSlickgridEventPrefix)&&void 0!==r?r:"";return this.pubSubService.dispatchCustomEvent(this.elm,e,{eventData:t,args:i},o)})}if(this.gridEventService.bindOnBeforeEditCell(e),this.gridEventService.bindOnCellChange(e),this.gridEventService.bindOnClick(e),i&&e){const n=i.onRowCountChanged;this._eventHandler.subscribe(n,(t,n)=>{e.invalidate(),this.handleOnItemCountChanged(n.current||0,i.getItemCount())});const r=i.onSetItemsCalled;this._eventHandler.subscribe(r,(e,t)=>{var n;this.handleOnItemCountChanged(i.getLength(),t.itemCount),t.itemCount>0&&(this.gridOptions.autosizeColumnsByCellContentOnFirstLoad||this.gridOptions.enableAutoResizeColumnsByCellContent)&&this.resizerService.resizeColumnsByCellContent(!(null===(n=this.gridOptions)||void 0===n?void 0:n.resizeByContentOnlyOnFirstLoad))});const o=i.onRowsChanged;this._eventHandler.subscribe(o,(i,n)=>{t&&t.enableFiltering&&!t.enableRowDetailView&&(null==n?void 0:n.rows)&&Array.isArray(n.rows)&&(n.rows.forEach(t=>e.updateRow(t)),e.render())})}}(null==t?void 0:t.colspanCallback)&&(null==i?void 0:i.getItem)&&(null==i?void 0:i.getItemMetadata)&&(i.getItemMetadata=e=>{let n=null;return t.colspanCallback&&(n=t.colspanCallback(i.getItem(e))),n})}bindBackendCallbackFunctions(t){var i,n,r,o;const s=t.backendServiceApi,a=s&&s.service,l=a&&a.options||{},c=!!l&&(!l||!l.hasOwnProperty("executeProcessCommandOnInit")||l.executeProcessCommandOnInit);if(a){if(t&&t.presets){if(a.updateFilters&&Array.isArray(t.presets.filters)&&t.presets.filters.length>0&&a.updateFilters(t.presets.filters,!0),a.updateSorters&&Array.isArray(t.presets.sorters)&&t.presets.sorters.length>0){const e=this.gridOptions.multiColumnSort?t.presets.sorters:t.presets.sorters.slice(0,1);a.updateSorters(void 0,e)}if(a.updatePagination&&t.presets.pagination){const{pageNumber:e,pageSize:i}=t.presets.pagination;a.updatePagination(e,i)}}else{const e=this.filterService.getColumnFilters();e&&a.updateFilters&&a.updateFilters(e,!1)}if(s&&a&&(s.onInit||c)){const t="function"==typeof a.buildQuery?a.buildQuery():"",l=c?null!==(n=null===(i=s.process)||void 0===i?void 0:i.call(s,t))&&void 0!==n?n:null:null!==(o=null===(r=s.onInit)||void 0===r?void 0:r.call(s,t))&&void 0!==o?o:null;setTimeout(()=>{var t,i,n,r;const o=this.backendUtilityService,a=new Date;s.preProcess&&s.preProcess();const c=null!==(n=null===(i=null===(t=this.gridOptions)||void 0===t?void 0:t.pagination)||void 0===i?void 0:i.totalItems)&&void 0!==n?n:0;l instanceof e?l.then(e=>o.executeBackendProcessesCallback(a,e,s,c)).catch(e=>o.onBackendError(e,s)):l&&(null===(r=this.rxjs)||void 0===r?void 0:r.isObservable(l))&&this.subscriptions.push(l.subscribe(e=>o.executeBackendProcessesCallback(a,e,s,c),e=>o.onBackendError(e,s)))})}}}bindResizeHook(e,t){if(t.autoFitColumnsOnFirstLoad&&t.autosizeColumnsByCellContentOnFirstLoad||t.enableAutoSizeColumns&&t.enableAutoResizeColumnsByCellContent)throw new Error('[Aurelia-Slickgrid] You cannot enable both autosize/fit viewport & resize by content, you must choose which resize technique to use. You can enable these 2 options ("autoFitColumnsOnFirstLoad" and "enableAutoSizeColumns") OR these other 2 options ("autosizeColumnsByCellContentOnFirstLoad" and "enableAutoResizeColumnsByCellContent").');e&&t.autoFitColumnsOnFirstLoad&&t.enableAutoSizeColumns&&"function"==typeof e.autosizeColumns&&this.grid.autosizeColumns(),t.gridHeight||t.gridWidth?this.resizerService.resizeGrid(0,{height:t.gridHeight,width:t.gridWidth}):this.resizerService.resizeGrid(),e&&(null==t?void 0:t.enableAutoResize)&&t.autoFitColumnsOnFirstLoad&&t.enableAutoSizeColumns&&"function"==typeof e.autosizeColumns&&e.autosizeColumns()}executeAfterDataviewCreated(e,t){if(t.enableSorting&&t.presets&&Array.isArray(t.presets.sorters)){const e=this.gridOptions.multiColumnSort?t.presets.sorters:t.presets.sorters.slice(0,1);this.sortService.loadGridSorters(e)}}paginationChanged(e){var t,i;null!==(i=null===(t=this.gridStateService)||void 0===t?void 0:t.needToPreserveRowSelection())&&void 0!==i&&i||!this.gridOptions.enableRowSelection&&!this.gridOptions.enableCheckboxSelector||this.grid.setSelectedRows([]);const{pageNumber:n,pageSize:o}=e;this.sharedService&&void 0!==o&&void 0!==n&&(this.sharedService.currentPagination={pageNumber:n,pageSize:o}),this.pubSubService.publish("onGridStateChanged",{change:{newValues:{pageNumber:n,pageSize:o},type:r.bb.pagination},gridState:this.gridStateService.getCurrentGridState()})}paginationOptionsChanged(e){var t;e&&this._paginationOptions?this._paginationOptions=Object.assign(Object.assign({},this._paginationOptions),e):this._paginationOptions=e,this.gridOptions.pagination=this._paginationOptions,this.paginationService.updateTotalItems(null!==(t=null==e?void 0:e.totalItems)&&void 0!==t?t:0,!0)}refreshGridData(e,t){var i,n,r,o,s,a,l;if((null===(i=this.gridOptions)||void 0===i?void 0:i.enablePagination)&&this._isLocalGrid&&(this.showPagination=!0,this.loadLocalGridPagination(e)),(null===(n=this.gridOptions)||void 0===n?void 0:n.enableEmptyDataWarningMessage)&&Array.isArray(e)){const i=t||e.length;this.displayEmptyDataWarning(i<1)}if(Array.isArray(e)&&this.grid&&(null===(r=this.dataview)||void 0===r?void 0:r.setItems)){if(this.dataview.setItems(e,this.gridOptions.datasetIdPropertyName),this.gridOptions.backendServiceApi||this.gridOptions.enableTreeData||this.dataview.reSort(),e.length>0&&(this._isDatasetInitialized||(this.loadFilterPresetsWhenDatasetInitialized(),this.gridOptions.enableCheckboxSelector&&this.loadRowSelectionPresetWhenExists()),this._isDatasetInitialized=!0),e&&this.grid.invalidate(),this.showPagination=!(!this.gridOptions||!(this.gridOptions.enablePagination||this.gridOptions.backendServiceApi&&void 0===this.gridOptions.enablePagination)),this._paginationOptions&&(null===(o=this.gridOptions)||void 0===o?void 0:o.pagination)&&(null===(s=this.gridOptions)||void 0===s?void 0:s.backendServiceApi)){const e=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this._paginationOptions),i=void 0!==t?t:null===(l=null===(a=this.gridOptions)||void 0===a?void 0:a.pagination)||void 0===l?void 0:l.totalItems;void 0!==i&&i!==this.totalItems&&(this.totalItems=+i),this._isPaginationInitialized?this.paginationService.updateTotalItems(this.totalItems):this.initializePaginationService(e)}if(this.grid&&this.gridOptions.enableAutoResize){const e=this.gridOptions.autoResize&&this.gridOptions.autoResize.delay;this.resizerService.resizeGrid(e||10)}}}showHeaderRow(e=!0){return this.grid.setHeaderRowVisibility(e,!1),!0===e&&this._isGridInitialized&&this.grid.setColumns(this.columnDefinitions),e}setPaginationOptionsWhenPresetDefined(e,t){return e.presets&&e.presets.pagination&&e.pagination&&(t.pageSize=e.presets.pagination.pageSize,t.pageNumber=e.presets.pagination.pageNumber),t}updateColumnDefinitionsList(e){var t,i,n;e&&(e=this.swapInternalEditorToSlickGridFactoryEditor(e),this.gridOptions.autoAddCustomEditorFormatter&&Object(p.a)(e,this.gridOptions.autoAddCustomEditorFormatter),this.gridOptions.enableTranslate?this.extensionService.translateColumnHeaders(!1,e):this.extensionService.renderColumnHeaders(e,!0),(null===(t=this.gridOptions)||void 0===t?void 0:t.enableAutoSizeColumns)?this.grid.autosizeColumns():(null===(i=this.gridOptions)||void 0===i?void 0:i.enableAutoResizeColumnsByCellContent)&&(null===(n=this.resizerService)||void 0===n?void 0:n.resizeColumnsByCellContent)&&this.resizerService.resizeColumnsByCellContent())}copyColumnWidthsReference(e){e.forEach(e=>e.originalWidth=e.width)}displayEmptyDataWarning(e=!0){var t;null===(t=this.slickEmptyWarning)||void 0===t||t.showEmptyDataMessage(e)}handleOnItemCountChanged(e,t){var i;this._currentDatasetLength=t,this.metrics={startTime:new Date,endTime:new Date,itemCount:e,totalItemCount:t},this.slickFooter&&(this.slickFooter.metrics=this.metrics),this._isLocalGrid&&(null===(i=this.gridOptions)||void 0===i?void 0:i.enableEmptyDataWarningMessage)&&this.displayEmptyDataWarning(0===e)}initializePaginationService(e){this.gridOptions&&(this.paginationData={gridOptions:this.gridOptions,paginationService:this.paginationService},this.paginationService.totalItems=this.totalItems,this.paginationService.init(this.grid,e,this.backendServiceApi),this.subscriptions.push(this.pubSubService.subscribe("onPaginationChanged",e=>this.paginationChanged(e)),this.pubSubService.subscribe("onPaginationVisibilityChanged",e=>{var t,i,n;this.showPagination=null!==(t=null==e?void 0:e.visible)&&void 0!==t&&t,(null===(i=this.gridOptions)||void 0===i?void 0:i.backendServiceApi)&&(null===(n=this.backendUtilityService)||void 0===n||n.refreshBackendDataset(this.gridOptions))})),this._isPaginationInitialized=!0)}loadEditorCollectionAsync(t){var i;const n=(null==t?void 0:t.editor).collectionAsync;(null==t?void 0:t.editor).disabled=!0,n instanceof e?n.then(e=>{Array.isArray(e)?this.updateEditorCollection(t,e):e instanceof Response&&"function"==typeof e.json?e.bodyUsed?console.warn("[Aurelia-SlickGrid] The response body passed to collectionAsync was already read.Either pass the dataset from the Response or clone the response first using response.clone()"):e.json().then(e=>this.updateEditorCollection(t,e)):e&&e.content&&this.updateEditorCollection(t,e.content)}):(null===(i=this.rxjs)||void 0===i?void 0:i.isObservable(n))&&setTimeout(()=>{this.subscriptions.push(n.subscribe(e=>this.updateEditorCollection(t,e)))})}loadColumnPresetsWhenDatasetInitialized(){if(this.gridOptions.presets&&Array.isArray(this.gridOptions.presets.columns)&&this.gridOptions.presets.columns.length>0){const e=this.gridStateService.getAssociatedGridColumns(this.grid,this.gridOptions.presets.columns);if(e&&Array.isArray(e)&&e.length>0){if(this.gridOptions.enableCheckboxSelector){const t=Array.isArray(this._columnDefinitions)&&this._columnDefinitions.length>0?this._columnDefinitions[0]:null;t&&"_checkbox_selector"===t.id&&"_checkbox_selector"!==e[0].id&&e.unshift(t)}e.forEach(e=>e.originalWidth=e.width),this.grid.setColumns(e),this.sharedService.visibleColumns=e}}}loadFilterPresetsWhenDatasetInitialized(){this.gridOptions&&!this.customDataView&&this.gridOptions.presets&&Array.isArray(this.gridOptions.presets.filters)&&this.filterService.populateColumnFilterSearchTermPresets(this.gridOptions.presets.filters)}loadLocalGridPagination(e){var t;if(this.gridOptions&&this._paginationOptions){if(this.totalItems=Array.isArray(e)?e.length:0,this._paginationOptions&&(null===(t=this.dataview)||void 0===t?void 0:t.getPagingInfo)){const e=this.dataview.getPagingInfo();(null==e?void 0:e.hasOwnProperty("totalRows"))&&this._paginationOptions.totalItems!==e.totalRows&&(this.totalItems=e.totalRows||0)}this._paginationOptions.totalItems=this.totalItems;const i=this.setPaginationOptionsWhenPresetDefined(this.gridOptions,this._paginationOptions);this.initializePaginationService(i)}}loadRowSelectionPresetWhenExists(){var e,t,i;const n=null===(e=this.gridOptions)||void 0===e?void 0:e.presets,r=null===(i=null===(t=this.grid)||void 0===t?void 0:t.getSelectionModel)||void 0===i?void 0:i.call(t);if(this.gridOptions&&(this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&r&&n&&n.rowSelection&&(Array.isArray(n.rowSelection.gridRowIndexes)||Array.isArray(n.rowSelection.dataContextIds))){let e=n.rowSelection.dataContextIds,t=n.rowSelection.gridRowIndexes;Array.isArray(e)&&e.length>0?t=this.dataview.mapIdsToRows(e)||[]:Array.isArray(t)&&t.length>0&&(e=this.dataview.mapRowsToIds(t)||[]),this.gridStateService.selectedRowDataContextIds=e,(this._isLocalGrid&&!this.gridOptions.enablePagination||!this._isLocalGrid)&&setTimeout(()=>{this.grid&&Array.isArray(t)&&this.grid.setSelectedRows(t)})}}mergeGridOptions(e){e.gridId=this.gridId,e.gridContainerId="slickGridContainer-"+this.gridId,e.enablePagination=!(!e.backendServiceApi||void 0!==e.enablePagination)||e.enablePagination||!1;const t=n.extend(!0,{},u.a,e);return(null==t?void 0:t.pagination)&&(e.enablePagination||e.backendServiceApi)&&e.pagination&&Array.isArray(e.pagination.pageSizes)&&(t.pagination.pageSizes=e.pagination.pageSizes),this._hideHeaderRowAfterPageLoad=!1===t.showHeaderRow,t.enableFiltering&&!t.showHeaderRow&&(t.showHeaderRow=t.enableFiltering),t&&!t.enableFiltering&&t.enablePagination&&this._isLocalGrid&&(t.enableFiltering=!0,t.showHeaderRow=!1,this._hideHeaderRowAfterPageLoad=!0,this.sharedService&&(this.sharedService.hideHeaderRowAfterPageLoad=!0)),t}preRegisterResources(){if(this._registeredResources=this.gridOptions.registerExternalResources||[],Array.isArray(this._registeredResources))for(const e of this._registeredResources)"RxJsResource"===(null==e?void 0:e.className)&&this.registerRxJsResource(e)}registerResources(){if(Array.isArray(this._registeredResources)&&(this.sharedService.externalRegisteredResources=this._registeredResources),this._registeredResources.push(this.gridService,this.gridStateService),this.gridOptions.createPreHeaderPanel&&!this.gridOptions.enableDraggableGrouping&&this._registeredResources.push(this.groupingService),this.gridOptions.enableTreeData&&this._registeredResources.push(this.treeDataService),this.gridOptions.enableTranslate&&this.extensionService.translateColumnHeaders(),this.slickEmptyWarning=new s.a,this._registeredResources.push(this.slickEmptyWarning),Array.isArray(this._registeredResources))for(const e of this._registeredResources)"function"==typeof e.init&&e.init(this.grid,this.containerService)}registerRxJsResource(e){this.rxjs=e,this.backendUtilityService.addRxJsResource(this.rxjs),this.filterFactory.addRxJsResource(this.rxjs),this.filterService.addRxJsResource(this.rxjs),this.sortService.addRxJsResource(this.rxjs),this.paginationService.addRxJsResource(this.rxjs),this.containerService.registerInstance("RxJsResource",this.rxjs)}sortTreeDataset(e){var t,i;const n=this._currentDatasetLength;let r,o=[];return this._isDatasetHierarchicalInitialized&&this.datasetHierarchical?(r=this.treeDataService.sortHierarchicalDataset(this.datasetHierarchical),o=r.flat):Array.isArray(e)&&e.length>0&&((null===(i=null===(t=this.gridOptions)||void 0===t?void 0:t.treeDataOptions)||void 0===i?void 0:i.initialSort)?(r=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(e,this._columnDefinitions,this.gridOptions),this.sharedService.hierarchicalDataset=r.hierarchical,o=r.flat):(this.sharedService.hierarchicalDataset=this.treeDataService.convertFlatParentChildToTreeDataset(e,this.gridOptions),o=e||[])),e.length>0&&e.length!==n&&this.filterService.refreshTreeDataFilters(o),o}swapInternalEditorToSlickGridFactoryEditor(e){return e.some(e=>(""+e.id).includes("."))&&console.error('[Aurelia-Slickgrid] Make sure that none of your Column Definition "id" property includes a dot in its name because that will cause some problems with the Editors. For example if your column definition "field" property is "user.firstName" then use "firstName" as the column "id".'),e.map(e=>(e.editor&&e.editor.collectionAsync&&this.loadEditorCollectionAsync(e),Object.assign(Object.assign({},e),{editor:e.editor&&a.e.of(e.editor.model).get(this.container),internalColumnEditor:Object.assign({},e.editor)})))}translateCustomFooterTexts(){var e,t;this.slickFooter&&(null===(e=this.translaterService)||void 0===e?void 0:e.translate)&&(null===(t=this.slickFooter)||void 0===t||t.translateCustomFooterTexts())}translateColumnHeaderTitleKeys(){this.extensionUtility.translateItems(this.sharedService.allColumns,"nameKey","name")}translateColumnGroupKeys(){this.extensionUtility.translateItems(this.sharedService.allColumns,"columnGroupKey","columnGroup")}updateEditorCollection(e,t){e.editor.collection=t,e.editor.disabled=!1;const i=this.grid.getColumns();if(Array.isArray(i)){const t=i.find(t=>t.id===e.id);t&&(t.internalColumnEditor=e.editor)}const n=this.grid.getCellEditor();(null==n?void 0:n.disable)&&(null==n?void 0:n.renderDomElement)&&(n.destroy(),n.disable(!1),n.renderDomElement(t))}};g([Object(a.l)({defaultBindingMode:a.m.twoWay})],f.prototype,"columnDefinitions",void 0),g([Object(a.l)({defaultBindingMode:a.m.twoWay})],f.prototype,"element",void 0),g([Object(a.l)({defaultBindingMode:a.m.twoWay})],f.prototype,"dataview",void 0),g([Object(a.l)({defaultBindingMode:a.m.twoWay})],f.prototype,"grid",void 0),g([Object(a.l)({defaultBindingMode:a.m.twoWay})],f.prototype,"paginationOptions",void 0),g([Object(a.l)({defaultBindingMode:a.m.twoWay})],f.prototype,"totalItems",void 0),g([Object(a.l)({defaultBindingMode:a.m.fromView})],f.prototype,"extensions",void 0),g([Object(a.l)({defaultBindingMode:a.m.fromView})],f.prototype,"instances",void 0),g([Object(a.l)()],f.prototype,"customDataView",void 0),g([Object(a.l)()],f.prototype,"dataset",void 0),g([Object(a.l)()],f.prototype,"datasetHierarchical",void 0),g([Object(a.l)()],f.prototype,"gridId",void 0),g([Object(a.l)()],f.prototype,"gridOptions",void 0),f=g([Object(a.o)(d.a,a.b,a.c,Element,l.a,d.b,d.c,d.d)],f)}.call(this,i("CW7D"))},"aurelia-slickgrid/custom-elements/aurelia-slickgrid.html":function(e,t){e.exports='<template> <div id="slickGridContainer-${gridId}" class="grid-pane"> <slot name="slickgrid-header"></slot> <div id.bind="gridId" class="slickgrid-container" style="width:100%" focusout.delegate="commitEdit($event.target)"> </div> <slick-pagination id="slickPagingContainer-${gridId}" if.bind="showPagination" grid-options.bind="gridOptions" pagination-service.bind="paginationService"> </slick-pagination> <slot name="slickgrid-footer"></slot> </div> </template> '},"aurelia-slickgrid/custom-elements/slick-pagination":function(e,t,i){"use strict";i.r(t),i.d(t,"SlickPaginationCustomElement",(function(){return u}));var n=i("aurelia-framework"),r=i("aurelia-event-aggregator"),o=i("fj9p"),s=i("eyxJ"),a=i("dbac"),l=i("cgQs"),c=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let u=class{constructor(e,t){this.globalEa=e,this.translateService=t,this._enableTranslate=!1,this._subscriptions=[],this.textItemsPerPage="items per page",this.textItems="items",this.textOf="of",this.textPage="Page"}get availablePageSizes(){return this.paginationService.availablePageSizes}get dataFrom(){return this.paginationService.dataFrom}get dataTo(){return this.paginationService.dataTo}get isLeftPaginationDisabled(){return 1===this.pageNumber||0===this.totalItems}get isRightPaginationDisabled(){return this.pageNumber===this.pageCount||0===this.totalItems}get itemsPerPage(){return this.paginationService.itemsPerPage}set itemsPerPage(e){this.paginationService.changeItemPerPage(e)}get pageCount(){return this.paginationService.pageCount}get pageNumber(){return this.paginationService.pageNumber}set pageNumber(e){}get totalItems(){return this.paginationService.totalItems}bind(e){if(this._gridOptions=this.gridOptions||e&&e.gridOptions||{},this._enableTranslate=this._gridOptions&&this._gridOptions.enableTranslate||!1,this._locales=this._gridOptions&&this._gridOptions.locales||a.a.locales,this._enableTranslate&&(!this.translateService||!this.translateService.translate))throw new Error('[Aurelia-Slickgrid] requires "I18N" to be installed and configured when the grid option "enableTranslate" is enabled.');this.translatePaginationTexts(this._locales),this._enableTranslate&&this.globalEa&&this.globalEa.subscribe&&this._subscriptions.push(this.globalEa.subscribe("i18n:locale:changed",()=>this.translatePaginationTexts(this._locales)))}detached(){this.dispose()}changeToFirstPage(e){this.isLeftPaginationDisabled||this.paginationService.goToFirstPage(e)}changeToLastPage(e){this.isRightPaginationDisabled||this.paginationService.goToLastPage(e)}changeToNextPage(e){this.isRightPaginationDisabled||this.paginationService.goToNextPage(e)}changeToPreviousPage(e){this.isLeftPaginationDisabled||this.paginationService.goToPreviousPage(e)}changeToCurrentPage(e){let t=1;e&&e.target&&e.target.value&&(t=+e.target.value),this.paginationService.goToPageNumber(t,e)}dispose(){this.paginationService.dispose(),this._subscriptions=Object(s.a)(this._subscriptions)}translatePaginationTexts(e){var t;if(this._enableTranslate&&(null===(t=this.translateService)||void 0===t?void 0:t.translate)){const e=Object(o.ad)(this._gridOptions);this.textItemsPerPage=this.translateService.translate(e+"ITEMS_PER_PAGE"),this.textItems=this.translateService.translate(e+"ITEMS"),this.textOf=this.translateService.translate(e+"OF"),this.textPage=this.translateService.translate(e+"PAGE")}else e&&(this.textItemsPerPage=e.TEXT_ITEMS_PER_PAGE||"TEXT_ITEMS_PER_PAGE",this.textItems=e.TEXT_ITEMS||"TEXT_ITEMS",this.textOf=e.TEXT_OF||"TEXT_OF",this.textPage=e.TEXT_PAGE||"TEXT_PAGE")}};c([Object(n.l)()],u.prototype,"paginationService",void 0),c([Object(n.l)()],u.prototype,"gridOptions",void 0),u=c([Object(n.o)(r.a,n.g.of(l.a))],u)},"aurelia-slickgrid/custom-elements/slick-pagination.html":function(e,t){e.exports='<template> <div id="pager" style="width:100%"> <div class="slick-pagination"> <div class="slick-pagination-nav"> <nav aria-label="Page navigation"> <ul class="pagination"> <li class="page-item" class.bind="isLeftPaginationDisabled ? \'disabled\' : \'\'"> <a class="page-link icon-seek-first fa fa-angle-double-left" href="" aria-label="First" click.delegate="changeToFirstPage($event)"> </a> </li> <li class="page-item" class.bind="isLeftPaginationDisabled ? \'disabled\' : \'\'"> <a class="page-link icon-seek-prev fa fa-angle-left" href="" aria-label="Previous" click.delegate="changeToPreviousPage($event)"> </a> </li> </ul> </nav> <div class="slick-page-number"> <span>${textPage}</span> <input type="text" class="form-control" data-test="page-number-input" value.bind="pageNumber | asgNumber" size="1" readonly.bind="totalItems === 0" change.delegate="changeToCurrentPage($event)"> <span>${textOf}</span> <span data-test="page-count"> ${pageCount}</span> </div> <nav aria-label="Page navigation"> <ul class="pagination"> <li class="page-item" class.bind="(pageNumber === pageCount || totalItems === 0) ? \'disabled\' : \'\'"> <a class="page-link icon-seek-next fa fa-angle-right" href="" aria-label="Next" click.delegate="changeToNextPage($event)"> </a> </li> <li class="page-item" class.bind="(pageNumber === pageCount || totalItems === 0) ? \'disabled\' : \'\'"> <a class="page-link icon-seek-end fa fa-angle-double-right" href="" aria-label="Last" click.delegate="changeToLastPage($event)"> </a> </li> </ul> </nav> </div> <span class="slick-pagination-settings"> <select id="items-per-page-label" value.bind="itemsPerPage | asgNumber"> <option value="${pageSize}" repeat.for="pageSize of availablePageSizes" model.bind="pageSize"> ${pageSize}</option> </select> <span>${textItemsPerPage}</span>, <span class="slick-pagination-count"> <span if.bind="totalItems"> <span class="page-info-from-to"> <span data-test="item-from">${dataFrom}</span>-<span data-test="item-to">${dataTo}</span> ${textOf} </span> </span> <span class="page-info-total-items"> <span data-test="total-items">${totalItems}</span> ${textItems} </span> </span> </span> </div> </div> </template> '},"aurelia-slickgrid/value-converters/asgDateFormat":function(e,t,i){"use strict";i.r(t),i.d(t,"AsgDateFormatValueConverter",(function(){return r}));var n=i("sjEL");class r{toView(e,t){return n(e).format(t)}}},"aurelia-slickgrid/value-converters/asgNumber":function(e,t,i){"use strict";i.r(t),i.d(t,"AsgNumberValueConverter",(function(){return n}));class n{fromView(e){const t=parseFloat(e);return isNaN(t)?e:t}}},cgQs:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("aurelia-framework"),r=i("aurelia-i18n"),o=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let s=class{constructor(e){this.i18n=e}getCurrentLanguage(){return this.i18n.getLocale()}async use(e){return this.i18n.setLocale(e)}translate(e){return this.i18n.tr(e)}};s=o([Object(n.o)(r.I18N)],s)},dbac:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));class n{}n.locales={TEXT_ALL_SELECTED:"All Selected",TEXT_ALL_X_RECORDS_SELECTED:"All {{x}} records selected",TEXT_APPLY_MASS_UPDATE:"Apply Mass Update",TEXT_APPLY_TO_SELECTION:"Update Selection",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_CLEAR_PINNING:"Unfreeze Columns/Rows",TEXT_CLONE:"Clone",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COLUMN_RESIZE_BY_CONTENT:"Resize by Content",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_EQUALS:"Equals",TEXT_EQUAL_TO:"Equal to",TEXT_ENDS_WITH:"Ends With",TEXT_ERROR_EDITABLE_GRID_REQUIRED:"Your grid must be editable in order to use the Composite Editor Modal.",TEXT_ERROR_ENABLE_CELL_NAVIGATION_REQUIRED:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.',TEXT_ERROR_NO_CHANGES_DETECTED:"Sorry we could not detect any changes.",TEXT_ERROR_NO_EDITOR_FOUND:"We could not find any Editor in your Column Definition.",TEXT_ERROR_NO_RECORD_FOUND:"No records selected for edit or clone operation.",TEXT_ERROR_ROW_NOT_EDITABLE:"Current row is not editable.",TEXT_ERROR_ROW_SELECTION_REQUIRED:"You must select some rows before trying to apply new value(s).",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_EXPORT_TO_TAB_DELIMITED:"Export in Text format (Tab delimited)",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_FREEZE_COLUMNS:"Freeze Columns",TEXT_GREATER_THAN:"Greater than",TEXT_GREATER_THAN_OR_EQUAL_TO:"Greater than or equal to",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_ITEMS_SELECTED:"items selected",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_LESS_THAN:"Less than",TEXT_LESS_THAN_OR_EQUAL_TO:"Less than or equal to",TEXT_NOT_CONTAINS:"Not contains",TEXT_NOT_EQUAL_TO:"Not equal to",TEXT_PAGE:"Page",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_X_OF_Y_SELECTED:"# of % selected",TEXT_X_OF_Y_MASS_SELECTED:"{{x}} of {{y}} selected"},n.VALIDATION_REQUIRED_FIELD="Field is required",n.VALIDATION_EDITOR_VALID_NUMBER="Please enter a valid number",n.VALIDATION_EDITOR_VALID_INTEGER="Please enter a valid integer number",n.VALIDATION_EDITOR_INTEGER_BETWEEN="Please enter a valid integer number between {{minValue}} and {{maxValue}}",n.VALIDATION_EDITOR_INTEGER_MAX="Please enter a valid integer number that is lower than {{maxValue}}",n.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE="Please enter a valid integer number that is lower than or equal to {{maxValue}}",n.VALIDATION_EDITOR_INTEGER_MIN="Please enter a valid integer number that is greater than {{minValue}}",n.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE="Please enter a valid integer number that is greater than or equal to {{minValue}}",n.VALIDATION_EDITOR_NUMBER_BETWEEN="Please enter a valid number between {{minValue}} and {{maxValue}}",n.VALIDATION_EDITOR_NUMBER_MAX="Please enter a valid number that is lower than {{maxValue}}",n.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE="Please enter a valid number that is lower than or equal to {{maxValue}}",n.VALIDATION_EDITOR_NUMBER_MIN="Please enter a valid number that is greater than {{minValue}}",n.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE="Please enter a valid number that is greater than or equal to {{minValue}}",n.VALIDATION_EDITOR_DECIMAL_BETWEEN="Please enter a valid number with a maximum of {{maxDecimal}} decimals",n.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN="Please make sure your text length is between {{minLength}} and {{maxLength}} characters",n.VALIDATION_EDITOR_TEXT_MAX_LENGTH="Please make sure your text is less than {{maxLength}} characters",n.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE="Please make sure your text is less than or equal to {{maxLength}} characters",n.VALIDATION_EDITOR_TEXT_MIN_LENGTH="Please make sure your text is more than {{minLength}} character(s)",n.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE="Please make sure your text is at least {{minLength}} character(s)",n.exposedEvents=["onBeforeExportToExcel","onAfterExportToExcel","onBeforeExportToTextFile","onAfterExportToTextFile","onGridStateChanged","onHeaderMenuColumnResizeByContent","onPaginationChanged","onItemAdded","onItemDeleted","onItemUpdated","onItemUpserted","onGridBeforeResize","onGridAfterResize","onBeforeFilterChange","onFilterChanged","onBeforeFilterClear","onFilterCleared","onBeforeSortChange","onSortChanged","onBeforeToggleTreeCollapse","onToggleTreeCollapsed"]},eyxJ:function(e,t,i){"use strict";function n(e){var t,i;if(Array.isArray(e))for(;e.length>0;){const n=e.pop();(null===(t=n)||void 0===t?void 0:t.dispose)?n.dispose():(null===(i=n)||void 0===i?void 0:i.unsubscribe)&&n.unsubscribe()}return e}i.d(t,"a",(function(){return n}))},lBQj:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("aurelia-framework"),r=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let o=class{constructor(e,t,i){this.container=e,this.viewCompiler=t,this.viewResources=i}createAureliaViewModelAddToSlot(e,t,i,r=!1){const o=this.viewCompiler.compile('<template><compose view-model.bind="template" view-model.ref="viewModelRef"></compose></template>',this.viewResources);if(i){r&&i.innerHTML&&(i.innerHTML="");const s=Object.assign(Object.assign({template:e||""},t),{viewModelRef:{}}),a=o.create(this.container);a.bind(s,Object(n.n)(s));const l=new n.j(i,!0);return l&&l.add&&l.add(a),{bindings:s,view:a,viewSlot:l}}return null}createAureliaViewAddToSlot(e,t,i=!1){const r=this.viewCompiler.compile('<template><compose view.bind="template" view-model.ref="viewModelRef"></compose></template>',this.viewResources);if(t){i&&t.innerHTML&&(t.innerHTML="");const o={template:e||"",viewModelRef:{}},s=r.create(this.container);s.bind(o,Object(n.n)(o));const a=new n.j(t,!0);return a&&a.add&&a.add(s),{bindings:o,view:s,viewSlot:a}}return null}};o=r([Object(n.q)(!0),Object(n.o)(n.c,n.h,n.i)],o)},pvKZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));i("+aCq"),i("ycYR");var n=i("fj9p"),r=i("aurelia-framework"),o=i("wMS7"),s=i("lBQj"),a=i("eyxJ"),l=i("H9V8"),c=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};let u=class{constructor(e,t,i){this.aureliaUtilService=e,this.pubSubService=t,this.sharedService=i,this._addon=null,this._preloadView="",this._slots=[],this._viewModel="",this._subscriptions=[],this._eventHandler=new Slick.EventHandler}get datasetIdPropName(){return this.gridOptions.datasetIdPropertyName||"id"}get eventHandler(){return this._eventHandler}get gridOptions(){var e,t;return null!==(t=null===(e=this.sharedService)||void 0===e?void 0:e.gridOptions)&&void 0!==t?t:{}}get rowDetailViewOptions(){return this.gridOptions.rowDetailView}dispose(){this._eventHandler.unsubscribeAll(),this._addon&&this._addon.destroy&&(this._addon.destroy(),this._addon=null),this.disposeAllViewSlot(),Object(a.a)(this._subscriptions)}disposeAllViewSlot(){Array.isArray(this._slots)&&this._slots.forEach(e=>this.disposeViewSlot(e)),this._slots=[]}create(e,t){if(e&&t){if(!t.rowDetailView)throw new Error('The Row Detail View requires options to be passed via the "rowDetailView" property of the Grid Options');if(t&&t.rowDetailView){if(!this._addon){if("function"!=typeof t.rowDetailView.process)throw new Error('You need to provide a "process" function for the Row Detail Extension to work properly');this._userProcessFn=t.rowDetailView.process,t.rowDetailView.process=e=>this.onProcessing(e),t.rowDetailView.preTemplate||(this._preloadView=t&&t.rowDetailView&&t.rowDetailView.preloadView||"",t.rowDetailView.preTemplate=()=>o.sanitize('<div class="container_loading"></div>')),t.rowDetailView.postTemplate||(this._viewModel=t&&t.rowDetailView&&t.rowDetailView.viewModel||"",t.rowDetailView.postTemplate=e=>o.sanitize(`<div class="container_${e[this.datasetIdPropName]}"></div>`)),this._addon=new Slick.Plugins.RowDetailView(t.rowDetailView)}const i=this._addon.getColumnDefinition();if("object"==typeof i){i.excludeFromExport=!0,i.excludeFromColumnPicker=!0,i.excludeFromGridMenu=!0,i.excludeFromQuery=!0,i.excludeFromHeaderMenu=!0;const n=t&&t.rowDetailView&&t.rowDetailView.columnIndexPosition||0;n>0?e.splice(n,0,i):e.unshift(i)}}return this._addon}return null}getAddonInstance(){return this._addon}register(e){if(this.sharedService&&this.sharedService.slickGrid&&this.sharedService.gridOptions){if(this.sharedService.slickGrid.registerPlugin(this._addon),e&&this.sharedService.slickGrid.getSelectionModel()||(e=new Slick.RowSelectionModel(this.sharedService.gridOptions.rowSelectionOptions||{selectActiveRow:!0}),this.sharedService.slickGrid.setSelectionModel(e)),this.sharedService.slickGrid.registerPlugin(this._addon),this._addon&&this.sharedService.slickGrid&&this.rowDetailViewOptions){this.rowDetailViewOptions.onExtensionRegistered&&this.rowDetailViewOptions.onExtensionRegistered(this._addon);const e=this._addon.onAsyncResponse;e&&this._eventHandler.subscribe(e,(e,t)=>{this.rowDetailViewOptions&&"function"==typeof this.rowDetailViewOptions.onAsyncResponse&&this.rowDetailViewOptions.onAsyncResponse(e,t)});const t=this._addon.onAsyncEndUpdate;t&&this._eventHandler.subscribe(t,(e,t)=>{this.renderViewModel(t&&t.item),this.rowDetailViewOptions&&"function"==typeof this.rowDetailViewOptions.onAsyncEndUpdate&&this.rowDetailViewOptions.onAsyncEndUpdate(e,t)});const i=this._addon.onAfterRowDetailToggle;i&&this._eventHandler.subscribe(i,(e,t)=>{this.renderPreloadView(),this.renderAllViewModels(),this.rowDetailViewOptions&&"function"==typeof this.rowDetailViewOptions.onAfterRowDetailToggle&&this.rowDetailViewOptions.onAfterRowDetailToggle(e,t)});const n=this._addon.onBeforeRowDetailToggle;n&&this._eventHandler.subscribe(n,(e,t)=>{this.onBeforeRowDetailToggle(e,t),this.rowDetailViewOptions&&"function"==typeof this.rowDetailViewOptions.onBeforeRowDetailToggle&&this.rowDetailViewOptions.onBeforeRowDetailToggle(e,t)});const r=this._addon.onRowBackToViewportRange;r&&this._eventHandler.subscribe(r,(e,t)=>{this.onRowBackToViewportRange(e,t),this.rowDetailViewOptions&&"function"==typeof this.rowDetailViewOptions.onRowBackToViewportRange&&this.rowDetailViewOptions.onRowBackToViewportRange(e,t)});const o=this._addon.onRowOutOfViewportRange;o&&this._eventHandler.subscribe(o,(e,t)=>{this.rowDetailViewOptions&&"function"==typeof this.rowDetailViewOptions.onRowOutOfViewportRange&&this.rowDetailViewOptions.onRowOutOfViewportRange(e,t)}),this._eventHandler.subscribe(this.sharedService.slickGrid.onColumnsReordered,this.redrawAllViewSlots.bind(this)),(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&this._eventHandler.subscribe(this.sharedService.slickGrid.onSelectedRowsChanged,this.redrawAllViewSlots.bind(this)),this._eventHandler.subscribe(this.sharedService.slickGrid.onSort,this.disposeAllViewSlot.bind(this)),this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",this.redrawAllViewSlots.bind(this)))}return this._addon}return null}redrawAllViewSlots(){this._slots.forEach(e=>{this.redrawViewSlot(e)})}renderAllViewModels(){this._slots.forEach(e=>{e&&e.dataContext&&this.renderViewModel(e.dataContext)})}redrawViewSlot(e){const t=document.getElementsByClassName("container_"+e.id);t&&t.length>=0&&this.renderViewModel(e.dataContext)}renderPreloadView(){const e=document.getElementsByClassName("container_loading");e&&e.length>=0&&this.aureliaUtilService.createAureliaViewAddToSlot(this._preloadView,e[e.length-1],!0)}renderViewModel(e){const t=document.getElementsByClassName("container_"+e[this.datasetIdPropName]);if(t&&t.length>0){const i={model:e,addon:this._addon,grid:this.sharedService.slickGrid,dataView:this.sharedService.dataView,parent:this.rowDetailViewOptions&&this.rowDetailViewOptions.parent},n=this.aureliaUtilService.createAureliaViewModelAddToSlot(this._viewModel,i,t[t.length-1],!0),r=this._slots.find(t=>t.id===e[this.datasetIdPropName]);r&&n&&(r.view=n.view,r.viewSlot=n.viewSlot)}}disposeViewSlot(e){if(e&&e.view&&e.viewSlot&&e.view.unbind&&e.viewSlot.remove){const t=document.getElementsByClassName("container_"+this._slots[0].id);if(t&&t.length>0)return e.viewSlot.remove(e.view),e.view.unbind(),t[0].innerHTML="",e}return null}notifyTemplate(e){var t;(null===(t=this._addon)||void 0===t?void 0:t.onAsyncResponse)&&this._addon.onAsyncResponse.notify({item:e},new Slick.EventData,this)}async onProcessing(e){if(e&&"function"==typeof this._userProcessFn){let t;const i=this._userProcessFn(e),n=await i;if(n.hasOwnProperty(this.datasetIdPropName)?t=n:n instanceof Response&&"function"==typeof n.json?t=await n.json():n&&n.content&&(t=n.content),!t||!t.hasOwnProperty(this.datasetIdPropName))throw new Error(`[Aurelia-Slickgrid] could not process the Row Detail, you must make sure that your "process" callback\n          (a Promise or an HttpClient call returning an Observable) returns an item object that has an "${this.datasetIdPropName}" property`);this.notifyTemplate(t||{})}}onBeforeRowDetailToggle(e,t){if(t&&t.item&&t.item.__collapsed){if(t&&t.item){const e={id:t.item[this.datasetIdPropName],dataContext:t.item},i=this.gridOptions.datasetIdPropertyName||"id";Object(n.Wb)(this._slots,e,i)}}else{const e=this._slots.findIndex(e=>e.id===t.item[this.datasetIdPropName]);e>=0&&this.disposeViewSlot(this._slots[e])&&this._slots.splice(e,1)}}onRowBackToViewportRange(e,t){t&&t.item&&this._slots.forEach(e=>{e.id===t.item[this.datasetIdPropName]&&this.redrawViewSlot(e)})}};u=c([Object(r.q)(!0),Object(r.o)(s.a,l.c,n.L,n.Eb)],u)}}]);
//# sourceMappingURL=vendors~67b39496.9d2411084dfad6db3328.bundle.map