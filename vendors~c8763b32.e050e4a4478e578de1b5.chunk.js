(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"1KT3":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var o=i("sjEL"),s=i.n(o),n=i("fj9p"),l=i("8dL7");const d=s.a||o;class r{constructor(t,e,i){var o,s;this.grid=t,this.customFooterOptions=e,this.translaterService=i,this._isLeftFooterOriginallyEmpty=!0,this._isLeftFooterDisplayingSelectionRowCount=!1,this._isRightFooterOriginallyEmpty=!0,this._selectedRowCount=0,this._bindingHelper=new l.a,this._bindingHelper.querySelectorPrefix=`.${this.gridUid} `,this._eventHandler=new Slick.EventHandler,this._isLeftFooterOriginallyEmpty=!(null===(o=this.gridOptions.customFooterOptions)||void 0===o?void 0:o.leftFooterText),this._isRightFooterOriginallyEmpty=!(null===(s=this.gridOptions.customFooterOptions)||void 0===s?void 0:s.rightFooterText),this.registerOnSelectedRowsChangedWhenEnabled(e)}get eventHandler(){return this._eventHandler}get gridUid(){var t,e;return null!==(e=null===(t=this.grid)||void 0===t?void 0:t.getUID())&&void 0!==e?e:""}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}get locales(){return this.gridOptions.locales||n.u.locales}set metrics(t){this.renderMetrics(t)}get leftFooterText(){var t,e;return null!==(e=null===(t=document.querySelector("div.left-footer"))||void 0===t?void 0:t.textContent)&&void 0!==e?e:""}set leftFooterText(t){this.renderLeftFooterText(t)}get rightFooterText(){var t,e;return null!==(e=null===(t=document.querySelector("div.right-footer"))||void 0===t?void 0:t.textContent)&&void 0!==e?e:""}set rightFooterText(t){this.renderRightFooterText(t)}dispose(){var t;this._bindingHelper.dispose(),null===(t=this._footerElement)||void 0===t||t.remove(),this._eventHandler.unsubscribeAll()}renderFooter(t){var e,i,o,s;this.gridOptions.enableTranslate?this.translateCustomFooterTexts():(this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{},this.customFooterOptions.metricTexts.lastUpdate=this.customFooterOptions.metricTexts.lastUpdate||(null===(e=this.locales)||void 0===e?void 0:e.TEXT_LAST_UPDATE)||"TEXT_LAST_UPDATE",this.customFooterOptions.metricTexts.items=this.customFooterOptions.metricTexts.items||(null===(i=this.locales)||void 0===i?void 0:i.TEXT_ITEMS)||"TEXT_ITEMS",this.customFooterOptions.metricTexts.itemsSelected=this.customFooterOptions.metricTexts.itemsSelected||(null===(o=this.locales)||void 0===o?void 0:o.TEXT_ITEMS_SELECTED)||"TEXT_ITEMS_SELECTED",this.customFooterOptions.metricTexts.of=this.customFooterOptions.metricTexts.of||(null===(s=this.locales)||void 0===s?void 0:s.TEXT_OF)||"TEXT_OF"),this.createFooterContainer(t)}renderMetrics(t){var e;const i=d(t.endTime).format(this.customFooterOptions.dateFormat);this._bindingHelper.setElementAttributeValue("span.last-update-timestamp","textContent",i),this._bindingHelper.setElementAttributeValue("span.item-count","textContent",t.itemCount),this._bindingHelper.setElementAttributeValue("span.total-count","textContent",t.totalItemCount),(null===(e=this.customFooterOptions.metricTexts)||void 0===e?void 0:e.lastUpdate)&&this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"lastUpdate","span.text-last-update","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"items","span.text-items","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"of","span.text-of","textContent")}renderLeftFooterText(t){this._bindingHelper.setElementAttributeValue("div.left-footer","textContent",t)}renderRightFooterText(t){this._bindingHelper.setElementAttributeValue("div.right-footer","textContent",t)}createFooterContainer(t){const e=document.createElement("div");e.className="slick-custom-footer "+this.gridUid,e.style.width="100%",e.style.height=(this.customFooterOptions.footerHeight||20)+"px";const i=document.createElement("div");i.className="left-footer "+this.customFooterOptions.leftContainerClass,i.innerHTML=Object(n.Jd)(this.gridOptions,this.customFooterOptions.leftFooterText||"");const o=this.createFooterRightContainer();e.appendChild(i),e.appendChild(o),this._footerElement=e,(null==t?void 0:t.appendChild)&&this._footerElement&&t.appendChild(this._footerElement)}createFooterRightContainer(){var t,e,i,o,s,l,d,r;const a=document.createElement("div");if(a.className="right-footer "+(this.customFooterOptions.rightContainerClass||""),this._isRightFooterOriginallyEmpty){if(!this.customFooterOptions.hideMetrics){a.classList.add("metrics");const n=document.createElement("span");if(n.className="timestamp",!this.customFooterOptions.hideLastUpdateTimestamp){const t=this.createFooterLastUpdate();t&&n.appendChild(t)}const c=document.createElement("span");if(c.className="item-count",c.textContent=""+(null!==(e=null===(t=this.metrics)||void 0===t?void 0:t.itemCount)&&void 0!==e?e:"0"),a.appendChild(n),a.appendChild(c),!this.customFooterOptions.hideTotalItemCount){a.appendChild(document.createTextNode("\r\n"));const t=document.createElement("span");t.className="text-of",t.textContent=` ${null!==(o=null===(i=this.customFooterOptions.metricTexts)||void 0===i?void 0:i.of)&&void 0!==o?o:"of"} `,a.appendChild(t),a.appendChild(document.createTextNode("\r\n"));const e=document.createElement("span");e.className="total-count",e.textContent=""+(null!==(l=null===(s=this.metrics)||void 0===s?void 0:s.totalItemCount)&&void 0!==l?l:"0"),a.appendChild(e)}a.appendChild(document.createTextNode("\r\n"));const h=document.createElement("span");h.className="text-items",h.textContent=` ${null!==(r=null===(d=this.customFooterOptions.metricTexts)||void 0===d?void 0:d.items)&&void 0!==r?r:"items"} `,a.appendChild(h)}}else a.innerHTML=Object(n.Jd)(this.gridOptions,this.customFooterOptions.rightFooterText||"");return a}createFooterLastUpdate(){var t,e,i,o;const s=null!==(i=null===(e=null===(t=this.customFooterOptions)||void 0===t?void 0:t.metricTexts)||void 0===e?void 0:e.lastUpdate)&&void 0!==i?i:"Last Update",n=d(null===(o=this.metrics)||void 0===o?void 0:o.endTime).format(this.customFooterOptions.dateFormat),l=document.createElement("span");l.className="text-last-update",l.textContent=s;const r=document.createElement("span");r.className="last-update-timestamp",r.textContent=n;const a=document.createElement("span");a.className="separator",a.textContent=` ${this.customFooterOptions.metricSeparator||""} `;const c=document.createElement("span");return c.appendChild(l),c.appendChild(document.createTextNode("\r\n")),c.appendChild(r),c.appendChild(a),c}registerOnSelectedRowsChangedWhenEnabled(t){var e,i,o,s;if((this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&t&&!t.hideRowSelectionCount&&this._isLeftFooterOriginallyEmpty){this._isLeftFooterDisplayingSelectionRowCount=!0;const n=null!==(s=null!==(i=null===(e=t.metricTexts)||void 0===e?void 0:e.itemsSelected)&&void 0!==i?i:null===(o=this.locales)||void 0===o?void 0:o.TEXT_ITEMS_SELECTED)&&void 0!==s?s:"TEXT_ITEMS_SELECTED";t.leftFooterText="0 "+n;const l=this.grid.onSelectedRowsChanged;this._eventHandler.subscribe(l,(e,i)=>{var o,s,n,l;this._selectedRowCount=i.rows.length;const d=null!==(l=null!==(s=null===(o=t.metricTexts)||void 0===o?void 0:o.itemsSelected)&&void 0!==s?s:null===(n=this.locales)||void 0===n?void 0:n.TEXT_ITEMS_SELECTED)&&void 0!==l?l:"TEXT_ITEMS_SELECTED";this.leftFooterText=`${this._selectedRowCount} ${d}`})}}translateCustomFooterTexts(){var t;if(null===(t=this.translaterService)||void 0===t?void 0:t.translate){this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{};for(const t of Object.keys(this.customFooterOptions.metricTexts))if(t.lastIndexOf("Key")>0){const e=t.substring(0,t.lastIndexOf("Key"));this.customFooterOptions.metricTexts[e]=this.translaterService.translate(this.customFooterOptions.metricTexts[t]||" ")}this._isLeftFooterDisplayingSelectionRowCount&&(this.leftFooterText=`${this._selectedRowCount} ${this.customFooterOptions.metricTexts.itemsSelected}`)}}}},"7OnR":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var o=i("fj9p");class s{constructor(){this._warningLeftElement=null,this._warningRightElement=null,this.isPreviouslyShown=!1}get gridOptions(){return this.grid&&this.grid.getOptions?this.grid.getOptions():{}}init(t,e){this.grid=t,this.translaterService=e.get("TranslaterService")}dispose(){var t,e;null===(t=this._warningLeftElement)||void 0===t||t.remove(),null===(e=this._warningRightElement)||void 0===e||e.remove(),this._warningLeftElement=null,this._warningRightElement=null}showEmptyDataMessage(t=!0,e){var i,s,n,l,d,r,a,c,h,u,m,v;if(!this.grid||!this.gridOptions||this.isPreviouslyShown===t)return!1;this.isPreviouslyShown=t;const p=this.grid.getUID(),g={message:"No data to display.",...this.gridOptions.emptyDataWarning,...e},E=null!==(i=null==g?void 0:g.className)&&void 0!==i?i:"slick-empty-data-warning";this._warningLeftElement=document.querySelector(`.${p} .${E}`);const C=document.querySelector(`.${p} .grid-canvas.grid-canvas-left`),_=document.querySelector(`.${p} .grid-canvas.grid-canvas-right`),f=null!==(s=g.leftViewportMarginLeft)&&void 0!==s?s:0,b=null!==(n=g.rightViewportMarginLeft)&&void 0!==n?n:0,T=null!==(l=g.frozenLeftViewportMarginLeft)&&void 0!==l?l:0,y=null!==(d=g.frozenRightViewportMarginLeft)&&void 0!==d?d:0,S=void 0!==(null===(r=this.gridOptions)||void 0===r?void 0:r.frozenColumn)&&this.gridOptions.frozenColumn>=0,O="string"==typeof f?f:f+"px",w="string"==typeof b?b:b+"px";if(this.gridOptions.autoHeight){const e=document.querySelector(".slick-pane.slick-pane-top.slick-pane-left");if(e&&e.style&&C&&C.style){const i=parseInt(e.style.height,10)||0,o=null!==(c=null===(a=this.gridOptions)||void 0===a?void 0:a.rowHeight)&&void 0!==c?c:0,s=this.gridOptions.enableFiltering&&null!==(u=null===(h=this.gridOptions)||void 0===h?void 0:h.headerRowHeight)&&void 0!==u?u:0,n=this.gridOptions.createPreHeaderPanel&&null!==(v=null===(m=this.gridOptions)||void 0===m?void 0:m.preHeaderPanelHeight)&&void 0!==v?v:0;if(t){let t=null!==i&&i<100?i:100;t+=s+n,e.style.minHeight=t+"px",C.style.minHeight=o+"px"}}}let x=g.message;if(this.gridOptions.enableTranslate&&this.translaterService&&(null==g?void 0:g.messageKey)&&(x=this.translaterService.translate(g.messageKey)),!this._warningLeftElement&&C&&_){const t=this.gridOptions&&this.gridOptions.sanitizeHtmlOptions||{},e=Object(o.Jd)(this.gridOptions,x,t);this._warningLeftElement=document.createElement("div"),this._warningLeftElement.classList.add(E),this._warningLeftElement.classList.add("left"),this._warningLeftElement.innerHTML=e,this._warningRightElement=this._warningLeftElement.cloneNode(!0),this._warningRightElement.classList.add("right"),_.appendChild(this._warningRightElement),C.appendChild(this._warningLeftElement)}if(this._warningLeftElement){let e=t?"block":"none";S&&t&&(e=g.hideFrozenLeftWarning?"none":"block"),this._warningLeftElement.style.display=e;const i="string"==typeof T?T:T+"px";this._warningLeftElement.style.marginLeft=S?i:O}if(this._warningRightElement){let e=t?"block":"none";S&&t&&(e=g.hideFrozenRightWarning?"none":"block"),this._warningRightElement.style.display=e;const i="string"==typeof y?y:y+"px";this._warningRightElement.style.marginLeft=S?i:w}return t}}},eVkZ:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("5aBb");var o=i("LmJZ"),s=i.n(o),n=i("fj9p");const l=s.a||o,d=t=>console.log(t.message);class r{constructor(){this._columnDefinitions=[],this._lastActiveRowNumber=-1,this._formValues=null,this.gridService=null,this.gridStateService=null,this._eventHandler=new Slick.EventHandler,this._bindEventService=new n.g}get eventHandler(){return this._eventHandler}get dataView(){return this.grid.getData()}get dataViewLength(){return this.dataView.getLength()}get formValues(){return this._formValues}get editors(){return this._editors}set editors(t){this._editors=t}get gridOptions(){var t;return null===(t=this.grid)||void 0===t?void 0:t.getOptions()}init(t,e){var i,o;if(this.grid=t,this.gridService=e.get("GridService"),this.gridStateService=e.get("GridStateService"),this.translaterService=e.get("TranslaterService"),!this.gridService||!this.gridStateService)throw new Error("[Slickgrid-Universal] it seems that the GridService and/or GridStateService are not being loaded properly, make sure the Container Service is properly implemented.");if(this.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');this._locales=null!==(o=null===(i=this.gridOptions)||void 0===i?void 0:i.locales)&&void 0!==o?o:n.u.locales}dispose(){this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),this._formValues=null,this.disposeComponent()}disposeComponent(){var t;"function"==typeof(null===(t=this._modalElm)||void 0===t?void 0:t.remove)&&(this._modalElm.remove(),document.body.classList.remove("slick-modal-open"))}changeFormInputValue(t,e,i=!1,o=!0){var s,l,d,r,a,c,h,u,m,v,p,g;const E=this.getColumnByObjectOrId(t),C="string"==typeof t?t:null!==(s=null==E?void 0:E.id)&&void 0!==s?s:"",_=null===(l=this._editors)||void 0===l?void 0:l[C];let f=e;if(!_&&!i)throw new Error(`Composite Editor with column id "${C}" not found.`);if(_&&_.setValue&&Array.isArray(this._editorContainers)){_.setValue(e,!0,o);const t=this._editorContainers.find(t=>t.dataset.editorid===C),i=null!==(a=null===(r=null===(d=this.gridOptions)||void 0===d?void 0:d.compositeEditorOptions)||void 0===r?void 0:r.excludeDisabledFieldFormValues)&&void 0!==a&&a;!_.disabled||_.disabled&&!i?null===(c=null==t?void 0:t.classList)||void 0===c||c.add("modified"):(f="",null===(h=null==t?void 0:t.classList)||void 0===h||h.remove("modified")),!_.disabled||""===f&&null===f&&void 0===f&&0===f||(f="")}const b=null!==(u=null==E?void 0:E.field)&&void 0!==u?u:"";if(E&&(null==b?void 0:b.includes("."))){const t=null!==(p=null!==(v=null===(m=E.internalColumnEditor)||void 0===m?void 0:m.complexObjectPath)&&void 0!==v?v:b)&&void 0!==p?p:"";Object(n.Kd)(null!==(g=this._formValues)&&void 0!==g?g:{},t,e)}else this._formValues={...this._formValues,[C]:f}}changeFormValue(t,e){var i,o,s,d,r;const a=this.getColumnByObjectOrId(t),c="string"==typeof t?t:null!==(i=null==a?void 0:a.id)&&void 0!==i?i:"",h=null!==(o=null==a?void 0:a.field)&&void 0!==o?o:t;if(null==h?void 0:h.includes(".")){const t=null!==(r=null!==(d=null===(s=null==a?void 0:a.internalColumnEditor)||void 0===s?void 0:s.complexObjectPath)&&void 0!==d?d:h)&&void 0!==r?r:"";Object(n.Kd)(this._formValues,t,e)}else this._formValues={...this._formValues,[c]:e};this._formValues=l({},this._itemDataContext,this._formValues)}changeFormEditorOption(t,e,i){var o;const s=null===(o=this._editors)||void 0===o?void 0:o[t];if(!(null==s?void 0:s.changeEditorOption))throw new Error(`Editor with column id "${t}" not found OR the Editor does not support "changeEditorOption" (current only available with AutoComplete, Date, MultipleSelect & SingleSelect Editors).`);s.changeEditorOption(e,i)}disableFormInput(t,e=!0){var i;const o=null===(i=this._editors)||void 0===i?void 0:i[t];(null==o?void 0:o.disable)&&Array.isArray(this._editorContainers)&&o.disable(e)}openDetails(t){var e,i,o,s,l,r,a,c,h,u,m,v,p,g,E,C,_;const f=null!==(e=t.onError)&&void 0!==e?e:d,b={backdrop:"static",showCloseButtonOutside:!0,shouldClearRowSelectionAfterMassAction:!0,viewColumnLayout:"auto",modalType:"edit"};try{if(!this.grid||this.grid.getEditorLock().isActive()&&!this.grid.getEditorLock().commitCurrentEdit())return null;this._options={...b,...this.gridOptions.compositeEditorOptions,...t,labels:{...null===(i=this.gridOptions.compositeEditorOptions)||void 0===i?void 0:i.labels,...null==t?void 0:t.labels}},this._options.backdrop=void 0!==t.backdrop?t.backdrop:"static";const e=this._options.viewColumnLayout||1,d=this.grid.getActiveCell(),v=null!==(o=null==d?void 0:d.cell)&&void 0!==o?o:0,p=null!==(s=null==d?void 0:d.row)&&void 0!==s?s:0,g=this.grid.getUID()||"";let E=t.headerTitle||"";if("function"==typeof this._options.onBeforeOpen&&this._options.onBeforeOpen(),this.hasRowSelectionEnabled()&&"auto-mass"===this._options.modalType&&this.grid.getSelectedRows){(this.grid.getSelectedRows()||[]).length>0?(this._options.modalType="mass-selection",(null==t?void 0:t.headerTitleMassSelection)&&(E=null==t?void 0:t.headerTitleMassSelection)):(this._options.modalType="mass-update",(null==t?void 0:t.headerTitleMassUpdate)&&(E=null==t?void 0:t.headerTitleMassUpdate))}const C=this._options.modalType||"edit";if(!this.gridOptions.editable)return f({type:"error",code:"EDITABLE_GRID_REQUIRED",message:"Your grid must be editable in order to use the Composite Editor Modal."}),null;if(!this.gridOptions.enableCellNavigation)return f({type:"error",code:"ENABLE_CELL_NAVIGATION_REQUIRED",message:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.'}),null;if(!(this.gridOptions.enableAddRow||"clone"!==C&&"create"!==C))return f({type:"error",code:"ENABLE_ADD_ROW_REQUIRED",message:'Composite Editor requires the flag "enableAddRow" to be set to True in your Grid Options when cloning/creating a new item.'}),null;if(!(d||"clone"!==C&&"edit"!==C))return f({type:"warning",code:"NO_RECORD_FOUND",message:"No records selected for edit or clone operation."}),null;{const t="mass-update"===C||"mass-selection"===C,i=t?{}:this.grid.getDataItem(p);this._originalDataContext=Object(n.wc)(i),this._columnDefinitions=this.grid.getColumns();const o=this.hasRowSelectionEnabled()?this.grid.getSelectedRows():[],s=null!==(r=null===(l=this.dataView)||void 0===l?void 0:l.getItems())&&void 0!==r?r:[],d=Array.isArray(s)?s.length:0;this._lastActiveRowNumber=p;const _=null===(a=this.gridStateService)||void 0===a?void 0:a.getCurrentRowSelections(),b=(null==_?void 0:_.dataContextIds)||[],T="create"===C?this.dataViewLength:p;if(!this.focusOnFirstColumnCellWithEditor(this._columnDefinitions,i,v,T,t))return null;if("edit"===C&&!i)return f({type:"warning",code:"ROW_NOT_EDITABLE",message:"Current row is not editable."}),null;if("mass-selection"===C&&o.length<1)return f({type:"warning",code:"ROW_SELECTION_REQUIRED",message:"You must select some rows before trying to apply new value(s)."}),null;let y=[];y=t?this._columnDefinitions.filter(t=>{var e;return t.editor&&!0===(null===(e=t.internalColumnEditor)||void 0===e?void 0:e.massUpdate)}):this._columnDefinitions.filter(t=>t.editor),y.some(t=>{var e;return void 0!==(null===(e=t.internalColumnEditor)||void 0===e?void 0:e.compositeEditorFormOrder)})&&y.sort((t,e)=>{var i,o,s,l;const d=null!==(o=null===(i=null==t?void 0:t.internalColumnEditor)||void 0===i?void 0:i.compositeEditorFormOrder)&&void 0!==o?o:1/0,r=null!==(l=null===(s=null==e?void 0:e.internalColumnEditor)||void 0===s?void 0:s.compositeEditorFormOrder)&&void 0!==l?l:1/0;return Object(n.wd)(d,r,n.Nb.asc)});const S=E.replace(/\{\{(.*?)\}\}/g,(t,e)=>Object(n.Tc)(i,e)),O=Object(n.Jd)(this.gridOptions,S),w="auto"===e?this.autoCalculateLayoutColumnCount(y.length):e;this._modalElm=document.createElement("div"),this._modalElm.className="slick-editor-modal "+g;const x=document.createElement("div");if(x.className="slick-editor-modal-content",e>1||"auto"===e&&w>1){const t=2===w?"split-view":"triple-split-view";x.classList.add(t)}const L=document.createElement("div");L.className="slick-editor-modal-title",L.innerHTML=O;const F=document.createElement("button");F.type="button",F.textContent="Ã—",F.className="close",F.dataset.action="close",F.dataset.ariaLabel="Close",this._options.showCloseButtonOutside&&(null===(c=null==L?void 0:L.classList)||void 0===c||c.add("outside"),null===(h=null==F?void 0:F.classList)||void 0===h||h.add("outside"));const R=document.createElement("div");R.className="slick-editor-modal-header",R.appendChild(L),R.appendChild(F);const V=document.createElement("div");V.className="slick-editor-modal-body",this._modalBodyTopValidationElm=document.createElement("div"),this._modalBodyTopValidationElm.className="validation-summary",this._modalBodyTopValidationElm.style.display="none",V.appendChild(this._modalBodyTopValidationElm);const N=document.createElement("div");N.className="slick-editor-modal-footer";const I=document.createElement("button");I.type="button",I.className="btn btn-cancel btn-default btn-sm",I.dataset.action="cancel",I.dataset.ariaLabel=this.getLabelText("cancelButton","TEXT_CANCEL","Cancel"),I.textContent=this.getLabelText("cancelButton","TEXT_CANCEL","Cancel");let A="",D="";switch(C){case"clone":D=this.getLabelText("cloneButton","TEXT_CLONE","Clone");break;case"mass-update":const t=this.getLabelText("massUpdateStatus","TEXT_ALL_X_RECORDS_SELECTED","All {{x}} records selected");A=this.parseText(t,{x:d}),D=this.getLabelText("massUpdateButton","TEXT_APPLY_MASS_UPDATE","Mass Update");break;case"mass-selection":const e=this.getLabelText("massSelectionStatus","TEXT_X_OF_Y_MASS_SELECTED","{{x}} of {{y}} selected");A=this.parseText(e,{x:b.length,y:d}),D=this.getLabelText("massSelectionButton","TEXT_APPLY_TO_SELECTION","Update Selection");break;default:D=this.getLabelText("saveButton","TEXT_SAVE","Save")}const k=document.createElement("div");k.className="footer-status-text",k.textContent=A,this._modalSaveButtonElm=document.createElement("button"),this._modalSaveButtonElm.type="button",this._modalSaveButtonElm.className="btn btn-save btn-primary btn-sm",this._modalSaveButtonElm.dataset.action="create"===C||"edit"===C?"save":C,this._modalSaveButtonElm.dataset.ariaLabel=D,this._modalSaveButtonElm.textContent=D;const B=document.createElement("div");B.className="footer-buttons","mass-update"!==C&&"mass-selection"!==C||N.appendChild(k),B.appendChild(I),B.appendChild(this._modalSaveButtonElm),N.appendChild(B),x.appendChild(R),x.appendChild(V),x.appendChild(N),this._modalElm.appendChild(x);for(const t of y)if(t.editor){const e=document.createElement("div");e.className="item-details-container editor-"+t.id,1===w?e.classList.add("slick-col-medium-12"):e.classList.add("slick-col-medium-6","slick-col-xlarge-"+12/w);const i=document.createElement("div");i.className="item-details-label editor-"+t.id,i.textContent=this.getColumnLabel(t)||"n/a";const o=document.createElement("div");o.className="item-details-editor-container slick-cell",o.dataset.editorid=""+t.id;const s=document.createElement("div");if(s.className="item-details-validation editor-"+t.id,null===(u=this._options)||void 0===u?void 0:u.showResetButtonOnEachEditor){const e=this.createEditorResetButtonElement(""+t.id);this._bindEventService.bind(e,"click",this.handleResetInputValue.bind(this)),i.appendChild(e)}e.appendChild(i),e.appendChild(o),e.appendChild(s),V.appendChild(e)}if(null===(m=this._options)||void 0===m?void 0:m.showFormResetButton){const t=this.createFormResetButtonElement();this._bindEventService.bind(t,"click",this.handleResetFormClicked.bind(this)),V.appendChild(t)}document.body.appendChild(this._modalElm),document.body.classList.add("slick-modal-open"),this._bindEventService.bind(document.body,"click",this.handleBodyClicked.bind(this)),this._editors={},this._editorContainers=y.map(t=>V.querySelector(`[data-editorid=${t.id}]`))||[],this._compositeOptions={destroy:this.disposeComponent.bind(this),modalType:C,validationMsgPrefix:"* ",formValues:{},editors:this._editors};const M=new Slick.CompositeEditor(y,this._editorContainers,this._compositeOptions);this.grid.editActiveCell(M),this._bindEventService.bind(F,"click",this.cancelEditing.bind(this)),this._bindEventService.bind(I,"click",this.cancelEditing.bind(this)),this._bindEventService.bind(this._modalSaveButtonElm,"click",this.handleSaveClicked.bind(this)),this._bindEventService.bind(this._modalElm,"keydown",this.handleKeyDown.bind(this)),this._bindEventService.bind(this._modalElm,"focusout",this.validateCurrentEditor.bind(this)),this._bindEventService.bind(this._modalElm,"blur",this.validateCurrentEditor.bind(this));const H=this.grid.onCompositeEditorChange;this._eventHandler.subscribe(H,this.handleOnCompositeEditorChange.bind(this));const U=this.grid.onAddNewRow;this._eventHandler.subscribe(U,(t,e)=>{this.insertNewItemInDataView(e.item),this._originalDataContext=e.item,this.dispose()})}return this}catch(t){this.dispose();const e="string"==typeof t?t:null!==(g=null!==(v=null==t?void 0:t.message)&&void 0!==v?v:null===(p=null==t?void 0:t.body)||void 0===p?void 0:p.message)&&void 0!==g?g:"";return f({type:"error",code:"string"==typeof t?t:null!==(_=null!==(E=null==t?void 0:t.status)&&void 0!==E?E:null===(C=null==t?void 0:t.body)||void 0===C?void 0:C.status)&&void 0!==_?_:e,message:e}),null}}async cancelEditing(){var t,e;let i=!0;this.formValues&&Object.keys(this.formValues).length>0&&"function"==typeof this._options.onClose&&(i=await this._options.onClose()),i&&(this.grid.getEditController().cancelCurrentEdit(),"edit"!==(null===(t=this._options)||void 0===t?void 0:t.modalType)&&"clone"!==(null===(e=this._options)||void 0===e?void 0:e.modalType)||this.resetCurrentRowDataContext(),this.grid.setActiveRow(this._lastActiveRowNumber),this.dispose())}showValidationSummaryText(t,e=""){var i,o;t&&""!==e?(this._modalBodyTopValidationElm.textContent=e,this._modalBodyTopValidationElm.style.display="block",null===(o=(i=this._modalBodyTopValidationElm).scrollIntoView)||void 0===o||o.call(i),this._modalSaveButtonElm.disabled=!1,this._modalSaveButtonElm.classList.remove("saving")):(this._modalBodyTopValidationElm.style.display="none",this._modalBodyTopValidationElm.textContent=e)}applySaveMassUpdateChanges(t){const e=this.dataView.getItems();for(const i in t)i in t&&e.forEach(e=>{i in t&&(e[i]=t[i])});this.dataView.setItems(e,this.gridOptions.datasetIdPropertyName),this.grid.invalidate()}applySaveMassSelectionChanges(t,e){var i,o;const s=(null!==(i=null==e?void 0:e.dataContextIds)&&void 0!==i?i:[]).map(t=>this.dataView.getItemById(t));for(const e in t)e in t&&s.forEach(i=>{e in t&&(i[e]=t[e])});null===(o=this.gridService)||void 0===o||o.updateItems(s)}autoCalculateLayoutColumnCount(t){return t>=15?3:t>=8?2:1}createEditorResetButtonElement(t){var e,i,o,s,n;const l=document.createElement("button");if(l.type="button",l.name=t,l.title=null!==(o=null===(i=null===(e=this._options)||void 0===e?void 0:e.labels)||void 0===i?void 0:i.resetFormButton)&&void 0!==o?o:"Reset Form Input",l.className="btn btn-xs btn-editor-reset",null===(s=this._options)||void 0===s?void 0:s.resetEditorButtonCssClass){const t=null===(n=this._options)||void 0===n?void 0:n.resetEditorButtonCssClass.split(" ");for(const e of t)l.classList.add(e)}return l}createFormResetButtonElement(){var t,e;const i=document.createElement("div");i.className="reset-container";const o=document.createElement("button");o.type="button",o.textContent=" Reset Form",o.className="btn btn-sm reset-form";const s=document.createElement("span");return s.className=null!==(e=null===(t=this._options)||void 0===t?void 0:t.resetFormButtonIconCssClass)&&void 0!==e?e:"",o.prepend(s),i.appendChild(o),i}executeOnError(t){var e,i;(null!==(i=null===(e=this._options)||void 0===e?void 0:e.onError)&&void 0!==i?i:d)(t)}async executeOnSave(t,e,i,o){var s,n,l,d,r;try{this.showValidationSummaryText(!1,"");if(this.validateCompositeEditors().valid){if(this._modalSaveButtonElm.classList.add("saving"),this._modalSaveButtonElm.disabled=!0,"function"==typeof(null===(s=this._options)||void 0===s?void 0:s.onSave)){await(null===(n=this._options)||void 0===n?void 0:n.onSave(this.formValues,this.getCurrentRowSelections(),o))&&(t(this.formValues,this.getCurrentRowSelections()),e())}else t(this.formValues,this.getCurrentRowSelections()),e();"function"==typeof i&&i(),this.dispose()}}catch(t){const e="string"==typeof t?t:null!==(r=null!==(l=null==t?void 0:t.message)&&void 0!==l?l:null===(d=null==t?void 0:t.body)||void 0===d?void 0:d.message)&&void 0!==r?r:"";this.showValidationSummaryText(!0,e)}}focusOnFirstColumnCellWithEditor(t,e,i,o,s){const n=s&&!this.gridOptions.enableAddRow&&o>=this.dataViewLength?this.dataViewLength-1:o;let l=i;const d=t[i].editor;let r=this.grid.getCellNode(n,i);if(!d||!r||!this.getActiveCellEditor(n,i)){if(l=this.findNextAvailableEditorColumnIndex(t,e,o,s),-1===l)return this.executeOnError({type:"error",code:"NO_EDITOR_FOUND",message:"We could not find any Editor in your Column Definition"}),!1;this.grid.setActiveCell(n,l,!1),s&&this.grid.setActiveRow(this.dataViewLength,l,!0)}return r=this.grid.getCellNode(n,l),!!r}findNextAvailableEditorColumnIndex(t,e,i,o){var s;let n=-1;for(let l=0;l<t.length;l++){const d=t[l];if(d.editor&&(!o||o&&(null===(s=d.internalColumnEditor)||void 0===s?void 0:s.massUpdate))){const t=this.grid.onBeforeEditCell.notify({row:i,cell:l,item:e,column:d,grid:this.grid,target:"composite",compositeEditorOptions:this._compositeOptions});if(this.grid.setActiveCell(i,l,!1),!1!==t){n=l;break}}}return n}getColumnByObjectOrId(t){let e;return"object"==typeof t?e=t:"string"==typeof t&&(e=this._columnDefinitions.find(e=>e.id===t)),e}getActiveCellEditor(t,e){return this.grid.setActiveCell(t,e,!1),this.grid.getCellEditor()}getColumnLabel(t){var e;const i=this.gridOptions.columnGroupSeparator||" - ";let o=t.nameCompositeEditor||t.name||"",s=t.columnGroup||"";if(this.gridOptions.enableTranslate&&this.translaterService){const i=t.nameCompositeEditorKey||t.nameKey;i&&(o=this.translaterService.translate(i)),t.columnGroupKey&&(null===(e=this.translaterService)||void 0===e?void 0:e.translate)&&(s=this.translaterService.translate(t.columnGroupKey))}return(s?`${s}${i}${o}`:o)||""}getLabelText(t,e,i){var o,s,n,l,d,r,a;const c={...null===(o=this.gridOptions.compositeEditorOptions)||void 0===o?void 0:o.labels,...null===(s=this._options)||void 0===s?void 0:s.labels};if((null===(n=this.gridOptions)||void 0===n?void 0:n.enableTranslate)&&(null===(l=this.translaterService)||void 0===l?void 0:l.translate)&&c.hasOwnProperty(t+"Key")){const e=c[t+"Key"];return this.translaterService.translate(e||"")}return null!==(a=null!==(d=null==c?void 0:c[t])&&void 0!==d?d:null===(r=this._locales)||void 0===r?void 0:r[e])&&void 0!==a?a:i}getCurrentRowSelections(){var t;const e=null===(t=this.gridStateService)||void 0===t?void 0:t.getCurrentRowSelections();return{gridRowIndexes:(null==e?void 0:e.gridRowIndexes)||[],dataContextIds:(null==e?void 0:e.dataContextIds)||[]}}handleBodyClicked(t){var e,i,o;(null===(i=null===(e=t.target)||void 0===e?void 0:e.classList)||void 0===i?void 0:i.contains("slick-editor-modal"))&&"static"!==(null===(o=this._options)||void 0===o?void 0:o.backdrop)&&this.dispose()}handleKeyDown(t){"Escape"===t.code?(this.cancelEditing(),t.stopPropagation(),t.preventDefault()):"Tab"===t.code&&this.validateCurrentEditor()}handleResetInputValue(t){var e,i;const o=t.target.name,s=null===(e=this._editors)||void 0===e?void 0:e[o];(null==s?void 0:s.reset)&&s.reset(),null===(i=this._formValues)||void 0===i||delete i[o]}async handleMassSaving(t,e){if(this.formValues&&0!==Object.keys(this.formValues).length){const i="mass-update"===t?"applySaveMassUpdateChanges":"applySaveMassSelectionChanges";this.executeOnSave(this[i].bind(this),e.bind(this))}else this.executeOnError({type:"warning",code:"NO_CHANGES_DETECTED",message:"Sorry we could not detect any changes."})}handleOnCompositeEditorChange(t,e){var i,o,s,n,l,d,r,a;const c=null!==(o=null===(i=e.column)||void 0===i?void 0:i.id)&&void 0!==o?o:"";this._formValues={...this._formValues,...e.formValues};const h=null===(s=this._editors)||void 0===s?void 0:s[c],u=null!==(r=null!==(l=null===(n=null==h?void 0:h.isValueTouched)||void 0===n?void 0:n.call(h))&&void 0!==l?l:null===(d=null==h?void 0:h.isValueChanged)||void 0===d?void 0:d.call(h))&&void 0!==r&&r;this._itemDataContext=null!==(a=null==h?void 0:h.dataContext)&&void 0!==a?a:{};const m=document.querySelector(`[data-editorid=${c}]`);(null==m?void 0:m.classList)&&(u?m.classList.add("modified"):m.classList.remove("modified")),this.validateCompositeEditors()}hasRowSelectionEnabled(){const t=this.grid.getSelectionModel();return(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&t}handleResetFormClicked(){for(const t of Object.keys(this._editors)){const e=this._editors[t];(null==e?void 0:e.reset)&&e.reset()}this._formValues=Object(n.Ec)(this._formValues)}handleSaveClicked(){var t,e,i;const o=null===(t=this._options)||void 0===t?void 0:t.modalType;switch(o){case"mass-update":this.handleMassSaving(o,()=>{this.grid.getEditController().cancelCurrentEdit(),this.grid.setActiveCell(0,0,!1),this._options.shouldClearRowSelectionAfterMassAction&&this.grid.setSelectedRows([])});break;case"mass-selection":this.handleMassSaving(o,()=>{this.grid.getEditController().cancelCurrentEdit(),this.grid.setActiveRow(this._lastActiveRowNumber),this._options.shouldClearRowSelectionAfterMassAction&&this.grid.setSelectedRows([])});break;case"clone":const t={...this._originalDataContext,...this.formValues},s=()=>{this.grid.getEditController().cancelCurrentEdit(),this.grid.setActiveCell(0,0,!1)};this.executeOnSave(this.insertNewItemInDataView.bind(this,t),s,this.resetCurrentRowDataContext.bind(this),t);break;case"create":case"edit":default:if(this.grid.getEditController().commitCurrentEdit(),"function"==typeof(null===(e=this._options)||void 0===e?void 0:e.onSave)){const t=this.grid.getDataItem(this._lastActiveRowNumber);null===(i=this._options)||void 0===i||i.onSave(this.formValues,this.getCurrentRowSelections(),t)}}}insertNewItemInDataView(t){var e,i,o,s;const n=null!==(i=null===(e=this.dataView)||void 0===e?void 0:e.getItems())&&void 0!==i?i:[],l=Array.isArray(n)?n.length:0,d=null!==(o=this._options.insertNewId)&&void 0!==o?o:l+1;t[this.gridOptions.datasetIdPropertyName||"id"]=d,this.dataView.getItemById(d)?this.executeOnError({type:"error",code:"ITEM_ALREADY_EXIST",message:"The item object which you are trying to add already exist with the same Id:: "+d}):null===(s=this.gridService)||void 0===s||s.addItem(t,this._options.insertOptions)}parseText(t,e){return t.replace(/\{\{(.*?)\}\}/g,(t,i)=>void 0!==e[i]?e[i]:t)}resetCurrentRowDataContext(){const t=this.gridOptions.datasetIdPropertyName||"id";this.grid.getData().updateItem(this._originalDataContext[t],this._originalDataContext)}validateCompositeEditors(t){let e={valid:!0,msg:""};const i=this.grid.getCellEditor();return i&&(e=i.validate(t)),e}validateCurrentEditor(){const t=this.grid.getCellEditor();(null==t?void 0:t.validate)&&t.validate()}}}}]);
//# sourceMappingURL=vendors~c8763b32.e050e4a4478e578de1b5.bundle.map