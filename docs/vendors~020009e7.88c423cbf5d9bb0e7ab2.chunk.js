(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{H9V8:function(e,t,i){"use strict";var r,n=i("lBQj"),o=i("/CJ3"),s=i("wI58"),a=i("9tpB"),d=i("NozK"),l=i("kN1a"),u=i("sfpN"),c=i("aurelia-framework"),h=i("eyxJ"),p=i("v8Uj"),g=function(){function e(e,t){if(this.queryFnName=e,this.head=[],"string"==typeof t)this.alias=t;else if("object"==typeof t)this.filter(t);else{if(void 0===t&&2===arguments.length)throw new TypeError('You have passed undefined as Second argument to "Query"');if(void 0!==t)throw new TypeError('Second argument to "Query" should be an alias name(String) or filter arguments(Object). What was passed is: '+t)}}return e.prototype.filter=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var r=i[t];if("function"!=typeof e[r]){var n=this.getGraphQLValue(e[r]);"{}"!==n&&this.head.push(r+":"+n)}}return this},e.prototype.find=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!e||!Array.isArray(e)||0===e.length)throw new TypeError("find value can not be >>falsy<<");var i=1===e.length&&Array.isArray(e[0])?e[0]:e;return this.body=this.parceFind(i),this},e.prototype.setAlias=function(e){this.alias=e},e.prototype.toString=function(){if(void 0===this.body)throw new ReferenceError("return properties are not defined. use the 'find' function to defined them");return(this.alias?this.alias+":":"")+" "+this.queryFnName+" "+(this.head.length>0?"("+this.head.join(",")+")":"")+"  { "+this.body+" }"},e.prototype.parceFind=function(t){return t.map((function(i,r){var n=t[r];if(n instanceof e)return n.toString();if(Array.isArray(n)||"object"!=typeof n){if("string"==typeof n)return n;throw new RangeError("cannot handle Find value of "+n)}var o=Object.keys(n);if(1!==o.length)throw new RangeError("Alias objects should only have one value. was passed: "+JSON.stringify(n));var s=o[0],a=n[s];return Array.isArray(a)?new e(s).find(a):s+" : "+a+" "})).join(",")},e.prototype.getGraphQLValue=function(e){var t=this;return"string"==typeof e?e=JSON.stringify(e):Array.isArray(e)?e="["+(e=e.map((function(e){return t.getGraphQLValue(e)})).join())+"]":e instanceof Date?e=JSON.stringify(e):null!==e&&"object"==typeof e&&(e=this.objectToString(e)),e},e.prototype.objectToString=function(e){for(var t=[],i=0,r=Object.keys(e);i<r.length;i++){var n=r[i];"function"!=typeof e[n]&&t.push(n+":"+this.getGraphQLValue(e[n]))}return"{"+t.join()+"}"},e}(),f=function(){return(f=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},y=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},v=function(){function e(){this._currentFilters=[],this._currentSorters=[],this._datasetIdPropName="id",this.defaultPaginationOptions={first:25,offset:0}}return Object.defineProperty(e.prototype,"columnDefinitions",{get:function(){return this._columnDefinitions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t,i){this._grid=i,this.options=e||{datasetName:"",columnDefinitions:[]},this.pagination=t,this._datasetIdPropName=this._gridOptions.datasetIdPropertyName||"id",i&&i.getColumns&&(this._columnDefinitions=e&&e.columnDefinitions||i.getColumns())},e.prototype.buildQuery=function(){if(!this.options||!this.options.datasetName||!this._columnDefinitions&&!Array.isArray(this.options.columnDefinitions))throw new Error('GraphQL Service requires the "datasetName" property to properly build the GraphQL query');var e=this._columnDefinitions||this.options.columnDefinitions;e=e.filter((function(e){return!e.excludeFromQuery}));var t=new g("query"),i=new g(this.options.datasetName),r=new g("nodes"),n=[];if(e&&Array.isArray(e))for(var o=0,s=e;o<s.length;o++){var a=s[o];n.push(a.field),a.fields&&n.push.apply(n,a.fields)}-1===n.indexOf(this._datasetIdPropName)&&n.unshift(this._datasetIdPropName);var d=this.buildFilterQuery(n),l=[];if(!1!==this._gridOptions.enablePagination){if(this.options.isWithCursor){var u=new g("edges"),c=new g("pageInfo");c.find("hasNextPage","hasPreviousPage","endCursor","startCursor"),r.find(d),u.find(["cursor"]),l=["totalCount",r,c,u]}else r.find(d),l=["totalCount",r];i.find(l)}else i.find(d);var h={};if(!1!==this._gridOptions.enablePagination&&(h=f(f({},this.options.paginationOptions),{first:(this.options.paginationOptions&&this.options.paginationOptions.first?this.options.paginationOptions.first:this.pagination&&this.pagination.pageSize?this.pagination.pageSize:null)||this.defaultPaginationOptions.first}),this.options.isWithCursor||(h.offset=this.options.paginationOptions&&this.options.paginationOptions.hasOwnProperty("offset")?+this.options.paginationOptions.offset:0)),this.options.sortingOptions&&Array.isArray(this.options.sortingOptions)&&this.options.sortingOptions.length>0&&(h.orderBy=this.options.sortingOptions),this.options.filteringOptions&&Array.isArray(this.options.filteringOptions)&&this.options.filteringOptions.length>0&&(h.filterBy=this.options.filteringOptions),this.options.addLocaleIntoQuery&&(h.locale=this._gridOptions&&this._gridOptions.i18n&&this._gridOptions.i18n.getLocale()||"en"),this.options.extraQueryArguments)for(var p=0,y=this.options.extraQueryArguments;p<y.length;p++){var v=y[p];h[v.field]=v.value}i.filter(h),t.find(i);return this.trimDoubleQuotesOnEnumField(t.toString(),["direction:","field:","operator:"],this.options.keepArgumentFieldDoubleQuotes||!1)},e.prototype.buildFilterQuery=function(e){var t=function(e,i){void 0===e&&(e={});var r=i.shift();return e[r]=i.length?t(e[r],i):null,e},i=e.reduce((function(e,i){return t(e,i.split("."))}),{});return JSON.stringify(i).replace(/\"|\:|null/g,"").replace(/^\{/,"").replace(/\}$/,"")},e.prototype.clearFilters=function(){this._currentFilters=[],this.updateOptions({filteringOptions:[]})},e.prototype.clearSorters=function(){this._currentSorters=[],this.updateOptions({sortingOptions:[]})},e.prototype.getInitPaginationOptions=function(){var e=this.pagination?this.pagination.pageSize:25;return this.options.isWithCursor?{first:e}:{first:e,offset:0}},e.prototype.getDatasetName=function(){return this.options.datasetName||""},e.prototype.getCurrentFilters=function(){return this._currentFilters},e.prototype.getCurrentPagination=function(){return this._currentPagination},e.prototype.getCurrentSorters=function(){return this._currentSorters},e.prototype.resetPaginationOptions=function(){var e;this.options&&this.options.isWithCursor?e={after:"",before:void 0,last:void 0}:(e=this.options&&this.options.paginationOptions||this.getInitPaginationOptions()).offset=0,this._currentPagination={pageNumber:1,pageSize:e.first||20},!this._gridOptions||!this._gridOptions.enablePagination&&this._gridOptions.hasOwnProperty("enablePagination")||this.updateOptions({paginationOptions:e})},e.prototype.updateOptions=function(e){this.options=f(f({},this.options),e)},e.prototype.processOnFilterChanged=function(e,t){if(void 0===this._gridOptions.backendServiceApi)throw new Error('Something went wrong in the GraphqlService, "backendServiceApi" is not initialized');if(this._currentFilters=this.castFilterToColumnFilters(t.columnFilters),!t||!t.grid)throw new Error('Something went wrong when trying create the GraphQL Backend Service, it seems that "args" is not populated correctly');return this.updateFilters(t.columnFilters,!1),this.resetPaginationOptions(),this.buildQuery()},e.prototype.processOnPaginationChanged=function(e,t){var i=+(t.pageSize||(this.pagination?this.pagination.pageSize:20));return this.updatePagination(t.newPage,i),this.buildQuery()},e.prototype.processOnSortChanged=function(e,t){var i=t.multiColumnSort?t.sortCols:new Array({sortCol:t.sortCol,sortAsc:t.sortAsc});return this.updateSorters(i),this.buildQuery()},e.prototype.updateFilters=function(e,t){var i,r=[];t&&(this._currentFilters=this.castFilterToColumnFilters(e));var n=function(n){if(e.hasOwnProperty(n)){var s=e[n],a=void 0;if(!(a=t&&Array.isArray(o._columnDefinitions)?o._columnDefinitions.find((function(e){return e.id===s.columnId})):s.columnDef))throw new Error("[GraphQL Service]: Something went wrong in trying to get the column definition of the specified filter (or preset filters). Did you make a typo on the filter columnId?");var d=a.queryFieldFilter||a.queryField||a.field||a.name||"",l=s&&s.searchTerms||[],u=Array.isArray(l)&&1===l.length?l[0]:"";if(void 0===u&&(u=""),!d)throw new Error('GraphQL filter could not find the field name to query the search, your column definition must include a valid "field" or "name" (optionally you can also use the "queryfield" or "queryFieldFilter").');var c=(u=""+u).match(/^([<>!=\*]{0,2})(.*[^<>!=\*])([\*]?)$/),g=s.operator||(c?c[1]:"");i=c?c[2]:"";var f=c?c[3]:"*z"===g?"*":"";if(d&&""===i&&0===l.length)return"continue";if(Array.isArray(l)&&1===l.length&&"string"==typeof l[0]&&l[0].indexOf("..")>0&&(l=l[0].split(".."),g||(g=p.j.rangeExclusive)),"string"==typeof i&&(i=i.replace("'","''"),"*"!==g&&"a*"!==g&&"*z"!==g&&"*"!==f||(g="*"===g||"*z"===g?"EndsWith":"StartsWith")),!g&&a.filter&&a.filter.operator&&(g=a.filter.operator),l&&l.length>1&&("IN"===g||"NIN"===g||"NOT_IN"===g))i=l.join(",");else if(l&&2===l.length&&(!g||g===p.j.rangeExclusive||g===p.j.rangeInclusive))return g||(g=p.j.rangeExclusive),r.push({field:d,operator:g===p.j.rangeInclusive?"GE":"GT",value:l[0]}),r.push({field:d,operator:g===p.j.rangeInclusive?"LE":"LT",value:l[1]}),"continue";g||(g=Object(h.o)(a.type||p.e.string)),r.push({field:d,operator:Object(h.q)(g),value:i})}},o=this;for(var s in e)n(s);this.updateOptions({filteringOptions:r})},e.prototype.updatePagination=function(e,t){var i;this._currentPagination={pageNumber:e,pageSize:t},i=this.options&&this.options.isWithCursor?{first:t}:{first:t,offset:e>1?(e-1)*t:0},this.updateOptions({paginationOptions:i})},e.prototype.updateSorters=function(e,t){var i=this,r=[],n=[];if(!e&&t){(r=t).forEach((function(e){return e.direction=e.direction.toUpperCase()}));var o=r.map((function(e){var t=i._columnDefinitions.find((function(t){return t.id===e.columnId}));return n.push({field:t?(t.queryFieldSorter||t.queryField||t.field)+"":e.columnId+"",direction:e.direction}),t?{columnId:e.columnId,sortAsc:e.direction.toUpperCase()===p.k.ASC}:null}));Array.isArray(o)&&this._grid.setSortColumns(o.filter((function(e){return e})))}else if(e&&!t&&Array.isArray(e)&&e.length>0)for(var s=0,a=e;s<a.length;s++){var d=a[s];if(d&&d.sortCol){r.push({columnId:d.sortCol.id+"",direction:d.sortAsc?p.k.ASC:p.k.DESC});var l=(d.sortCol.queryFieldSorter||d.sortCol.queryField||d.sortCol.field||"")+"";l&&n.push({field:l,direction:d.sortAsc?p.k.ASC:p.k.DESC})}}this._currentSorters=r,this.updateOptions({sortingOptions:n})},e.prototype.trimDoubleQuotesOnEnumField=function(e,t,i){var r=t.join('s?((field:s*)?".*?")|'),n=new RegExp(r+='s?((field:s*)?".*?")',"g");return e.replace(n,(function(e,t,r){var n=!0;return e.startsWith("field:")&&i&&(n=!1),n?e.replace(/"/g,""):e}))},e.prototype.castFilterToColumnFilters=function(e){var t="object"==typeof e?Object.keys(e).map((function(t){return e[t]})):e;return Array.isArray(t)?t.map((function(e){var t={columnId:e.columnId||""};return e.operator&&(t.operator=e.operator),Array.isArray(e.searchTerms)&&(t.searchTerms=e.searchTerms),t})):[]},e=y([Object(c.o)(!0)],e)}(),m=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},w=function(){function e(){this._eventHandler=new Slick.EventHandler}return Object.defineProperty(e.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),e.prototype.bindOnCellChange=function(e,t){this._eventHandler.subscribe(e.onCellChange,(function(i,r){if(i&&r&&e&&void 0!==r.cell&&e.getColumns&&e.getDataItem){var n=e.getColumns()[r.cell];if("function"==typeof n.onCellChange){var o={row:r.row,cell:r.cell,dataView:t,grid:e,columnDef:n,dataContext:e.getDataItem(r.row)};n.onCellChange(i,o)}}}))},e.prototype.bindOnClick=function(e,t){this._eventHandler.subscribe(e.onClick,(function(i,r){if(i&&r&&e&&void 0!==r.cell&&e.getColumns&&e.getDataItem){var n=e&&e.getColumns&&e.getColumns()[r.cell],o=e&&e.getOptions&&e.getOptions()||{};if(o.enableCellNavigation&&(!o.editable||o.editable&&o.autoCommitEdit)&&e.setActiveCell(r.row,r.cell),"function"==typeof n.onCellClick){var s={row:r.row,cell:r.cell,dataView:t,grid:e,columnDef:n,dataContext:e.getDataItem(r.row)};n.onCellClick(i,s)}}}))},e.prototype.dispose=function(){this._eventHandler.unsubscribeAll()},e=m([Object(c.o)(!0)],e)}(),_=i("aurelia-event-aggregator"),b=i("XaGS"),S=i("wESz"),C=i("Kt3C"),O=i("IlDx"),I=function(){return(I=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},R=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},A=function(){function e(e,t,i,r,n){this.pluginEa=e,this.extensionService=t,this.filterService=i,this.sharedService=r,this.sortService=n,this._eventHandler=new Slick.EventHandler,this._columns=[],this._currentColumns=[],this._subscriptions=[],this._selectedRowDataContextIds=[],this._wasRecheckedAfterPageChange=!0}return Object.defineProperty(e.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedRowDataContextIds",{get:function(){return this._selectedRowDataContextIds},set:function(e){this._selectedRowDataContextIds=e},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){this._grid=e,this._dataView=t,this.subscribeToAllGridChanges(e)},e.prototype.dispose=function(){this._currentColumns=[],this._columns=[],this._eventHandler.unsubscribeAll(),this._subscriptions=Object(h.e)(this._subscriptions)},e.prototype.getCurrentGridState=function(){var e={columns:this.getCurrentColumns(),filters:this.getCurrentFilters(),sorters:this.getCurrentSorters()},t=this.getCurrentPagination();t&&(e.pagination=t);var i=this.getCurrentRowSelections();return i&&(e.rowSelection=i),e},e.prototype.getColumns=function(){return this._columns},e.prototype.getAssociatedCurrentColumns=function(e){var t=[];return e&&Array.isArray(e)&&e.forEach((function(e,i){e&&e.id&&t.push({columnId:e.id,cssClass:e.cssClass||"",headerCssClass:e.headerCssClass||"",width:e.width||0})})),this._currentColumns=t,t},e.prototype.getAssociatedGridColumns=function(e,t){var i=[],r=e.getColumns();return t&&Array.isArray(t)&&t.forEach((function(e,t){var n=r.find((function(t){return t.id===e.columnId}));n&&n.id&&i.push(I(I({},n),{cssClass:e.cssClass,headerCssClass:e.headerCssClass,width:e.width}))})),this._columns=i,i},e.prototype.getCurrentColumns=function(){return this._currentColumns&&Array.isArray(this._currentColumns)&&this._currentColumns.length>0?this._currentColumns:this.getAssociatedCurrentColumns(this._grid.getColumns())},e.prototype.getCurrentFilters=function(){if(this._gridOptions&&this._gridOptions.backendServiceApi){var e=this._gridOptions.backendServiceApi.service;if(e&&e.getCurrentFilters)return e.getCurrentFilters()}else if(this.filterService&&this.filterService.getCurrentLocalFilters)return this.filterService.getCurrentLocalFilters();return null},e.prototype.getCurrentPagination=function(){if(this._gridOptions.enablePagination){if(!this._gridOptions||!this._gridOptions.backendServiceApi)return this.sharedService.currentPagination;var e=this._gridOptions.backendServiceApi.service;if(e&&e.getCurrentPagination)return e.getCurrentPagination()}return null},e.prototype.getCurrentRowSelections=function(){if(this._grid&&this._gridOptions&&this._dataView){var e=this._grid.getSelectionModel();if((this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&e&&this._grid.getSelectedRows&&this._dataView.mapRowsToIds){var t=[],i=[];return this._gridOptions.enablePagination?(t=this._dataView.mapIdsToRows(this._selectedRowDataContextIds||[]),i=this._selectedRowDataContextIds):(t=this._grid.getSelectedRows()||[],i=this._dataView.mapRowsToIds(t)||[]),{gridRowIndexes:t,dataContextIds:i}}}return null},e.prototype.getCurrentSorters=function(){if(this._gridOptions&&this._gridOptions.backendServiceApi){var e=this._gridOptions.backendServiceApi.service;if(e&&e.getCurrentSorters)return e.getCurrentSorters()}else if(this.sortService&&this.sortService.getCurrentLocalSorters)return this.sortService.getCurrentLocalSorters();return null},e.prototype.needToPreserveRowSelection=function(){var e=!1;if(this._gridOptions&&this._gridOptions.dataView&&this._gridOptions.dataView.hasOwnProperty("syncGridSelection")){var t=this._gridOptions.dataView.syncGridSelection;"boolean"==typeof t?e=this._gridOptions.dataView.syncGridSelection:"object"==typeof t&&(e=t.preserveHidden),e&&this._gridOptions.backendServiceApi&&this._gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(e=this._gridOptions.dataView.syncGridSelectionWithBackendService)}return e},e.prototype.resetColumns=function(e){var t=e||this._columns,i=this.getAssociatedCurrentColumns(t);this.pluginEa.publish("gridStateService:changed",{change:{newValues:i,type:p.h.columns},gridState:this.getCurrentGridState()})},e.prototype.resetRowSelectionWhenRequired=function(){if(!this.needToPreserveRowSelection()&&this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector){var e=this.extensionService&&this.extensionService.getExtensionByName&&this.extensionService.getExtensionByName(p.d.rowSelection);e&&e.instance&&this._grid.setSelectedRows([])}},e.prototype.subscribeToAllGridChanges=function(e){var t=this;this._subscriptions.push(this.pluginEa.subscribe("filterService:filterChanged",(function(e){t.resetRowSelectionWhenRequired(),t.pluginEa.publish("gridStateService:changed",{change:{newValues:e,type:p.h.filter},gridState:t.getCurrentGridState()})}))),this._subscriptions.push(this.pluginEa.subscribe("filterService:filterCleared",(function(){t.resetRowSelectionWhenRequired(),t.pluginEa.publish("gridStateService:changed",{change:{newValues:[],type:p.h.filter},gridState:t.getCurrentGridState()})}))),this._subscriptions.push(this.pluginEa.subscribe("sortService:sortChanged",(function(e){t.resetRowSelectionWhenRequired(),t.pluginEa.publish("gridStateService:changed",{change:{newValues:e,type:p.h.sorter},gridState:t.getCurrentGridState()})}))),this._subscriptions.push(this.pluginEa.subscribe("sortService:sortCleared",(function(){t.resetRowSelectionWhenRequired(),t.pluginEa.publish("gridStateService:changed",{change:{newValues:[],type:p.h.sorter},gridState:t.getCurrentGridState()})}))),this.bindExtensionAddonEventToGridStateChange(p.d.columnPicker,"onColumnsChanged"),this.bindExtensionAddonEventToGridStateChange(p.d.gridMenu,"onColumnsChanged"),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsReordered",e),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsResized",e),(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&this.bindSlickGridRowSelectionToGridStateChange(),this._subscriptions.push(this.pluginEa.subscribe("headerMenu:onColumnsChanged",(function(e){var i=t.getAssociatedCurrentColumns(e);t.pluginEa.publish("gridStateService:changed",{change:{newValues:i,type:p.h.columns},gridState:t.getCurrentGridState()})})))},e.prototype.bindExtensionAddonEventToGridStateChange=function(e,t){var i=this,r=this.extensionService&&this.extensionService.getExtensionByName&&this.extensionService.getExtensionByName(e),n=r&&r.instance&&r.instance[t];n&&"function"==typeof n.subscribe&&this._eventHandler.subscribe(n,(function(e,t){var r=t&&t.columns,n=i.getAssociatedCurrentColumns(r);i.pluginEa.publish("gridStateService:changed",{change:{newValues:n,type:p.h.columns},gridState:i.getCurrentGridState()})}))},e.prototype.bindSlickGridColumnChangeEventToGridStateChange=function(e,t){var i=this,r=t&&t[e];r&&"function"==typeof r.subscribe&&this._eventHandler.subscribe(r,(function(){var e=t.getColumns(),r=i.getAssociatedCurrentColumns(e);i.pluginEa.publish("gridStateService:changed",{change:{newValues:r,type:p.h.columns},gridState:i.getCurrentGridState()})}))},e.prototype.bindSlickGridRowSelectionToGridStateChange=function(){var e=this;this._gridOptions&&this._gridOptions.enablePagination?this.bindSlickGridRowSelectionWithPaginationToGridStateChange():this._eventHandler.subscribe(this._grid.onSelectedRowsChanged,(function(){var t=e._grid.getSelectedRows();e._selectedRowDataContextIds=e._dataView.mapRowsToIds(t);var i={gridRowIndexes:t,dataContextIds:e._selectedRowDataContextIds};e.pluginEa.publish("gridStateService:changed",{change:{newValues:i,type:p.h.rowSelection},gridState:e.getCurrentGridState()})}))},e.prototype.bindSlickGridRowSelectionWithPaginationToGridStateChange=function(){var e=this;this._grid&&this._gridOptions&&this._dataView&&(this._eventHandler.subscribe(this._dataView.onBeforePagingInfoChanged,(function(){e._wasRecheckedAfterPageChange=!1})),this._eventHandler.subscribe(this._dataView.onPagingInfoChanged,(function(){setTimeout((function(){var t=e._dataView.mapIdsToRows(e._selectedRowDataContextIds||[]),i=e._grid.getSelectedRows();b(t,i)||e._grid.setSelectedRows(t)}))})),this._eventHandler.subscribe(this._grid.onSelectedRowsChanged,(function(t,i){if(Array.isArray(i.rows)&&Array.isArray(i.previousSelectedRows)){var r=i.rows,n=i.previousSelectedRows,o=r.filter((function(e){return n.indexOf(e)<0})),s=n.filter((function(e){return r.indexOf(e)<0}));if(e._wasRecheckedAfterPageChange&&s.length>0)(e._dataView.mapRowsToIds(s)||[]).forEach((function(t){Array.isArray(e._selectedRowDataContextIds)&&e._selectedRowDataContextIds.splice(e._selectedRowDataContextIds.indexOf(t),1)}));if(o.length>0)(e._dataView.mapRowsToIds(o)||[]).forEach((function(t){-1===e._selectedRowDataContextIds.indexOf(t)&&e._selectedRowDataContextIds.push(t)}));e._wasRecheckedAfterPageChange=!0;var a=e._dataView.mapIdsToRows(e._selectedRowDataContextIds||[]),d=e._grid.getSelectedRows();b(a,d)||e._grid.setSelectedRows(a);var l={gridRowIndexes:e._grid.getSelectedRows(),dataContextIds:e._selectedRowDataContextIds};e.pluginEa.publish("gridStateService:changed",{change:{newValues:l,type:p.h.rowSelection},gridState:e.getCurrentGridState()})}})))},e=R([Object(c.o)(!0),Object(c.n)(O.a,l.a,u.a,S.a,C.a)],e)}(),E=function(){return(E=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},F=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},P={triggerEvent:!0},j={highlightRow:!0,position:"top",resortGrid:!1,selectRow:!1,triggerEvent:!0},T={highlightRow:!0,selectRow:!1,scrollRowIntoView:!1,triggerEvent:!0},D=function(){function e(e,t,i,r,n,o){this.globalEa=e,this.pluginEa=t,this.extensionService=i,this.filterService=r,this.gridStateService=n,this.sortService=o,this._aureliaEventPrefix="asg"}return Object.defineProperty(e.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){this._grid=e,this._dataView=t,this._aureliaEventPrefix=this._gridOptions&&this._gridOptions.defaultAureliaEventPrefix?this._gridOptions.defaultAureliaEventPrefix:"asg"},e.prototype.clearAllFiltersAndSorts=function(){this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting(!1),this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters()},e.prototype.getColumnFromEventArguments=function(e){if(!(e&&e.grid&&e.grid.getColumns&&e.grid.getDataItem))throw new Error("To get the column definition and data, we need to have these arguments passed as objects (row, cell, grid)");return{row:e.row,cell:e.cell,columnDef:e.grid.getColumns()[e.cell],dataContext:e.grid.getDataItem(e.row),dataView:this._dataView,grid:this._grid}},e.prototype.getDataItemByRowNumber=function(e){if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('We could not find SlickGrid Grid object or it\'s "getDataItem" method');return this._grid.getDataItem(e)},e.prototype.getItemRowMetadataToHighlight=function(e){var t=this;return function(i){var r=t._dataView.getItem(i),n={cssClasses:""};return"function"==typeof e&&(n=e(i)),n||(n={cssClasses:""}),r&&r._dirty&&(n.cssClasses=(n&&n.cssClasses||"")+" dirty"),r&&r.rowClass&&n&&(n.cssClasses+=" "+r.rowClass,n.cssClasses+=" row"+i),n}},e.prototype.getDataItemByRowIndex=function(e){if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('We could not find SlickGrid Grid object and/or "getDataItem" method');return this._grid.getDataItem(e)},e.prototype.getDataItemByRowIndexes=function(e){var t=this;if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('We could not find SlickGrid Grid object and/or "getDataItem" method');var i=[];return Array.isArray(e)&&e.forEach((function(e){i.push(t._grid.getDataItem(e))})),i},e.prototype.getSelectedRows=function(){if(!this._grid||"function"!=typeof this._grid.getSelectedRows)throw new Error('We could not find SlickGrid Grid object and/or "getSelectedRows" method');return this._grid.getSelectedRows()},e.prototype.getSelectedRowsDataItem=function(){if(!this._grid||"function"!=typeof this._grid.getSelectedRows)throw new Error('We could not find SlickGrid Grid object and/or "getSelectedRows" method');var e=this._grid.getSelectedRows();return this.getDataItemByRowIndexes(e)},e.prototype.highlightRow=function(e,t,i){var r=this;if(void 0===t&&(t=1500),void 0===i&&(i=300),!this._grid.getSelectionModel()&&Slick&&Slick.RowSelectionModel){var n=new Slick.RowSelectionModel(this._gridOptions.rowSelectionOptions||{});this._grid.setSelectionModel(n)}Array.isArray(e)?e.forEach((function(e){return r.highlightRowByMetadata(e,t,i)})):this.highlightRowByMetadata(e,t,i)},e.prototype.highlightRowByMetadata=function(e,t,i){var n=this;void 0===t&&(t=1500),void 0===i&&(i=300),this._dataView.getItemMetadata=this.getItemRowMetadataToHighlight(this._dataView.getItemMetadata);var o=this._dataView.getItem(e);o&&o.id&&(o.rowClass="highlight",this._dataView.updateItem(o.id,o),this.renderGrid(),clearTimeout(r),r=setTimeout((function(){o.rowClass="highlight-end",n._dataView.updateItem(o.id,o),n.renderGrid()}),i),setTimeout((function(){o&&o.id&&(delete o.rowClass,void 0!==n._dataView.getIdxById(o.id)&&(n._dataView.updateItem(o.id,o),n.renderGrid()))}),t+i))},e.prototype.setSelectedRow=function(e){this._grid&&this._grid.setSelectedRows&&this._grid.setSelectedRows([e])},e.prototype.setSelectedRows=function(e){this._grid&&this._grid.setSelectedRows&&this._grid.setSelectedRows(e)},e.prototype.renderGrid=function(){this._grid&&"function"==typeof this._grid.invalidate&&(this._grid.invalidate(),this._grid.render())},e.prototype.resetGrid=function(e){if(this._grid&&this._dataView){var t=this.extensionService.getAllColumns();Array.isArray(t)&&t.length>0&&(this._grid.setColumns(t),this._gridOptions&&this._gridOptions.enableAutoSizeColumns&&this._grid.autosizeColumns(),this.gridStateService.resetColumns(e))}this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters(),this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting()},e.prototype.addItemToDatagrid=function(e,t,i,r,n){return void 0===t&&(t=!0),void 0===i&&(i=!1),void 0===r&&(r=!0),void 0===n&&(n=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "addItem" method since "addItemToDatagrid" will be deprecated in the future.'),this.addItem(e,{highlightRow:t,resortGrid:i,triggerEvent:r,selectRow:n})},e.prototype.addItemsToDatagrid=function(e,t,i,r,n){return void 0===t&&(t=!0),void 0===i&&(i=!1),void 0===r&&(r=!0),void 0===n&&(n=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "addItems" method since "addItemsToDatagrid" will be deprecated in the future.'),this.addItems(e,{highlightRow:t,resortGrid:i,triggerEvent:r,selectRow:n})},e.prototype.addItem=function(e,t){if(t=E(E({},j),t),!this._grid||!this._gridOptions||!this._dataView)throw new Error("We could not find SlickGrid Grid, DataView objects");if(!e||!e.hasOwnProperty("id"))throw new Error('Adding an item requires the item to include an "id" property');t&&"bottom"===t.position?this._dataView.addItem(e):this._dataView.insertItem(0,e);var i=0;return t.resortGrid?(this._dataView.reSort(),i=this._dataView.getRowById(e.id)):(i=t&&"bottom"===t.position?this._dataView.getRowById(e.id):0,this._grid.scrollRowIntoView(i)),t.highlightRow&&this.highlightRow(i),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(i),t.triggerEvent&&(this.pluginEa.publish("gridService:onItemAdded",e),this.globalEa.publish(this._aureliaEventPrefix+":on-item-added",e)),i},e.prototype.addItems=function(e,t){var i=this;t=E(E({},j),t);var r=[];return Array.isArray(e)?(e.forEach((function(e){return i.addItem(e,E(E({},t),{highlightRow:!1,resortGrid:!1,triggerEvent:!1,selectRow:!1}))})),t.resortGrid&&this._dataView.reSort(),t&&"bottom"===t.position?this._grid.navigateBottom():this._grid.navigateTop(),e.forEach((function(e){return r.push(i._dataView.getRowById(e.id))})),t.highlightRow&&this.highlightRow(r),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(r),t.triggerEvent&&(this.pluginEa.publish("gridService:onItemAdded",e),this.globalEa.publish(this._aureliaEventPrefix+":on-item-added",e)),r):[this.addItem(e,t)]},e.prototype.deleteDataGridItem=function(e,t){void 0===t&&(t=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "deleteItem" method since "deleteDataGridItem" will be deprecated in the future.'),this.deleteItem(e,{triggerEvent:t})},e.prototype.deleteDataGridItems=function(e,t){void 0===t&&(t=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "deleteItems" method since "deleteDataGridItems" will be deprecated in the future.'),this.deleteItems(e,{triggerEvent:t})},e.prototype.deleteDataGridItemById=function(e,t){void 0===t&&(t=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "deleteItemById" method since "deleteDataGridItemById" will be deprecated in the future.'),this.deleteItemById(e,{triggerEvent:t})},e.prototype.deleteDataGridItemByIds=function(e,t){void 0===t&&(t=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "deleteItemByIds" method since "deleteDataGridItemByIds" will be deprecated in the future.'),this.deleteItemByIds(e,{triggerEvent:t})},e.prototype.deleteItem=function(e,t){if(t=E(E({},P),t),!e||!e.hasOwnProperty("id"))throw new Error('Deleting an item requires the item to include an "id" property');return this.deleteItemById(e.id,t)},e.prototype.deleteItems=function(e,t){var i=this;if(t=E(E({},P),t),!Array.isArray(e))return this.deleteItem(e,t),[e.id];var r=[];return e.forEach((function(e){e&&void 0!==e.id&&r.push(e.id),i.deleteItem(e,E(E({},t),{triggerEvent:!1}))})),t.triggerEvent&&(this.pluginEa.publish("gridService:onItemDeleted",e),this.globalEa.publish(this._aureliaEventPrefix+":on-item-deleted",e)),r},e.prototype.deleteItemById=function(e,t){if(t=E(E({},P),t),null==e)throw new Error('Cannot delete a row without a valid "id"');return!(this.gridStateService&&this.gridStateService.needToPreserveRowSelection()||!1)&&this._grid&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows([]),this._dataView.deleteItem(e),t.triggerEvent&&(this.pluginEa.publish("gridService:onItemDeleted",e),this.globalEa.publish(this._aureliaEventPrefix+":on-item-deleted",e)),e},e.prototype.deleteItemByIds=function(e,t){if(t=E(E({},P),t),Array.isArray(e)){for(var i=0;i<e.length;i++)null!==e[i]&&this.deleteItemById(e[i],{triggerEvent:!1});return t.triggerEvent&&(this.pluginEa.publish("gridService:onItemDeleted",e),this.globalEa.publish(this._aureliaEventPrefix+":on-item-deleted",e)),e}return[]},e.prototype.updateDataGridItem=function(e,t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "updateItem" method since "updateDataGridItem" will be deprecated in the future.'),this.updateItem(e,{highlightRow:t,triggerEvent:i,selectRow:r})},e.prototype.updateDataGridItems=function(e,t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "updateItems" method since "updateDataGridItems" will be deprecated in the future.'),this.updateItems(e,{highlightRow:t,triggerEvent:i,selectRow:r})},e.prototype.updateDataGridItemById=function(e,t,i,r,n){return void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===n&&(n=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "updateItemById" method since "updateDataGridItemById" will be deprecated in the future.'),this.updateItemById(e,t,{highlightRow:i,triggerEvent:r,selectRow:n})},e.prototype.updateItem=function(e,t){t=E(E({},T),t);var i=e&&e.hasOwnProperty("id")?e.id:void 0;if(void 0===i)throw new Error('Calling Update of an item requires the item to include an "id" property');return this.updateItemById(i,e,t)},e.prototype.updateItems=function(e,t){var i=this;if(t=E(E({},T),t),!Array.isArray(e))return[this.updateItem(e,t)];var r=[];return e.forEach((function(e){r.push(i.updateItem(e,E(E({},t),{highlightRow:!1,selectRow:!1,triggerEvent:!1})))})),t.highlightRow&&this.highlightRow(r),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(r),t.triggerEvent&&(this.pluginEa.publish("gridService:onItemUpdated",e),this.globalEa.publish(this._aureliaEventPrefix+":on-item-updated",e)),r},e.prototype.updateItemById=function(e,t,i){if(i=E(E({},T),i),void 0===e)throw new Error('Cannot update a row without a valid "id"');var r=this._dataView.getRowById(e);if(!t||void 0===r)throw new Error("The item to update in the grid was not found with id: "+e);return void 0!==this._dataView.getIdxById(e)&&(this._dataView.updateItem(e,t),this._grid.updateRow(r),i.scrollRowIntoView&&this._grid.scrollRowIntoView(r),i.highlightRow&&this.highlightRow(r),i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(r),i.triggerEvent&&(this.pluginEa.publish("gridService:onItemUpdated",t),this.globalEa.publish(this._aureliaEventPrefix+":on-item-updated",t))),r},e.prototype.upsertItem=function(e,t){t=E(E({},j),t);var i=e&&e.hasOwnProperty("id")?e.id:void 0;if(void 0===i)throw new Error('Calling Upsert of an item requires the item to include an "id" property');return this.upsertItemById(i,e,t)},e.prototype.upsertItems=function(e,t){var i=this;if(t=E(E({},j),t),!Array.isArray(e))return[this.upsertItem(e,t)];var r=[];e.forEach((function(e){r.push(i.upsertItem(e,E(E({},t),{highlightRow:!1,resortGrid:!1,selectRow:!1,triggerEvent:!1})))}));var n=r.map((function(e){return void 0!==e.added?e.added:e.updated}));if(t.highlightRow&&this.highlightRow(n),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(n),t.triggerEvent){this.pluginEa.publish("gridService:onItemUpserted",e),this.globalEa.publish(this._aureliaEventPrefix+":on-item-upserted",e);var o=r.filter((function(e){return void 0!==e.added}));Array.isArray(o)&&o.length>0&&(this.pluginEa.publish("gridService:onItemAdded",o),this.globalEa.publish(this._aureliaEventPrefix+":on-item-added",o));var s=r.filter((function(e){return void 0!==e.updated}));Array.isArray(s)&&s.length>0&&(this.pluginEa.publish("gridService:onItemUpdated",s),this.globalEa.publish(this._aureliaEventPrefix+":on-item-updated",s))}return r},e.prototype.upsertItemById=function(e,t,i){var r,n,o=!1;if(i=E(E({},j),i),void 0===e)throw new Error('Calling Upsert of an item requires the item to include a valid and unique "id" property');if(void 0===this._dataView.getRowById(e)?(r=this.addItem(t,i),o=!0):(n=this.updateItem(t,{highlightRow:i.highlightRow,selectRow:i.selectRow,triggerEvent:i.triggerEvent}),o=!1),i.triggerEvent){var s=o?"onItemAdded":"onItemUpdated";this.pluginEa.publish("gridService:"+s,t),this.pluginEa.publish("gridService:onItemUpserted",t),this.globalEa.publish(this._aureliaEventPrefix+":"+Object(h.y)(s),t),this.globalEa.publish(this._aureliaEventPrefix+":on-item-upserted",t)}return{added:r,updated:n}},e=F([Object(c.o)(!0),Object(c.n)(_.a,O.a,l.a,u.a,A,C.a)],e)}(),k=i("Wgxv"),G=function(){return(G=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},x=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},V=function(){function e(){this._currentFilters=[],this._currentSorters=[],this.defaultOptions={top:25,orderBy:"",caseType:p.a.pascalCase},this._odataService=new k.a}return Object.defineProperty(e.prototype,"columnDefinitions",{get:function(){return this._columnDefinitions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"odataService",{get:function(){return this._odataService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t,i){this._grid=i;var r=G(G({},this.defaultOptions),e);if(this._gridOptions&&!this._gridOptions.enablePagination)this._odataService.options=G(G({},r),{top:void 0}),this._currentPagination=null;else{var n=t&&t.pageSize?t.pageSize:this.defaultOptions.top;this._odataService.options=G(G({},r),{top:n}),this._currentPagination={pageNumber:1,pageSize:this._odataService.options.top||this.defaultOptions.top||20}}this.options=this._odataService.options,this.pagination=t,i&&i.getColumns&&(this._columnDefinitions=e&&e.columnDefinitions||i.getColumns(),this._columnDefinitions=this._columnDefinitions.filter((function(e){return!e.excludeFromQuery})))},e.prototype.buildQuery=function(){return this._odataService.buildQuery()},e.prototype.clearFilters=function(){this._currentFilters=[],this.updateFilters([])},e.prototype.clearSorters=function(){this._currentSorters=[],this.updateSorters([])},e.prototype.updateOptions=function(e){this.options=G(G({},this.options),e),this._odataService.options=this.options},e.prototype.removeColumnFilter=function(e){this._odataService.removeColumnFilter(e)},e.prototype.getCurrentFilters=function(){return this._currentFilters},e.prototype.getCurrentPagination=function(){return this._currentPagination},e.prototype.getCurrentSorters=function(){return this._currentSorters},e.prototype.mapOdataOperator=function(e){var t="";switch(e){case"<":t="lt";break;case"<=":t="le";break;case">":t="gt";break;case">=":t="ge";break;case"<>":case"!=":t="ne";break;case"=":case"==":default:t="eq"}return t},e.prototype.resetPaginationOptions=function(){this._odataService.updateOptions({skip:0})},e.prototype.saveColumnFilter=function(e,t,i){this._odataService.saveColumnFilter(e,t,i)},e.prototype.processOnFilterChanged=function(e,t){if(void 0===this._gridOptions.backendServiceApi)throw new Error('Something went wrong in the GridOdataService, "backendServiceApi" is not initialized');if(this._currentFilters=this.castFilterToColumnFilters(t.columnFilters),!t||!t.grid)throw new Error('Something went wrong when trying create the GridOdataService, it seems that "args" is not populated correctly');return this.updateFilters(t.columnFilters),this.resetPaginationOptions(),this._odataService.buildQuery()},e.prototype.processOnPaginationChanged=function(e,t){var i=+(t.pageSize||(this.pagination?this.pagination.pageSize:20));return this.updatePagination(t.newPage,i),this._odataService.buildQuery()},e.prototype.processOnSortChanged=function(e,t){var i=t.multiColumnSort?t.sortCols:new Array({sortCol:t.sortCol,sortAsc:t.sortAsc});return this.updateSorters(i),this._odataService.buildQuery()},e.prototype.updateFilters=function(e,t){var i="",r=[],n=this._odataService&&this._odataService.options&&this._odataService.options.version||2;t&&(this._currentFilters=this.castFilterToColumnFilters(e));var o=function(o){if(e.hasOwnProperty(o)){var a=e[o],d=void 0;if(!(d=t&&Array.isArray(s._columnDefinitions)?s._columnDefinitions.find((function(e){return e.id===a.columnId})):a.columnDef))throw new Error("[GridOData Service]: Something went wrong in trying to get the column definition of the specified filter (or preset filters). Did you make a typo on the filter columnId?");var l=d.queryFieldFilter||d.queryField||d.field||d.name||"",u=d.type||p.e.string,c=(a?a.searchTerms:null)||[],g=Array.isArray(c)&&1===c.length?c[0]:"";if(void 0===g&&(g=""),!l)throw new Error('GridOData filter could not find the field name to query the search, your column definition must include a valid "field" or "name" (optionally you can also use the "queryfield" or "queryFieldFilter").');var f=(g=""+g).match(/^([<>!=\*]{0,2})(.*[^<>!=\*])([\*]?)$/),y=a.operator||(f?f[1]:""),v=f?f[2]:"",m=f?f[3]:"*z"===y?"*":"",w=a.bypassBackendQuery||!1;if(l&&""===v&&c.length<=1)return s.removeColumnFilter(l),"continue";if(Array.isArray(c)&&1===c.length&&"string"==typeof c[0]&&c[0].indexOf("..")>0&&(c=c[0].split(".."),y||(y=p.j.rangeExclusive)),v=v.replace("'","''"),v=encodeURIComponent(v),!y&&d.filter&&(y=d.filter.operator),y||(y=Object(h.o)(d.type||p.e.string)),w)l&&s.saveColumnFilter(l,g,c);else{if(i="",s._odataService.options.caseType===p.a.pascalCase&&(l=Object(h.w)(l||"")),u===p.e.date)i=s.filterBySearchDate(l,y,c,n);else if(c&&c.length>1&&("IN"===y||"NIN"===y||"NOTIN"===y||"NOT IN"===y||"NOT_IN"===y)){var _=[];if("IN"===y){for(var b=0,S=c.length;b<S;b++)if(u===p.e.string){var C=c[b].replace("'","''");_.push(l+" eq '"+C+"'")}else _.push(l+" eq "+c[b]);"string"==typeof(i=_.join(" or "))&&"("===i[0]&&")"===i.slice(-1)||(i="("+i+")")}else{for(var O=0,I=c.length;O<I;O++){C=c[O].replace("'","''");_.push(l+" ne '"+C+"'")}"string"==typeof(i=_.join(" and "))&&"("===i[0]&&")"===i.slice(-1)||(i="("+i+")")}}else"*"===y||"a*"===y||"*z"===y||"*"===m?i="*"===y||"*z"===y?"endswith("+l+", '"+v+"')":"startswith("+l+", '"+v+"')":u===p.e.string?""===y||y===p.j.contains||y===p.j.notContains?(i=s.odataQueryVersionWrapper("substring",n,l,v),y===p.j.notContains&&(i="not "+i)):i=y===p.j.rangeExclusive||y===p.j.rangeInclusive?s.filterBySearchTermRange(l,y,c):l+" "+s.mapOdataOperator(y)+" '"+v+"'":y===p.j.rangeExclusive||y===p.j.rangeInclusive?i=s.filterBySearchTermRange(l,y,c):(v=u===p.e.number||u===p.e.boolean?v:"'"+v+"'",i=l+" "+s.mapOdataOperator(y)+" "+v);""!==i&&(r.push(i.trim()),s.saveColumnFilter(l||"",g,v))}}},s=this;for(var a in e)o(a);this._odataService.updateOptions({filter:r.length>0?r.join(" and "):"",skip:void 0})},e.prototype.updatePagination=function(e,t){this._currentPagination={pageNumber:e,pageSize:t},!this._gridOptions||!this._gridOptions.enablePagination&&this._gridOptions.hasOwnProperty("enablePagination")||this._odataService.updateOptions({top:t,skip:(e-1)*t})},e.prototype.updateSorters=function(e,t){var i=this,r=[],n=[];if(!e&&t){(r=t).forEach((function(e){return e.direction=e.direction.toLowerCase()}));var o=r.map((function(e){var t=i._columnDefinitions.find((function(t){return t.id===e.columnId}));return n.push({field:t?(t.queryFieldSorter||t.queryField||t.field)+"":e.columnId+"",direction:e.direction}),t?{columnId:e.columnId,sortAsc:e.direction.toUpperCase()===p.k.ASC}:null}));Array.isArray(o)&&this._grid.setSortColumns(o)}else if(e&&!t)if(e&&0===e.length);else if(e)for(var s=0,a=e;s<a.length;s++){var d=a[s];if(d.sortCol){var l=(d.sortCol.queryFieldSorter||d.sortCol.queryField||d.sortCol.field)+"",u=(d.sortCol.field||d.sortCol.id)+"",c=(d.sortCol.queryFieldSorter||d.sortCol.queryField||d.sortCol.field||"")+"";this._odataService.options.caseType===p.a.pascalCase&&(l=Object(h.w)(l),u=Object(h.w)(u),c=Object(h.w)(c)),""!==u&&r.push({columnId:u,direction:d.sortAsc?"asc":"desc"}),""!==c&&n.push({field:c,direction:d.sortAsc?p.k.ASC:p.k.DESC})}}r=r||[];var g=n.map((function(e){var t="";e&&e.field&&(t=(i._odataService.options.caseType===p.a.pascalCase?Object(h.w)(e.field):e.field)+" "+(e&&e.direction&&e.direction.toLowerCase()||""));return t})).join(",");return this._odataService.updateOptions({orderBy:g}),this._currentSorters=r,this._odataService.buildQuery()},e.prototype.castFilterToColumnFilters=function(e){var t="object"==typeof e?Object.keys(e).map((function(t){return e[t]})):e;return Array.isArray(t)?t.map((function(e){var t={columnId:e.columnId||""};return e.operator&&(t.operator=e.operator),Array.isArray(e.searchTerms)&&(t.searchTerms=e.searchTerms),t})):[]},e.prototype.odataQueryVersionWrapper=function(e,t,i,r){void 0===r&&(r="");var n="";switch(e){case"dateTime":n=t>=4?r:"DateTime'"+r+"'";break;case"substring":n=t>=4?"contains("+i+", '"+r+"')":"substringof('"+r+"', "+i+")"}return n},e.prototype.filterBySearchDate=function(e,t,i,r){var n="",o=[];if((Array.isArray(i)&&i.length>1&&(o=i,t!==p.j.rangeExclusive&&t!==p.j.rangeInclusive&&this._gridOptions.defaultFilterRangeOperator&&(t=this._gridOptions.defaultFilterRangeOperator)),0===o.length&&Array.isArray(i)&&1===i.length&&i[0])&&(s=this.odataQueryVersionWrapper("dateTime",r,e,Object(h.s)(i[0],!0))))return e+" "+this.mapOdataOperator(t)+" "+s;if(Array.isArray(o)&&2===o.length&&o[0]&&o[1]){var s=this.odataQueryVersionWrapper("dateTime",r,e,Object(h.s)(o[0],!0)),a=this.odataQueryVersionWrapper("dateTime",r,e,Object(h.s)(o[1],!0));s&&a&&(t===p.j.rangeInclusive?n="("+e+" ge "+s+" and "+e+" le "+a+")":t===p.j.rangeExclusive&&(n="("+e+" gt "+s+" and "+e+" lt "+a+")"))}return n},e.prototype.filterBySearchTermRange=function(e,t,i){var r="";return Array.isArray(i)&&2===i.length&&(t===p.j.rangeInclusive?r="("+e+" ge "+i[0]+" and "+e+" le "+i[1]+")":t===p.j.rangeExclusive&&(r="("+e+" gt "+i[0]+" and "+e+" lt "+i[1]+")")),r},e=x([Object(c.o)(!0)],e)}(),B=i("+2Rf"),H=i("Cff2"),N=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},q=function(){function e(e,t){this.extensionUtility=e,this.pluginEa=t,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(e.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_columnDefinitions",{get:function(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){var i=this;this._grid=e,this._aureliaEventPrefix=this._gridOptions&&this._gridOptions.defaultAureliaEventPrefix?this._gridOptions.defaultAureliaEventPrefix:"asg",e&&this._gridOptions&&this._gridOptions.createPreHeaderPanel&&(this._eventHandler.subscribe(e.onSort,(function(){return i.renderPreHeaderRowGroupingTitles()})),this._eventHandler.subscribe(e.onColumnsResized,(function(){return i.renderPreHeaderRowGroupingTitles()})),this._eventHandler.subscribe(e.onColumnsReordered,(function(){return i.renderPreHeaderRowGroupingTitles()})),this._eventHandler.subscribe(t.onRowCountChanged,(function(){return i.renderPreHeaderRowGroupingTitles()})),this.pluginEa.subscribe("resizerService:onAfterResize",(function(){return i.renderPreHeaderRowGroupingTitles()})),setTimeout((function(){return i.renderPreHeaderRowGroupingTitles()}),75))},e.prototype.dispose=function(){this._eventHandler.unsubscribeAll()},e.prototype.renderPreHeaderRowGroupingTitles=function(){if(this._gridOptions&&void 0!==this._gridOptions.frozenColumn&&this._gridOptions.frozenColumn>=0){var e=B(this._grid.getPreHeaderPanelLeft());this.renderHeaderGroups(e,0,this._gridOptions.frozenColumn+1),e=B(this._grid.getPreHeaderPanelRight()),this.renderHeaderGroups(e,this._gridOptions.frozenColumn+1,this._columnDefinitions.length)}else{e=B(this._grid.getPreHeaderPanel());this.renderHeaderGroups(e,0,this._columnDefinitions.length)}},e.prototype.renderHeaderGroups=function(e,t,i){e.empty().addClass("slick-header-columns").css("left","-1000px").width(this._grid.getHeadersWidth()),e.parent().addClass("slick-header");for(var r,n,o=this._grid.getHeaderColumnWidthDiff(),s="",a=0,d=t;d<i;d++)(r=this._columnDefinitions[d])&&(s===r.columnGroup&&d>0?(a+=r.width||0,n&&n.width&&n.width(a-o)):(a=r.width||0,n=B('<div class="ui-state-default slick-header-column" />').html('<span class="slick-column-name">'+(r.columnGroup||"")+"</span>").width(a-o).appendTo(e)),s=r.columnGroup||"")},e.prototype.translateGroupingAndColSpan=function(){var e=this._grid.getColumns();this.extensionUtility.translateItems(e,"columnGroupKey","columnGroup"),this._grid.setColumns(e),this.renderPreHeaderRowGroupingTitles()},e=N([Object(c.o)(!0),Object(c.n)(H.a,O.a)],e)}(),Q=i("aNj2"),z=i("SpW5");i.d(t,"a",(function(){return n.a})),i.d(t,"x",(function(){return o.b})),i.d(t,"K",(function(){return o.c})),i.d(t,"w",(function(){return o.a})),i.d(t,"N",(function(){return o.d})),i.d(t,"b",(function(){return s.a})),i.d(t,"c",(function(){return a.a})),i.d(t,"d",(function(){return d.a})),i.d(t,"e",(function(){return l.a})),i.d(t,"f",(function(){return u.a})),i.d(t,"g",(function(){return v})),i.d(t,"h",(function(){return w})),i.d(t,"j",(function(){return D})),i.d(t,"k",(function(){return A})),i.d(t,"i",(function(){return V})),i.d(t,"l",(function(){return q})),i.d(t,"m",(function(){return k.a})),i.d(t,"n",(function(){return Q.a})),i.d(t,"o",(function(){return z.a})),i.d(t,"p",(function(){return S.a})),i.d(t,"q",(function(){return C.a})),i.d(t,"r",(function(){return h.a})),i.d(t,"s",(function(){return h.b})),i.d(t,"C",(function(){return h.j})),i.d(t,"D",(function(){return h.k})),i.d(t,"E",(function(){return h.l})),i.d(t,"u",(function(){return h.d})),i.d(t,"z",(function(){return h.g})),i.d(t,"v",(function(){return h.e})),i.d(t,"A",(function(){return h.h})),i.d(t,"G",(function(){return h.n})),i.d(t,"F",(function(){return h.m})),i.d(t,"J",(function(){return h.q})),i.d(t,"I",(function(){return h.p})),i.d(t,"H",(function(){return h.o})),i.d(t,"L",(function(){return h.r})),i.d(t,"M",(function(){return h.s})),i.d(t,"O",(function(){return h.t})),i.d(t,"P",(function(){return h.u})),i.d(t,"Q",(function(){return h.v})),i.d(t,"R",(function(){return h.w})),i.d(t,"S",(function(){return h.x})),i.d(t,"T",(function(){return h.y})),i.d(t,"t",(function(){return h.c})),i.d(t,"y",(function(){return h.f})),i.d(t,"B",(function(){return h.i})),i.d(t,"U",(function(){return h.z})),i.d(t,"V",(function(){return h.A})),i.d(t,"W",(function(){return h.B}))},sfpN:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return m}));var r,n=i("aurelia-framework"),o=i("+2Rf"),s=i("XaGS"),a=i("MGjh"),d=i("jxYj"),l=i("v8Uj"),u=i("/CJ3"),c=i("eyxJ"),h=i("wESz"),p=i("IlDx"),g=function(){return(g=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},f=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},y=function(t,i,r,n){return new(r||(r=e))((function(e,o){function s(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(s,a)}d((n=n.apply(t,i||[])).next())}))},v=function(e,t){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},m=function(){function t(e,t,i){this.pluginEa=e,this.filterFactory=t,this.sharedService=i,this._isFilterFirstRender=!0,this._firstColumnIdRendered="",this._filtersMetadata=[],this._columnFilters={},this._onSearchChange=new Slick.Event,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(t.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFilterFirstRender",{get:function(){return this._isFilterFirstRender},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSearchChange",{get:function(){return this._onSearchChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_columnDefinitions",{get:function(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]},enumerable:!0,configurable:!0}),t.prototype.init=function(e){this._grid=e},t.prototype.dispose=function(){this.disposeColumnFilters(),this._eventHandler&&this._eventHandler.unsubscribeAll&&this._eventHandler.unsubscribeAll()},t.prototype.disposeColumnFilters=function(){if("object"==typeof this._columnFilters)for(var e in this._columnFilters)e&&this._columnFilters[e]&&delete this._columnFilters[e];Array.isArray(this._filtersMetadata)&&this._filtersMetadata.forEach((function(e,t){e&&e.destroy&&e.destroy(!0)}))},t.prototype.bindBackendOnFilter=function(e,t){var i=this;this._dataView=t,this._filtersMetadata=[],this._eventHandler.subscribe(e.onHeaderRowCellRendered,(function(e,t){t.column.id===i._firstColumnIdRendered&&(i._isFilterFirstRender=!1),i.addFilterTemplateToHeaderRow(t,i._isFilterFirstRender),""===i._firstColumnIdRendered&&(i._firstColumnIdRendered=t.column.id)})),this._eventHandler.subscribe(this._onSearchChange,this.onBackendFilterChange.bind(this))},t.prototype.bindLocalOnFilter=function(e,t){var i=this;this._filtersMetadata=[],this._dataView=t,t.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid,dataView:t}),t.setFilter(this.customLocalFilter.bind(this)),this._eventHandler.subscribe(this._onSearchChange,(function(e,r){null!=r.columnId&&t.refresh(),r&&!r.clearFilterTriggered&&i.emitFilterChanged(l.c.local)})),this._eventHandler.subscribe(e.onHeaderRowCellRendered,(function(e,t){i.addFilterTemplateToHeaderRow(t)}))},t.prototype.clearFilterByColumnId=function(e,t){var i,r=Object.keys(this._columnFilters);Array.isArray(r)&&(i=r.find((function(e){return e===t})));var n=this._filtersMetadata.find((function(e){return e.columnDef.id===t}));n&&n.clear&&n.clear(!0);var o=l.c.local;(this._gridOptions&&this._gridOptions.backendServiceApi||!1)&&(o=l.c.remote,void 0!==i&&this.onBackendFilterChange(e,{grid:this._grid,columnFilters:this._columnFilters})),this.emitFilterChanged(o)},t.prototype.clearFilters=function(t){var i=this;void 0===t&&(t=!0),this._filtersMetadata.forEach((function(e){e&&e.clear&&e.clear(!1)})),this._dataView&&this._grid&&(this._dataView.refresh(),this._grid.invalidate());var r=this._gridOptions&&this._gridOptions.backendServiceApi;if(r&&t){var n={clearFilterTriggered:!0,shouldTriggerQuery:t,grid:this._grid,columnFilters:this._columnFilters},o=r.service.processOnFilterChanged(void 0,n);if(o instanceof e&&o.then)console.warn('[Aurelia-Slickgrid] please note that the "processOnFilterChanged" from your Backend Service, should now return a string instead of a Promise.\n          Returning a Promise will be deprecated in the future.'),o.then((function(e){var t=i._gridOptions&&i._gridOptions.pagination&&i._gridOptions.pagination.totalItems||0;Object(u.a)(r,e,n,new Date,t,i.emitFilterChanged.bind(i))}));else{var s=o,a=this._gridOptions&&this._gridOptions.pagination&&this._gridOptions.pagination.totalItems||0;Object(u.a)(r,s,n,new Date,a,this.emitFilterChanged.bind(this))}}t&&this.pluginEa.publish("filterService:filterCleared",!0)},t.prototype.customLocalFilter=function(e,t){for(var i=t&&t.dataView,r=function(r){var s=t.columnFilters[r],d=t.grid.getColumnIndex(r),u=t.grid.getColumns()[d];if(!u&&n.sharedService&&Array.isArray(n.sharedService.allColumns)&&(d=n.sharedService.allColumns.findIndex((function(e){return e.field===r})),u=n.sharedService.allColumns[d]),!u)return{value:!0};if(n._gridOptions.enableRowDetailView){var h=n._gridOptions.rowDetailView&&n._gridOptions.rowDetailView.keyPrefix||"__";e[h+"isPadding"]&&e[h+"parent"]&&(e=e[h+"parent"])}var p=u.dataKey,g=u.queryFieldFilter||u.queryField||u.field||"",f=u.type||l.e.string,y=u.filterSearchType?u.filterSearchType:null,v=e[g];g&&g.indexOf(".")>=0&&(v=Object(c.h)(e,g));var m=s&&s.searchTerms?o.extend(!0,[],s.searchTerms):[],w=Array.isArray(m)&&1===m.length?m[0]:"",_=null;f!==l.e.object&&(_=(w=""+w).match(/^([<>!=\*]{0,2})(.*[^<>!=\*])([\*]?)$/));var b=s.operator||(_?_[1]:""),S=_?_[2]:"",C=_?_[3]:"*z"===b?"*":"";if(m&&m.length>1?w=m.join(","):"string"==typeof w&&(w=w.replace("'","''"),"*"!==b&&"a*"!==b&&"*z"!==b&&"*"!==C||(b="*"===b||"*z"===b?l.j.endsWith:l.j.startsWith)),""===S&&(!m||Array.isArray(m)&&0===m.length))return{value:!0};if(Array.isArray(_)&&_.length>=1&&Array.isArray(m)&&1===m.length&&(m[0]=S),m&&Array.isArray(m)&&f!==l.e.object)for(var O=0,I=m.length;O<I;O++)m[O]=(void 0===m[O]||null===m[O]?"":m[O])+"";if(u&&u.params&&u.params.useFormatterOuputToFilter){var R=i&&"function"==typeof i.getIdxById?i.getIdxById(e.id):0;v=u.formatter(R,d,v,u,e,n._grid)}"number"==typeof v&&(v=v.toString());var A={dataKey:p,fieldType:f,searchTerms:m,cellValue:v,operator:b,cellValueLastChar:C,filterSearchType:y};return a.a.executeMappedCondition(A)?void 0:{value:!1}},n=this,s=0,d=Object.keys(t.columnFilters);s<d.length;s++){var u=r(d[s]);if("object"==typeof u)return u.value}return!0},t.prototype.getColumnFilters=function(){return this._columnFilters},t.prototype.getFiltersMetadata=function(){return this._filtersMetadata},t.prototype.getCurrentLocalFilters=function(){var e=[];if(this._columnFilters)for(var t=0,i=Object.keys(this._columnFilters);t<i.length;t++){var r=i[t],n=this._columnFilters[r],o={columnId:r||""};n&&n.searchTerms&&(o.searchTerms=n.searchTerms),n.operator&&(o.operator=n.operator),Array.isArray(o.searchTerms)&&o.searchTerms.length>0&&""!==o.searchTerms[0]&&e.push(o)}return e},t.prototype.emitFilterChanged=function(e){if(e===l.c.remote&&this._gridOptions&&this._gridOptions.backendServiceApi){var t=[],i=this._gridOptions.backendServiceApi.service;i&&i.getCurrentFilters&&(t=i.getCurrentFilters()),this.pluginEa.publish("filterService:filterChanged",t)}else e===l.c.local&&this.pluginEa.publish("filterService:filterChanged",this.getCurrentLocalFilters())},t.prototype.onBackendFilterChange=function(e,t){return y(this,void 0,void 0,(function(){var i,n,o,s,a,d,c,h,p=this;return v(this,(function(g){switch(g.label){case 0:if(!t||!t.grid)throw new Error('Something went wrong when trying to bind the "onBackendFilterChange(event, args)" function, it seems that "args" is not populated correctly');if(!(i=this._gridOptions.backendServiceApi)||!i.process||!i.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');return n=new Date,i.preProcess&&i.preProcess(),o=0,s=t&&t.clearFilterTriggered,a=e&&e.type,d=e&&e.keyCode,s||d===l.i.ENTER||"input"!==a&&"keyup"!==a&&"keydown"!==a||(o=i.hasOwnProperty("filterTypingDebounce")?i.filterTypingDebounce:500),t&&t.shouldTriggerQuery?o>0?(clearTimeout(r),r=setTimeout((function(){return y(p,void 0,void 0,(function(){var r,o;return v(this,(function(s){switch(s.label){case 0:return[4,i.service.processOnFilterChanged(e,t)];case 1:return r=s.sent(),o=this._gridOptions&&this._gridOptions.pagination&&this._gridOptions.pagination.totalItems||0,Object(u.a)(i,r,t,n,o,this.emitFilterChanged.bind(this)),[2]}}))}))}),o),[3,3]):[3,1]:[3,3];case 1:return[4,i.service.processOnFilterChanged(e,t)];case 2:c=g.sent(),h=this._gridOptions&&this._gridOptions.pagination&&this._gridOptions.pagination.totalItems||0,Object(u.a)(i,c,t,n,h,this.emitFilterChanged.bind(this)),g.label=3;case 3:return[2]}}))}))},t.prototype.populateColumnFilterSearchTermPresets=function(e){return Array.isArray(e)&&e.length>0&&this._columnDefinitions.forEach((function(t){t.filter&&t.filter.searchTerms&&delete t.filter.searchTerms;var i=e.find((function(e){return e.columnId===t.id}));i&&i.searchTerms&&Array.isArray(i.searchTerms)&&(t.filter=t.filter||{},t.filter.operator=i.operator||t.filter.operator||"",t.filter.searchTerms=i.searchTerms)})),this._columnDefinitions},t.prototype.setSortColumnIcons=function(e){this._grid&&Array.isArray(e)&&this._grid.setSortColumns(e)},t.prototype.updateFilters=function(e,t,i){var r=this;if(void 0===t&&(t=!0),void 0===i&&(i=!0),!this._filtersMetadata||0===this._filtersMetadata.length||!this._gridOptions||!this._gridOptions.enableFiltering)throw new Error('[Aurelia-Slickgrid] in order to use "updateFilters" method, you need to have Filterable Columns defined in your grid and "enableFiltering" set in your Grid Options');if(Array.isArray(e)){this.clearFilters(!1),e.forEach((function(e){var t=r._filtersMetadata.find((function(t){return e.columnId===t.columnDef.id}));if(e&&t){var i=e.operator||t.defaultOperator;r.updateColumnFilters(e.searchTerms,t.columnDef,i),t.setValues(e.searchTerms,i)}}));var n=this._gridOptions&&this._gridOptions.backendServiceApi;if(this._dataView.refresh(),n){var o=n&&n.service;o&&o.updateFilters&&(o.updateFilters(e,!0),i&&Object(u.d)(this._gridOptions))}if(t){var s=n?l.c.remote:l.c.local;this.emitFilterChanged(s)}}},t.prototype.addFilterTemplateToHeaderRow=function(e,t){void 0===t&&(t=!0);var i=e.column,r=i&&i.id||"";if(i&&"selector"!==r&&i.filterable){var n=void 0,o=void 0,s=this.filterFactory.createFilter(i.filter);o=i&&i.filter&&i.filter.operator||s&&s.operator,this._columnFilters[i.id]?(n=this._columnFilters[i.id].searchTerms||void 0,o=this._columnFilters[i.id].operator||void 0):i.filter&&(n=i.filter.searchTerms||void 0,this.updateColumnFilters(n,i,o));var a={grid:this._grid,operator:o,searchTerms:n,columnDef:i,callback:this.callbackSearchEvent.bind(this)};if(s){s.init(a,t);var d=this._filtersMetadata.findIndex((function(e){return s.columnDef.id===e.columnDef.id}));-1===d?this._filtersMetadata.push(s):this._filtersMetadata[d]=s,n&&s.setValues&&s.setValues(n)}}},t.prototype.callbackSearchEvent=function(e,t){if(t){var i=e&&e.target?e.target.value:void 0,r=t.searchTerms&&Array.isArray(t.searchTerms)?t.searchTerms:i?[i]:void 0,n=t.columnDef||null,a=n&&n.id||"",d=t.operator||void 0,u=r&&Array.isArray(r),c=u&&r&&r.length,h=g({},this._columnFilters);if(n&&a)if(!u||0===c||1===c&&Array.isArray(r)&&""===r[0])delete this._columnFilters[a];else{var p=""+a,f={columnId:p,columnDef:n,searchTerms:r};d&&(f.operator=d),this._columnFilters[p]=f}var y=e&&"function"!=typeof e.isPropagationStopped?o.extend({},new Slick.EventData,e):e;(e&&e.keyCode)!==l.i.ENTER&&s(h,this._columnFilters)||this._onSearchChange.notify({clearFilterTriggered:t.clearFilterTriggered,shouldTriggerQuery:t.shouldTriggerQuery,columnId:a,columnDef:n,columnFilters:this._columnFilters,operator:d,searchTerms:r,grid:this._grid},y)}},t.prototype.updateColumnFilters=function(e,t,i){e&&t&&(this._columnFilters[t.id]={columnId:t.id,columnDef:t,searchTerms:e,operator:i})},t=f([Object(n.o)(!0),Object(n.n)(p.a,d.a,h.a)],t)}()}).call(this,i("B/eG").default)}}]);
//# sourceMappingURL=vendors~020009e7.88c423cbf5d9bb0e7ab2.bundle.map