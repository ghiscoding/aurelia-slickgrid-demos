(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{H9V8:function(e,t,i){"use strict";var r,n=i("lBQj"),o=i("/CJ3"),s=i("wI58"),a=i("9tpB"),l=i("NozK"),d=i("kN1a"),u=i("sfpN"),c=i("aurelia-framework"),h=i("eyxJ"),p=i("v8Uj"),f=function(){function e(e,t){if(this.queryFnName=e,this.head=[],"string"==typeof t)this.alias=t;else if("object"==typeof t)this.filter(t);else{if(void 0===t&&2===arguments.length)throw new TypeError('You have passed undefined as Second argument to "Query"');if(void 0!==t)throw new TypeError('Second argument to "Query" should be an alias name(String) or filter arguments(Object). What was passed is: '+t)}}return e.prototype.filter=function(e){for(var t=0,i=Object.keys(e);t<i.length;t++){var r=i[t];if("function"!=typeof e[r]){var n=this.getGraphQLValue(e[r]);"{}"!==n&&this.head.push(r+":"+n)}}return this},e.prototype.find=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!e||!Array.isArray(e)||0===e.length)throw new TypeError("find value can not be >>falsy<<");var i=1===e.length&&Array.isArray(e[0])?e[0]:e;return this.body=this.parceFind(i),this},e.prototype.setAlias=function(e){this.alias=e},e.prototype.toString=function(){if(void 0===this.body)throw new ReferenceError("return properties are not defined. use the 'find' function to defined them");return(this.alias?this.alias+":":"")+" "+this.queryFnName+" "+(this.head.length>0?"("+this.head.join(",")+")":"")+"  { "+this.body+" }"},e.prototype.parceFind=function(t){return t.map((function(i,r){var n=t[r];if(n instanceof e)return n.toString();if(Array.isArray(n)||"object"!=typeof n){if("string"==typeof n)return n;throw new RangeError("cannot handle Find value of "+n)}var o=Object.keys(n);if(1!==o.length)throw new RangeError("Alias objects should only have one value. was passed: "+JSON.stringify(n));var s=o[0],a=n[s];return Array.isArray(a)?new e(s).find(a):s+" : "+a+" "})).join(",")},e.prototype.getGraphQLValue=function(e){var t=this;return"string"==typeof e?e=JSON.stringify(e):Array.isArray(e)?e="["+(e=e.map((function(e){return t.getGraphQLValue(e)})).join())+"]":e instanceof Date?e=JSON.stringify(e):null!==e&&"object"==typeof e&&(e=this.objectToString(e)),e},e.prototype.objectToString=function(e){for(var t=[],i=0,r=Object.keys(e);i<r.length;i++){var n=r[i];"function"!=typeof e[n]&&t.push(n+":"+this.getGraphQLValue(e[n]))}return"{"+t.join()+"}"},e}(),g=function(){return(g=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},y=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},v=function(){function e(){this._currentFilters=[],this._currentSorters=[],this.defaultPaginationOptions={first:25,offset:0}}return Object.defineProperty(e.prototype,"columnDefinitions",{get:function(){return this._columnDefinitions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t,i){this._grid=i,this.options=e||{},this.pagination=t,i&&i.getColumns&&(this._columnDefinitions=e&&e.columnDefinitions||i.getColumns())},e.prototype.buildQuery=function(){if(!this.options||!this.options.datasetName||!this._columnDefinitions&&!Array.isArray(this.options.columnDefinitions))throw new Error('GraphQL Service requires "datasetName" & "columnDefinitions" properties for it to work');var e=this._columnDefinitions||this.options.columnDefinitions;e=e.filter((function(e){return!e.excludeFromQuery}));var t=new f("query"),i=new f(this.options.datasetName),r=this.options.isWithCursor?new f("edges"):new f("nodes"),n=[];if(e&&Array.isArray(e))for(var o=0,s=e;o<s.length;o++){var a=s[o];n.push(a.field),a.fields&&n.push.apply(n,a.fields)}-1===n.indexOf("id")&&n.unshift("id");var l=this.buildFilterQuery(n),d=[];if(!1!==this._gridOptions.enablePagination){if(this.options.isWithCursor){var u=new f("pageInfo");u.find("hasNextPage","endCursor"),r.find(["cursor",{node:l}]),d=["totalCount",u,r]}else r.find(l),d=["totalCount",r];i.find(d)}else i.find(l);var c={};if(!1!==this._gridOptions.enablePagination&&(c=g(g({},this.options.paginationOptions),{first:(this.options.paginationOptions&&this.options.paginationOptions.first?this.options.paginationOptions.first:this.pagination&&this.pagination.pageSize?this.pagination.pageSize:null)||this.defaultPaginationOptions.first}),this.options.isWithCursor||(c.offset=this.options.paginationOptions&&this.options.paginationOptions.hasOwnProperty("offset")?+this.options.paginationOptions.offset:0)),this.options.sortingOptions&&Array.isArray(this.options.sortingOptions)&&this.options.sortingOptions.length>0&&(c.orderBy=this.options.sortingOptions),this.options.filteringOptions&&Array.isArray(this.options.filteringOptions)&&this.options.filteringOptions.length>0&&(c.filterBy=this.options.filteringOptions),this.options.addLocaleIntoQuery&&(c.locale=this._gridOptions&&this._gridOptions.i18n&&this._gridOptions.i18n.getLocale()||"en"),this.options.extraQueryArguments)for(var h=0,p=this.options.extraQueryArguments;h<p.length;h++){var y=p[h];c[y.field]=y.value}i.filter(c),t.find(i);return this.trimDoubleQuotesOnEnumField(t.toString(),["direction:","field:","operator:"],this.options.keepArgumentFieldDoubleQuotes||!1)},e.prototype.buildFilterQuery=function(e){var t=function(e,i){void 0===e&&(e={});var r=i.shift();return e[r]=i.length?t(e[r],i):null,e},i=e.reduce((function(e,i){return t(e,i.split("."))}),{});return JSON.stringify(i).replace(/\"|\:|null/g,"").replace(/^\{/,"").replace(/\}$/,"")},e.prototype.clearFilters=function(){this._currentFilters=[],this.updateOptions({filteringOptions:[]})},e.prototype.clearSorters=function(){this._currentSorters=[],this.updateOptions({sortingOptions:[]})},e.prototype.getInitPaginationOptions=function(){var e=this.pagination?this.pagination.pageSize:25;return this.options.isWithCursor?{first:e}:{first:e,offset:0}},e.prototype.getDatasetName=function(){return this.options.datasetName||""},e.prototype.getCurrentFilters=function(){return this._currentFilters},e.prototype.getCurrentPagination=function(){return this._currentPagination},e.prototype.getCurrentSorters=function(){return this._currentSorters},e.prototype.resetPaginationOptions=function(){var e;this.options&&this.options.isWithCursor?e={after:"",before:void 0,last:void 0}:(e=this.options&&this.options.paginationOptions||this.getInitPaginationOptions()).offset=0,this._currentPagination={pageNumber:1,pageSize:e.first||20},!this._gridOptions||!this._gridOptions.enablePagination&&this._gridOptions.hasOwnProperty("enablePagination")||this.updateOptions({paginationOptions:e})},e.prototype.updateOptions=function(e){this.options=g(g({},this.options),e)},e.prototype.processOnFilterChanged=function(e,t){if(void 0===this._gridOptions.backendServiceApi)throw new Error('Something went wrong in the GraphqlService, "backendServiceApi" is not initialized');if(this._currentFilters=this.castFilterToColumnFilters(t.columnFilters),!t||!t.grid)throw new Error('Something went wrong when trying create the GraphQL Backend Service, it seems that "args" is not populated correctly');return this.updateFilters(t.columnFilters,!1),this.resetPaginationOptions(),this.buildQuery()},e.prototype.processOnPaginationChanged=function(e,t){var i=+(t.pageSize||(this.pagination?this.pagination.pageSize:20));return this.updatePagination(t.newPage,i),this.buildQuery()},e.prototype.processOnSortChanged=function(e,t){var i=t.multiColumnSort?t.sortCols:new Array({sortCol:t.sortCol,sortAsc:t.sortAsc});return this.updateSorters(i),this.buildQuery()},e.prototype.updateFilters=function(e,t){var i,r=[];t&&(this._currentFilters=this.castFilterToColumnFilters(e));var n=function(n){if(e.hasOwnProperty(n)){var s=e[n],a=void 0;if(!(a=t&&Array.isArray(o._columnDefinitions)?o._columnDefinitions.find((function(e){return e.id===s.columnId})):s.columnDef))throw new Error("[GraphQL Service]: Something went wrong in trying to get the column definition of the specified filter (or preset filters). Did you make a typo on the filter columnId?");var l=a.queryFieldFilter||a.queryField||a.field||a.name||"",d=s&&s.searchTerms||[],u=Array.isArray(d)&&1===d.length?d[0]:"";if(void 0===u&&(u=""),!l)throw new Error('GraphQL filter could not find the field name to query the search, your column definition must include a valid "field" or "name" (optionally you can also use the "queryfield" or "queryFieldFilter").');var c=(u=""+u).match(/^([<>!=\*]{0,2})(.*[^<>!=\*])([\*]?)$/),f=s.operator||(c?c[1]:"");i=c?c[2]:"";var g=c?c[3]:"*z"===f?"*":"";if(l&&""===i&&0===d.length)return"continue";if(Array.isArray(d)&&1===d.length&&"string"==typeof d[0]&&d[0].indexOf("..")>0&&(d=d[0].split(".."),f||(f=p.j.rangeExclusive)),"string"==typeof i&&(i=i.replace("'","''"),"*"!==f&&"a*"!==f&&"*z"!==f&&"*"!==g||(f="*"===f||"*z"===f?"EndsWith":"StartsWith")),!f&&a.filter&&a.filter.operator&&(f=a.filter.operator),d&&d.length>1&&("IN"===f||"NIN"===f||"NOT_IN"===f))i=d.join(",");else if(d&&2===d.length&&(!f||f===p.j.rangeExclusive||f===p.j.rangeInclusive))return f||(f=p.j.rangeExclusive),r.push({field:l,operator:f===p.j.rangeInclusive?"GE":"GT",value:d[0]}),r.push({field:l,operator:f===p.j.rangeInclusive?"LE":"LT",value:d[1]}),"continue";f||(f=Object(h.o)(a.type||p.e.string)),r.push({field:l,operator:Object(h.q)(f),value:i})}},o=this;for(var s in e)n(s);this.updateOptions({filteringOptions:r})},e.prototype.updatePagination=function(e,t){var i;this._currentPagination={pageNumber:e,pageSize:t},i=this.options&&this.options.isWithCursor?{first:t}:{first:t,offset:e>1?(e-1)*t:0},this.updateOptions({paginationOptions:i})},e.prototype.updateSorters=function(e,t){var i=this,r=[],n=[];if(!e&&t){(r=t).forEach((function(e){return e.direction=e.direction.toUpperCase()}));var o=r.map((function(e){var t=i._columnDefinitions.find((function(t){return t.id===e.columnId}));return n.push({field:t?(t.queryFieldSorter||t.queryField||t.field)+"":e.columnId+"",direction:e.direction}),t?{columnId:e.columnId,sortAsc:e.direction.toUpperCase()===p.k.ASC}:null}));Array.isArray(o)&&this._grid.setSortColumns(o.filter((function(e){return e})))}else if(e&&!t&&Array.isArray(e)&&e.length>0)for(var s=0,a=e;s<a.length;s++){var l=a[s];if(l&&l.sortCol){r.push({columnId:l.sortCol.id+"",direction:l.sortAsc?p.k.ASC:p.k.DESC});var d=(l.sortCol.queryFieldSorter||l.sortCol.queryField||l.sortCol.field||"")+"";d&&n.push({field:d,direction:l.sortAsc?p.k.ASC:p.k.DESC})}}this._currentSorters=r,this.updateOptions({sortingOptions:n})},e.prototype.trimDoubleQuotesOnEnumField=function(e,t,i){var r=t.join('s?((field:s*)?".*?")|'),n=new RegExp(r+='s?((field:s*)?".*?")',"g");return e.replace(n,(function(e,t,r){var n=!0;return e.startsWith("field:")&&i&&(n=!1),n?e.replace(/"/g,""):e}))},e.prototype.castFilterToColumnFilters=function(e){var t="object"==typeof e?Object.keys(e).map((function(t){return e[t]})):e;return Array.isArray(t)?t.map((function(e){var t={columnId:e.columnId||""};return e.operator&&(t.operator=e.operator),Array.isArray(e.searchTerms)&&(t.searchTerms=e.searchTerms),t})):[]},e=y([Object(c.n)(!0)],e)}(),m=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},w=function(){function e(){this._eventHandler=new Slick.EventHandler}return Object.defineProperty(e.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),e.prototype.bindOnCellChange=function(e,t){this._eventHandler.subscribe(e.onCellChange,(function(i,r){if(i&&r&&e&&void 0!==r.cell&&e.getColumns&&e.getDataItem){var n=e.getColumns()[r.cell];if("function"==typeof n.onCellChange){var o={row:r.row,cell:r.cell,dataView:t,grid:e,columnDef:n,dataContext:e.getDataItem(r.row)};n.onCellChange(i,o)}}}))},e.prototype.bindOnClick=function(e,t){this._eventHandler.subscribe(e.onClick,(function(i,r){if(i&&r&&e&&void 0!==r.cell&&e.getColumns&&e.getDataItem){var n=e&&e.getColumns&&e.getColumns()[r.cell],o=e&&e.getOptions&&e.getOptions()||{};if(o.enableCellNavigation&&(!o.editable||o.editable&&o.autoCommitEdit)&&e.setActiveCell(r.row,r.cell),"function"==typeof n.onCellClick){var s={row:r.row,cell:r.cell,dataView:t,grid:e,columnDef:n,dataContext:e.getDataItem(r.row)};n.onCellClick(i,s)}}}))},e.prototype.dispose=function(){this._eventHandler.unsubscribeAll()},e=m([Object(c.n)(!0)],e)}(),_=i("aurelia-event-aggregator"),b=i("Kt3C"),S=function(){return(S=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},O=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},C=function(){function e(e,t,i,r){this.ea=e,this.extensionService=t,this.filterService=i,this.sortService=r,this._eventHandler=new Slick.EventHandler,this._columns=[],this._currentColumns=[],this.subscriptions=[]}return Object.defineProperty(e.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),e.prototype.init=function(e){this._grid=e,this.subscribeToAllGridChanges(e)},e.prototype.dispose=function(){this._currentColumns=[],this._columns=[],this._eventHandler.unsubscribeAll(),this.subscriptions=Object(h.e)(this.subscriptions)},e.prototype.getCurrentGridState=function(){var e={columns:this.getCurrentColumns(),filters:this.getCurrentFilters(),sorters:this.getCurrentSorters()},t=this.getCurrentPagination();return t&&(e.pagination=t),e},e.prototype.getColumns=function(){return this._columns},e.prototype.getAssociatedCurrentColumns=function(e){var t=[];return e&&Array.isArray(e)&&e.forEach((function(e,i){e&&e.id&&t.push({columnId:e.id,cssClass:e.cssClass||"",headerCssClass:e.headerCssClass||"",width:e.width||0})})),this._currentColumns=t,t},e.prototype.getAssociatedGridColumns=function(e,t){var i=[],r=e.getColumns();return t&&Array.isArray(t)&&t.forEach((function(e,t){var n=r.find((function(t){return t.id===e.columnId}));n&&n.id&&i.push(S(S({},n),{cssClass:e.cssClass,headerCssClass:e.headerCssClass,width:e.width}))})),this._columns=i,i},e.prototype.getCurrentColumns=function(){return this._currentColumns&&Array.isArray(this._currentColumns)&&this._currentColumns.length>0?this._currentColumns:this.getAssociatedCurrentColumns(this._grid.getColumns())},e.prototype.getCurrentFilters=function(){if(this._gridOptions&&this._gridOptions.backendServiceApi){var e=this._gridOptions.backendServiceApi.service;if(e&&e.getCurrentFilters)return e.getCurrentFilters()}else if(this.filterService&&this.filterService.getCurrentLocalFilters)return this.filterService.getCurrentLocalFilters();return null},e.prototype.getCurrentPagination=function(){if(this._gridOptions&&this._gridOptions.backendServiceApi){var e=this._gridOptions.backendServiceApi.service;if(e&&e.getCurrentPagination)return e.getCurrentPagination()}return null},e.prototype.getCurrentSorters=function(){if(this._gridOptions&&this._gridOptions.backendServiceApi){var e=this._gridOptions.backendServiceApi.service;if(e&&e.getCurrentSorters)return e.getCurrentSorters()}else if(this.sortService&&this.sortService.getCurrentLocalSorters)return this.sortService.getCurrentLocalSorters();return null},e.prototype.resetColumns=function(e){var t=e||this._columns,i=this.getAssociatedCurrentColumns(t);this.ea.publish("gridStateService:changed",{change:{newValues:i,type:p.h.columns},gridState:this.getCurrentGridState()})},e.prototype.resetRowSelection=function(){if(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector){var e=this.extensionService&&this.extensionService.getExtensionByName&&this.extensionService.getExtensionByName(p.d.rowSelection);e&&e.instance&&this._grid.setSelectedRows([])}},e.prototype.subscribeToAllGridChanges=function(e){var t=this;this.subscriptions.push(this.ea.subscribe("filterService:filterChanged",(function(e){t.resetRowSelection(),t.ea.publish("gridStateService:changed",{change:{newValues:e,type:p.h.filter},gridState:t.getCurrentGridState()})}))),this.subscriptions.push(this.ea.subscribe("filterService:filterCleared",(function(){t.resetRowSelection(),t.ea.publish("gridStateService:changed",{change:{newValues:[],type:p.h.filter},gridState:t.getCurrentGridState()})}))),this.subscriptions.push(this.ea.subscribe("sortService:sortChanged",(function(e){t.resetRowSelection(),t.ea.publish("gridStateService:changed",{change:{newValues:e,type:p.h.sorter},gridState:t.getCurrentGridState()})}))),this.subscriptions.push(this.ea.subscribe("sortService:sortCleared",(function(){t.resetRowSelection(),t.ea.publish("gridStateService:changed",{change:{newValues:[],type:p.h.sorter},gridState:t.getCurrentGridState()})}))),this.bindExtensionAddonEventToGridStateChange(p.d.columnPicker,"onColumnsChanged"),this.bindExtensionAddonEventToGridStateChange(p.d.gridMenu,"onColumnsChanged"),this.bindSlickGridEventToGridStateChange("onColumnsReordered",e),this.bindSlickGridEventToGridStateChange("onColumnsResized",e),this.subscriptions.push(this.ea.subscribe("headerMenu:onColumnsChanged",(function(e){var i=t.getAssociatedCurrentColumns(e);t.ea.publish("gridStateService:changed",{change:{newValues:i,type:p.h.columns},gridState:t.getCurrentGridState()})})))},e.prototype.bindExtensionAddonEventToGridStateChange=function(e,t){var i=this,r=this.extensionService&&this.extensionService.getExtensionByName&&this.extensionService.getExtensionByName(e),n=r&&r.instance&&r.instance[t];n&&"function"==typeof n.subscribe&&this._eventHandler.subscribe(n,(function(e,t){var r=t&&t.columns,n=i.getAssociatedCurrentColumns(r);i.ea.publish("gridStateService:changed",{change:{newValues:n,type:p.h.columns},gridState:i.getCurrentGridState()})}))},e.prototype.bindSlickGridEventToGridStateChange=function(e,t){var i=this,r=t&&t[e];r&&"function"==typeof r.subscribe&&this._eventHandler.subscribe(r,(function(e,r){var n=t.getColumns(),o=i.getAssociatedCurrentColumns(n);i.ea.publish("gridStateService:changed",{change:{newValues:o,type:p.h.columns},gridState:i.getCurrentGridState()})}))},e=O([Object(c.n)(!0),Object(c.m)(_.a,d.a,u.a,b.a)],e)}(),I=function(){return(I=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},A=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},F={triggerEvent:!0},R={highlightRow:!0,position:"top",resortGrid:!1,selectRow:!1,triggerEvent:!0},j={highlightRow:!0,selectRow:!1,scrollRowIntoView:!1,triggerEvent:!0},E=function(){function e(e,t,i,r,n){this.ea=e,this.extensionService=t,this.filterService=i,this.gridStateService=r,this.sortService=n,this._aureliaEventPrefix="asg"}return Object.defineProperty(e.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){this._grid=e,this._dataView=t,this._aureliaEventPrefix=this._gridOptions&&this._gridOptions.defaultAureliaEventPrefix?this._gridOptions.defaultAureliaEventPrefix:"asg"},e.prototype.clearAllFiltersAndSorts=function(){this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting(!1),this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters()},e.prototype.getColumnFromEventArguments=function(e){if(!(e&&e.grid&&e.grid.getColumns&&e.grid.getDataItem))throw new Error("To get the column definition and data, we need to have these arguments passed as objects (row, cell, grid)");return{row:e.row,cell:e.cell,columnDef:e.grid.getColumns()[e.cell],dataContext:e.grid.getDataItem(e.row),dataView:this._dataView,grid:this._grid}},e.prototype.getDataItemByRowNumber=function(e){if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('We could not find SlickGrid Grid object or it\'s "getDataItem" method');return this._grid.getDataItem(e)},e.prototype.getItemRowMetadataToHighlight=function(e){var t=this;return function(i){var r=t._dataView.getItem(i),n={cssClasses:""};return"function"==typeof e&&(n=e(i)),n||(n={cssClasses:""}),r&&r._dirty&&(n.cssClasses=(n&&n.cssClasses||"")+" dirty"),r&&r.rowClass&&n&&(n.cssClasses+=" "+r.rowClass,n.cssClasses+=" row"+i),n}},e.prototype.getDataItemByRowIndex=function(e){if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('We could not find SlickGrid Grid object and/or "getDataItem" method');return this._grid.getDataItem(e)},e.prototype.getDataItemByRowIndexes=function(e){var t=this;if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('We could not find SlickGrid Grid object and/or "getDataItem" method');var i=[];return Array.isArray(e)&&e.forEach((function(e){i.push(t._grid.getDataItem(e))})),i},e.prototype.getSelectedRows=function(){if(!this._grid||"function"!=typeof this._grid.getSelectedRows)throw new Error('We could not find SlickGrid Grid object and/or "getSelectedRows" method');return this._grid.getSelectedRows()},e.prototype.getSelectedRowsDataItem=function(){if(!this._grid||"function"!=typeof this._grid.getSelectedRows)throw new Error('We could not find SlickGrid Grid object and/or "getSelectedRows" method');var e=this._grid.getSelectedRows();return this.getDataItemByRowIndexes(e)},e.prototype.highlightRow=function(e,t,i){var r=this;if(void 0===t&&(t=1500),void 0===i&&(i=300),!this._grid.getSelectionModel()&&Slick&&Slick.RowSelectionModel){var n=new Slick.RowSelectionModel(this._gridOptions.rowSelectionOptions||{});this._grid.setSelectionModel(n)}Array.isArray(e)?e.forEach((function(e){return r.highlightRowByMetadata(e,t,i)})):this.highlightRowByMetadata(e,t,i)},e.prototype.highlightRowByMetadata=function(e,t,i){var n=this;void 0===t&&(t=1500),void 0===i&&(i=300),this._dataView.getItemMetadata=this.getItemRowMetadataToHighlight(this._dataView.getItemMetadata);var o=this._dataView.getItem(e);o&&o.id&&(o.rowClass="highlight",this._dataView.updateItem(o.id,o),this.renderGrid(),clearTimeout(r),r=setTimeout((function(){o.rowClass="highlight-end",n._dataView.updateItem(o.id,o),n.renderGrid()}),i),setTimeout((function(){o&&o.id&&(delete o.rowClass,void 0!==n._dataView.getIdxById(o.id)&&(n._dataView.updateItem(o.id,o),n.renderGrid()))}),t+i))},e.prototype.setSelectedRow=function(e){this._grid&&this._grid.setSelectedRows&&this._grid.setSelectedRows([e])},e.prototype.setSelectedRows=function(e){this._grid&&this._grid.setSelectedRows&&this._grid.setSelectedRows(e)},e.prototype.renderGrid=function(){this._grid&&"function"==typeof this._grid.invalidate&&(this._grid.invalidate(),this._grid.render())},e.prototype.resetGrid=function(e){if(this._grid&&this._dataView){var t=this.extensionService.getAllColumns();Array.isArray(t)&&t.length>0&&(this._grid.setColumns(t),this._gridOptions&&this._gridOptions.enableAutoSizeColumns&&this._grid.autosizeColumns(),this.gridStateService.resetColumns(e))}this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters(),this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting()},e.prototype.addItemToDatagrid=function(e,t,i,r,n){return void 0===t&&(t=!0),void 0===i&&(i=!1),void 0===r&&(r=!0),void 0===n&&(n=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "addItem" method since "addItemToDatagrid" will be deprecated in the future.'),this.addItem(e,{highlightRow:t,resortGrid:i,triggerEvent:r,selectRow:n})},e.prototype.addItemsToDatagrid=function(e,t,i,r,n){return void 0===t&&(t=!0),void 0===i&&(i=!1),void 0===r&&(r=!0),void 0===n&&(n=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "addItems" method since "addItemsToDatagrid" will be deprecated in the future.'),this.addItems(e,{highlightRow:t,resortGrid:i,triggerEvent:r,selectRow:n})},e.prototype.addItem=function(e,t){if(t=I(I({},R),t),!this._grid||!this._gridOptions||!this._dataView)throw new Error("We could not find SlickGrid Grid, DataView objects");if(!e||!e.hasOwnProperty("id"))throw new Error('Adding an item requires the item to include an "id" property');t&&"bottom"===t.position?this._dataView.addItem(e):this._dataView.insertItem(0,e);var i=0;return t.resortGrid?(this._dataView.reSort(),i=this._dataView.getRowById(e.id)):(i=t&&"bottom"===t.position?this._dataView.getRowById(e.id):0,this._grid.scrollRowIntoView(i)),t.highlightRow&&this.highlightRow(i),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(i),t.triggerEvent&&this.ea.publish(this._aureliaEventPrefix+":on-item-added",e),i},e.prototype.addItems=function(e,t){var i=this;t=I(I({},R),t);var r=[];return Array.isArray(e)?(e.forEach((function(e){return i.addItem(e,I(I({},t),{highlightRow:!1,resortGrid:!1,triggerEvent:!1,selectRow:!1}))})),t.resortGrid&&this._dataView.reSort(),t&&"bottom"===t.position?this._grid.navigateBottom():this._grid.navigateTop(),e.forEach((function(e){return r.push(i._dataView.getRowById(e.id))})),t.highlightRow&&this.highlightRow(r),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(r),t.triggerEvent&&this.ea.publish(this._aureliaEventPrefix+":on-item-added",e),r):[this.addItem(e,t)]},e.prototype.deleteDataGridItem=function(e,t){void 0===t&&(t=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "deleteItem" method since "deleteDataGridItem" will be deprecated in the future.'),this.deleteItem(e,{triggerEvent:t})},e.prototype.deleteDataGridItems=function(e,t){void 0===t&&(t=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "deleteItems" method since "deleteDataGridItems" will be deprecated in the future.'),this.deleteItems(e,{triggerEvent:t})},e.prototype.deleteDataGridItemById=function(e,t){void 0===t&&(t=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "deleteItemById" method since "deleteDataGridItemById" will be deprecated in the future.'),this.deleteItemById(e,{triggerEvent:t})},e.prototype.deleteDataGridItemByIds=function(e,t){void 0===t&&(t=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "deleteItemByIds" method since "deleteDataGridItemByIds" will be deprecated in the future.'),this.deleteItemByIds(e,{triggerEvent:t})},e.prototype.deleteItem=function(e,t){if(t=I(I({},F),t),!e||!e.hasOwnProperty("id"))throw new Error('Deleting an item requires the item to include an "id" property');return this.deleteItemById(e.id,t)},e.prototype.deleteItems=function(e,t){var i=this;if(t=I(I({},F),t),!Array.isArray(e))return this.deleteItem(e,t),[e.id];var r=[];return e.forEach((function(e){e&&void 0!==e.id&&r.push(e.id),i.deleteItem(e,I(I({},t),{triggerEvent:!1}))})),t.triggerEvent&&this.ea.publish(this._aureliaEventPrefix+":on-item-deleted",e),r},e.prototype.deleteItemById=function(e,t){if(t=I(I({},F),t),null==e)throw new Error('Cannot delete a row without a valid "id"');return this._grid&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows([]),this._dataView.deleteItem(e),t.triggerEvent&&this.ea.publish(this._aureliaEventPrefix+":on-item-deleted",e),e},e.prototype.deleteItemByIds=function(e,t){if(t=I(I({},F),t),Array.isArray(e)){for(var i=0;i<e.length;i++)null!==e[i]&&this.deleteItemById(e[i],{triggerEvent:!1});return t.triggerEvent&&this.ea.publish(this._aureliaEventPrefix+":on-item-deleted",e),e}return[]},e.prototype.updateDataGridItem=function(e,t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "updateItem" method since "updateDataGridItem" will be deprecated in the future.'),this.updateItem(e,{highlightRow:t,triggerEvent:i,selectRow:r})},e.prototype.updateDataGridItems=function(e,t,i,r){return void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===r&&(r=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "updateItems" method since "updateDataGridItems" will be deprecated in the future.'),this.updateItems(e,{highlightRow:t,triggerEvent:i,selectRow:r})},e.prototype.updateDataGridItemById=function(e,t,i,r,n){return void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===n&&(n=!0),console.warn('[Aurelia-Slickgrid - GridService] please consider using the new "updateItemById" method since "updateDataGridItemById" will be deprecated in the future.'),this.updateItemById(e,t,{highlightRow:i,triggerEvent:r,selectRow:n})},e.prototype.updateItem=function(e,t){t=I(I({},j),t);var i=e&&e.hasOwnProperty("id")?e.id:void 0;if(void 0===i)throw new Error('Calling Update of an item requires the item to include an "id" property');return this.updateItemById(i,e,t)},e.prototype.updateItems=function(e,t){var i=this;if(t=I(I({},j),t),!Array.isArray(e))return[this.updateItem(e,t)];var r=[];return e.forEach((function(e){r.push(i.updateItem(e,I(I({},t),{highlightRow:!1,selectRow:!1,triggerEvent:!1})))})),t.highlightRow&&this.highlightRow(r),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(r),t.triggerEvent&&this.ea.publish(this._aureliaEventPrefix+":on-item-updated",e),r},e.prototype.updateItemById=function(e,t,i){if(i=I(I({},j),i),void 0===e)throw new Error('Cannot update a row without a valid "id"');var r=this._dataView.getRowById(e);if(!t||void 0===r)throw new Error("The item to update in the grid was not found with id: "+e);return void 0!==this._dataView.getIdxById(e)&&(this._dataView.updateItem(e,t),this._grid.updateRow(r),i.scrollRowIntoView&&this._grid.scrollRowIntoView(r),i.highlightRow&&this.highlightRow(r),i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(r),i.triggerEvent&&this.ea.publish(this._aureliaEventPrefix+":on-item-updated",t)),r},e.prototype.upsertItem=function(e,t){t=I(I({},R),t);var i=e&&e.hasOwnProperty("id")?e.id:void 0;if(void 0===i)throw new Error('Calling Upsert of an item requires the item to include an "id" property');return this.upsertItemById(i,e,t)},e.prototype.upsertItems=function(e,t){var i=this;if(t=I(I({},R),t),!Array.isArray(e))return[this.upsertItem(e,t)];var r=[];e.forEach((function(e){r.push(i.upsertItem(e,I(I({},t),{highlightRow:!1,resortGrid:!1,selectRow:!1,triggerEvent:!1})))}));var n=r.map((function(e){return void 0!==e.added?e.added:e.updated}));if(t.highlightRow&&this.highlightRow(n),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(n),t.triggerEvent){this.ea.publish(this._aureliaEventPrefix+":on-item-upserted",e);var o=r.filter((function(e){return void 0!==e.added}));Array.isArray(o)&&o.length>0&&this.ea.publish(this._aureliaEventPrefix+":on-item-added",o);var s=r.filter((function(e){return void 0!==e.updated}));Array.isArray(s)&&s.length>0&&this.ea.publish(this._aureliaEventPrefix+":on-item-updated",s)}return r},e.prototype.upsertItemById=function(e,t,i){var r,n,o=!1;if(i=I(I({},R),i),void 0===e)throw new Error('Calling Upsert of an item requires the item to include a valid and unique "id" property');if(void 0===this._dataView.getRowById(e)?(r=this.addItem(t,i),o=!0):(n=this.updateItem(t,{highlightRow:i.highlightRow,selectRow:i.selectRow,triggerEvent:i.triggerEvent}),o=!1),i.triggerEvent){var s=o?"on-item-added":"on-item-updated";this.ea.publish(this._aureliaEventPrefix+":"+s,t),this.ea.publish(this._aureliaEventPrefix+":on-item-upserted",t)}return{added:r,updated:n}},e=A([Object(c.n)(!0),Object(c.m)(_.a,d.a,u.a,C,b.a)],e)}(),P=i("Wgxv"),T=function(){return(T=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},k=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},D=function(){function e(){this._currentFilters=[],this._currentSorters=[],this.defaultOptions={top:25,orderBy:"",caseType:p.a.pascalCase},this._odataService=new P.a}return Object.defineProperty(e.prototype,"columnDefinitions",{get:function(){return this._columnDefinitions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"odataService",{get:function(){return this._odataService},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t,i){this._grid=i;var r=T(T({},this.defaultOptions),e);if(this._gridOptions&&!this._gridOptions.enablePagination)this._odataService.options=T(T({},r),{top:void 0}),this._currentPagination=null;else{var n=t&&t.pageSize?t.pageSize:this.defaultOptions.top;this._odataService.options=T(T({},r),{top:n}),this._currentPagination={pageNumber:1,pageSize:this._odataService.options.top||this.defaultOptions.top||20}}this.options=this._odataService.options,this.pagination=t,i&&i.getColumns&&(this._columnDefinitions=e&&e.columnDefinitions||i.getColumns(),this._columnDefinitions=this._columnDefinitions.filter((function(e){return!e.excludeFromQuery})))},e.prototype.buildQuery=function(){return this._odataService.buildQuery()},e.prototype.clearFilters=function(){this._currentFilters=[],this.updateFilters([])},e.prototype.clearSorters=function(){this._currentSorters=[],this.updateSorters([])},e.prototype.updateOptions=function(e){this.options=T(T({},this.options),e),this._odataService.options=this.options},e.prototype.removeColumnFilter=function(e){this._odataService.removeColumnFilter(e)},e.prototype.getCurrentFilters=function(){return this._currentFilters},e.prototype.getCurrentPagination=function(){return this._currentPagination},e.prototype.getCurrentSorters=function(){return this._currentSorters},e.prototype.mapOdataOperator=function(e){var t="";switch(e){case"<":t="lt";break;case"<=":t="le";break;case">":t="gt";break;case">=":t="ge";break;case"<>":case"!=":t="ne";break;case"=":case"==":default:t="eq"}return t},e.prototype.resetPaginationOptions=function(){this._odataService.updateOptions({skip:0})},e.prototype.saveColumnFilter=function(e,t,i){this._odataService.saveColumnFilter(e,t,i)},e.prototype.processOnFilterChanged=function(e,t){if(void 0===this._gridOptions.backendServiceApi)throw new Error('Something went wrong in the GridOdataService, "backendServiceApi" is not initialized');if(this._currentFilters=this.castFilterToColumnFilters(t.columnFilters),!t||!t.grid)throw new Error('Something went wrong when trying create the GridOdataService, it seems that "args" is not populated correctly');return this.updateFilters(t.columnFilters),this.resetPaginationOptions(),this._odataService.buildQuery()},e.prototype.processOnPaginationChanged=function(e,t){var i=+(t.pageSize||(this.pagination?this.pagination.pageSize:20));return this.updatePagination(t.newPage,i),this._odataService.buildQuery()},e.prototype.processOnSortChanged=function(e,t){var i=t.multiColumnSort?t.sortCols:new Array({sortCol:t.sortCol,sortAsc:t.sortAsc});return this.updateSorters(i),this._odataService.buildQuery()},e.prototype.updateFilters=function(e,t){var i="",r=[],n=this._odataService&&this._odataService.options&&this._odataService.options.version||2;t&&(this._currentFilters=this.castFilterToColumnFilters(e));var o=function(o){if(e.hasOwnProperty(o)){var a=e[o],l=void 0;if(!(l=t&&Array.isArray(s._columnDefinitions)?s._columnDefinitions.find((function(e){return e.id===a.columnId})):a.columnDef))throw new Error("[GridOData Service]: Something went wrong in trying to get the column definition of the specified filter (or preset filters). Did you make a typo on the filter columnId?");var d=l.queryFieldFilter||l.queryField||l.field||l.name||"",u=l.type||p.e.string,c=(a?a.searchTerms:null)||[],f=Array.isArray(c)&&1===c.length?c[0]:"";if(void 0===f&&(f=""),!d)throw new Error('GridOData filter could not find the field name to query the search, your column definition must include a valid "field" or "name" (optionally you can also use the "queryfield" or "queryFieldFilter").');var g=(f=""+f).match(/^([<>!=\*]{0,2})(.*[^<>!=\*])([\*]?)$/),y=a.operator||(g?g[1]:""),v=g?g[2]:"",m=g?g[3]:"*z"===y?"*":"",w=a.bypassBackendQuery||!1;if(d&&""===v&&c.length<=1)return s.removeColumnFilter(d),"continue";if(Array.isArray(c)&&1===c.length&&"string"==typeof c[0]&&c[0].indexOf("..")>0&&(c=c[0].split(".."),y||(y=p.j.rangeExclusive)),v=v.replace("'","''"),v=encodeURIComponent(v),!y&&l.filter&&(y=l.filter.operator),y||(y=Object(h.o)(l.type||p.e.string)),w)d&&s.saveColumnFilter(d,f,c);else{if(i="",s._odataService.options.caseType===p.a.pascalCase&&(d=Object(h.w)(d||"")),u===p.e.date)i=s.filterBySearchDate(d,y,c,n);else if(c&&c.length>1&&("IN"===y||"NIN"===y||"NOTIN"===y||"NOT IN"===y||"NOT_IN"===y)){var _=[];if("IN"===y){for(var b=0,S=c.length;b<S;b++)if(u===p.e.string){var O=c[b].replace("'","''");_.push(d+" eq '"+O+"'")}else _.push(d+" eq "+c[b]);"string"==typeof(i=_.join(" or "))&&"("===i[0]&&")"===i.slice(-1)||(i="("+i+")")}else{for(var C=0,I=c.length;C<I;C++){O=c[C].replace("'","''");_.push(d+" ne '"+O+"'")}"string"==typeof(i=_.join(" and "))&&"("===i[0]&&")"===i.slice(-1)||(i="("+i+")")}}else"*"===y||"a*"===y||"*z"===y||"*"===m?i="*"===y||"*z"===y?"endswith("+d+", '"+v+"')":"startswith("+d+", '"+v+"')":u===p.e.string?""===y||y===p.j.contains||y===p.j.notContains?(i=s.odataQueryVersionWrapper("substring",n,d,v),y===p.j.notContains&&(i="not "+i)):i=y===p.j.rangeExclusive||y===p.j.rangeInclusive?s.filterBySearchTermRange(d,y,c):d+" "+s.mapOdataOperator(y)+" '"+v+"'":y===p.j.rangeExclusive||y===p.j.rangeInclusive?i=s.filterBySearchTermRange(d,y,c):(v=u===p.e.number||u===p.e.boolean?v:"'"+v+"'",i=d+" "+s.mapOdataOperator(y)+" "+v);""!==i&&(r.push(i.trim()),s.saveColumnFilter(d||"",f,v))}}},s=this;for(var a in e)o(a);this._odataService.updateOptions({filter:r.length>0?r.join(" and "):"",skip:void 0})},e.prototype.updatePagination=function(e,t){this._currentPagination={pageNumber:e,pageSize:t},!this._gridOptions||!this._gridOptions.enablePagination&&this._gridOptions.hasOwnProperty("enablePagination")||this._odataService.updateOptions({top:t,skip:(e-1)*t})},e.prototype.updateSorters=function(e,t){var i=this,r=[],n=[];if(!e&&t){(r=t).forEach((function(e){return e.direction=e.direction.toLowerCase()}));var o=r.map((function(e){var t=i._columnDefinitions.find((function(t){return t.id===e.columnId}));return n.push({field:t?(t.queryFieldSorter||t.queryField||t.field)+"":e.columnId+"",direction:e.direction}),t?{columnId:e.columnId,sortAsc:e.direction.toUpperCase()===p.k.ASC}:null}));Array.isArray(o)&&this._grid.setSortColumns(o)}else if(e&&!t)if(e&&0===e.length);else if(e)for(var s=0,a=e;s<a.length;s++){var l=a[s];if(l.sortCol){var d=(l.sortCol.queryFieldSorter||l.sortCol.queryField||l.sortCol.field)+"",u=(l.sortCol.field||l.sortCol.id)+"",c=(l.sortCol.queryFieldSorter||l.sortCol.queryField||l.sortCol.field||"")+"";this._odataService.options.caseType===p.a.pascalCase&&(d=Object(h.w)(d),u=Object(h.w)(u),c=Object(h.w)(c)),""!==u&&r.push({columnId:u,direction:l.sortAsc?"asc":"desc"}),""!==c&&n.push({field:c,direction:l.sortAsc?p.k.ASC:p.k.DESC})}}r=r||[];var f=n.map((function(e){var t="";e&&e.field&&(t=(i._odataService.options.caseType===p.a.pascalCase?Object(h.w)(e.field):e.field)+" "+(e&&e.direction&&e.direction.toLowerCase()||""));return t})).join(",");return this._odataService.updateOptions({orderBy:f}),this._currentSorters=r,this._odataService.buildQuery()},e.prototype.castFilterToColumnFilters=function(e){var t="object"==typeof e?Object.keys(e).map((function(t){return e[t]})):e;return Array.isArray(t)?t.map((function(e){var t={columnId:e.columnId||""};return e.operator&&(t.operator=e.operator),Array.isArray(e.searchTerms)&&(t.searchTerms=e.searchTerms),t})):[]},e.prototype.odataQueryVersionWrapper=function(e,t,i,r){void 0===r&&(r="");var n="";switch(e){case"dateTime":n=t>=4?r:"DateTime'"+r+"'";break;case"substring":n=t>=4?"contains("+i+", '"+r+"')":"substringof('"+r+"', "+i+")"}return n},e.prototype.filterBySearchDate=function(e,t,i,r){var n="",o=[];if((Array.isArray(i)&&i.length>1&&(o=i,t!==p.j.rangeExclusive&&t!==p.j.rangeInclusive&&this._gridOptions.defaultFilterRangeOperator&&(t=this._gridOptions.defaultFilterRangeOperator)),0===o.length&&Array.isArray(i)&&1===i.length&&i[0])&&(s=this.odataQueryVersionWrapper("dateTime",r,e,Object(h.s)(i[0],!0))))return e+" "+this.mapOdataOperator(t)+" "+s;if(Array.isArray(o)&&2===o.length&&o[0]&&o[1]){var s=this.odataQueryVersionWrapper("dateTime",r,e,Object(h.s)(o[0],!0)),a=this.odataQueryVersionWrapper("dateTime",r,e,Object(h.s)(o[1],!0));s&&a&&(t===p.j.rangeInclusive?n="("+e+" ge "+s+" and "+e+" le "+a+")":t===p.j.rangeExclusive&&(n="("+e+" gt "+s+" and "+e+" lt "+a+")"))}return n},e.prototype.filterBySearchTermRange=function(e,t,i){var r="";return Array.isArray(i)&&2===i.length&&(t===p.j.rangeInclusive?r="("+e+" ge "+i[0]+" and "+e+" le "+i[1]+")":t===p.j.rangeExclusive&&(r="("+e+" gt "+i[0]+" and "+e+" lt "+i[1]+")")),r},e=k([Object(c.n)(!0)],e)}(),G=i("+2Rf"),x=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},V=function(){function e(){this._eventHandler=new Slick.EventHandler}return Object.defineProperty(e.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_columnDefinitions",{get:function(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){var i=this;this._grid=e,e&&this._gridOptions&&this._gridOptions.createPreHeaderPanel&&(this._eventHandler.subscribe(e.onSort,(function(){return i.renderPreHeaderRowGroupingTitles()})),this._eventHandler.subscribe(e.onColumnsResized,(function(){return i.renderPreHeaderRowGroupingTitles()})),this._eventHandler.subscribe(t.onRowCountChanged,(function(){return i.renderPreHeaderRowGroupingTitles()})),setTimeout((function(){return i.renderPreHeaderRowGroupingTitles()}),75))},e.prototype.dispose=function(){this._eventHandler.unsubscribeAll()},e.prototype.renderPreHeaderRowGroupingTitles=function(){if(this._gridOptions&&void 0!==this._gridOptions.frozenColumn&&this._gridOptions.frozenColumn>=0){var e=G(this._grid.getPreHeaderPanelLeft());this.renderHeaderGroups(e,0,this._gridOptions.frozenColumn+1),e=G(this._grid.getPreHeaderPanelRight()),this.renderHeaderGroups(e,this._gridOptions.frozenColumn+1,this._columnDefinitions.length)}else{e=G(this._grid.getPreHeaderPanel());this.renderHeaderGroups(e,0,this._columnDefinitions.length)}},e.prototype.renderHeaderGroups=function(e,t,i){e.empty().addClass("slick-header-columns").css("left","-1000px").width(this._grid.getHeadersWidth()),e.parent().addClass("slick-header");for(var r,n,o=this._grid.getHeaderColumnWidthDiff(),s="",a=0,l=t;l<i;l++)(r=this._columnDefinitions[l])&&(s===r.columnGroup&&l>0?(a+=r.width||0,n&&n.width&&n.width(a-o)):(a=r.width||0,n=G('<div class="ui-state-default slick-header-column" />').html('<span class="slick-column-name">'+(r.columnGroup||"")+"</span>").width(a-o).appendTo(e)),s=r.columnGroup||"")},e=x([Object(c.n)(!0),Object(c.m)(_.a)],e)}(),B=i("aNj2"),H=i("SpW5"),N=i("wESz");i.d(t,"a",(function(){return n.a})),i.d(t,"x",(function(){return o.b})),i.d(t,"K",(function(){return o.c})),i.d(t,"w",(function(){return o.a})),i.d(t,"N",(function(){return o.d})),i.d(t,"b",(function(){return s.a})),i.d(t,"c",(function(){return a.a})),i.d(t,"d",(function(){return l.a})),i.d(t,"e",(function(){return d.a})),i.d(t,"f",(function(){return u.a})),i.d(t,"g",(function(){return v})),i.d(t,"h",(function(){return w})),i.d(t,"j",(function(){return E})),i.d(t,"k",(function(){return C})),i.d(t,"i",(function(){return D})),i.d(t,"l",(function(){return V})),i.d(t,"m",(function(){return P.a})),i.d(t,"n",(function(){return B.a})),i.d(t,"o",(function(){return H.a})),i.d(t,"p",(function(){return N.a})),i.d(t,"q",(function(){return b.a})),i.d(t,"r",(function(){return h.a})),i.d(t,"s",(function(){return h.b})),i.d(t,"C",(function(){return h.j})),i.d(t,"D",(function(){return h.k})),i.d(t,"E",(function(){return h.l})),i.d(t,"u",(function(){return h.d})),i.d(t,"z",(function(){return h.g})),i.d(t,"v",(function(){return h.e})),i.d(t,"A",(function(){return h.h})),i.d(t,"G",(function(){return h.n})),i.d(t,"F",(function(){return h.m})),i.d(t,"J",(function(){return h.q})),i.d(t,"I",(function(){return h.p})),i.d(t,"H",(function(){return h.o})),i.d(t,"L",(function(){return h.r})),i.d(t,"M",(function(){return h.s})),i.d(t,"O",(function(){return h.t})),i.d(t,"P",(function(){return h.u})),i.d(t,"Q",(function(){return h.v})),i.d(t,"R",(function(){return h.w})),i.d(t,"S",(function(){return h.x})),i.d(t,"T",(function(){return h.y})),i.d(t,"t",(function(){return h.c})),i.d(t,"y",(function(){return h.f})),i.d(t,"B",(function(){return h.i})),i.d(t,"U",(function(){return h.z})),i.d(t,"V",(function(){return h.A})),i.d(t,"W",(function(){return h.B}))},sfpN:function(e,t,i){"use strict";(function(e){i.d(t,"a",(function(){return m}));var r,n=i("aurelia-framework"),o=i("aurelia-event-aggregator"),s=i("+2Rf"),a=i("XaGS"),l=i("MGjh"),d=i("jxYj"),u=i("v8Uj"),c=i("/CJ3"),h=i("eyxJ"),p=i("wESz"),f=function(){return(f=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},g=function(e,t,i,r){var n,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,i,s):n(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},y=function(t,i,r,n){return new(r||(r=e))((function(e,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function a(e){try{l(n.throw(e))}catch(e){o(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof r?i:new r((function(e){e(i)}))).then(s,a)}l((n=n.apply(t,i||[])).next())}))},v=function(e,t){var i,r,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(n=2&o[0]?r.return:o[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,o[1])).done)return n;switch(r=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},m=function(){function t(e,t,i){this.ea=e,this.filterFactory=t,this.sharedService=i,this._isFilterFirstRender=!0,this._firstColumnIdRendered="",this._filtersMetadata=[],this._columnFilters={},this._onSearchChange=new Slick.Event,this._eventHandler=new Slick.EventHandler}return Object.defineProperty(t.prototype,"eventHandler",{get:function(){return this._eventHandler},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFilterFirstRender",{get:function(){return this._isFilterFirstRender},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onSearchChange",{get:function(){return this._onSearchChange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_gridOptions",{get:function(){return this._grid&&this._grid.getOptions?this._grid.getOptions():{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_columnDefinitions",{get:function(){return this._grid&&this._grid.getColumns?this._grid.getColumns():[]},enumerable:!0,configurable:!0}),t.prototype.init=function(e){this._grid=e},t.prototype.dispose=function(){this.disposeColumnFilters(),this._eventHandler&&this._eventHandler.unsubscribeAll&&this._eventHandler.unsubscribeAll()},t.prototype.disposeColumnFilters=function(){if("object"==typeof this._columnFilters)for(var e in this._columnFilters)e&&this._columnFilters[e]&&delete this._columnFilters[e];Array.isArray(this._filtersMetadata)&&this._filtersMetadata.forEach((function(e,t){e&&e.destroy&&e.destroy(!0)}))},t.prototype.bindBackendOnFilter=function(e,t){var i=this;this._dataView=t,this._filtersMetadata=[],this._eventHandler.subscribe(e.onHeaderRowCellRendered,(function(e,t){t.column.id===i._firstColumnIdRendered&&(i._isFilterFirstRender=!1),i.addFilterTemplateToHeaderRow(t,i._isFilterFirstRender),""===i._firstColumnIdRendered&&(i._firstColumnIdRendered=t.column.id)})),this._eventHandler.subscribe(this._onSearchChange,this.onBackendFilterChange.bind(this))},t.prototype.bindLocalOnFilter=function(e,t){var i=this;this._filtersMetadata=[],this._dataView=t,t.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid,dataView:t}),t.setFilter(this.customLocalFilter.bind(this)),this._eventHandler.subscribe(this._onSearchChange,(function(e,r){null!=r.columnId&&t.refresh(),r&&!r.clearFilterTriggered&&i.emitFilterChanged(u.c.local)})),this._eventHandler.subscribe(e.onHeaderRowCellRendered,(function(e,t){i.addFilterTemplateToHeaderRow(t)}))},t.prototype.clearFilterByColumnId=function(e,t){var i,r=Object.keys(this._columnFilters);Array.isArray(r)&&(i=r.find((function(e){return e===t})));var n=this._filtersMetadata.find((function(e){return e.columnDef.id===t}));n&&n.clear&&n.clear(!0);var o=u.c.local;(this._gridOptions&&this._gridOptions.backendServiceApi||!1)&&(o=u.c.remote,void 0!==i&&this.onBackendFilterChange(e,{grid:this._grid,columnFilters:this._columnFilters})),this.emitFilterChanged(o)},t.prototype.clearFilters=function(t){var i=this;void 0===t&&(t=!0),this._filtersMetadata.forEach((function(e){e&&e.clear&&e.clear(!1)})),this._dataView&&this._grid&&(this._dataView.refresh(),this._grid.invalidate());var r=this._gridOptions&&this._gridOptions.backendServiceApi;if(r&&t){var n={clearFilterTriggered:!0,shouldTriggerQuery:t,grid:this._grid,columnFilters:this._columnFilters},o=r.service.processOnFilterChanged(void 0,n);if(o instanceof e&&o.then)console.warn('[Aurelia-Slickgrid] please note that the "processOnFilterChanged" method signature, from Backend Service,\n          should return a string instead of a Promise, returning a Promise will be deprecated in the future.'),o.then((function(e){var t=i._gridOptions&&i._gridOptions.pagination&&i._gridOptions.pagination.totalItems||0;Object(c.a)(r,e,n,new Date,t,i.emitFilterChanged.bind(i))}));else{var s=o,a=this._gridOptions&&this._gridOptions.pagination&&this._gridOptions.pagination.totalItems||0;Object(c.a)(r,s,n,new Date,a,this.emitFilterChanged.bind(this))}}t&&this.ea.publish("filterService:filterCleared",!0)},t.prototype.customLocalFilter=function(e,t){for(var i=t&&t.dataView,r=function(r){var o=t.columnFilters[r],a=t.grid.getColumnIndex(r),d=t.grid.getColumns()[a];if(!d&&n.sharedService&&Array.isArray(n.sharedService.allColumns)&&(a=n.sharedService.allColumns.findIndex((function(e){return e.field===r})),d=n.sharedService.allColumns[a]),!d)return{value:!0};if(n._gridOptions.enableRowDetailView){var c=n._gridOptions.rowDetailView&&n._gridOptions.rowDetailView.keyPrefix||"__";e[c+"isPadding"]&&e[c+"parent"]&&(e=e[c+"parent"])}var p=d.dataKey,f=d.queryFieldFilter||d.queryField||d.field||"",g=d.type||u.e.string,y=d.filterSearchType?d.filterSearchType:null,v=e[f];f&&f.indexOf(".")>=0&&(v=Object(h.h)(e,f));var m=o&&o.searchTerms?s.extend(!0,[],o.searchTerms):[],w=Array.isArray(m)&&1===m.length?m[0]:"",_=null;g!==u.e.object&&(_=(w=""+w).match(/^([<>!=\*]{0,2})(.*[^<>!=\*])([\*]?)$/));var b=o.operator||(_?_[1]:""),S=_?_[2]:"",O=_?_[3]:"*z"===b?"*":"";if(m&&m.length>1?w=m.join(","):"string"==typeof w&&(w=w.replace("'","''"),"*"!==b&&"a*"!==b&&"*z"!==b&&"*"!==O||(b="*"===b||"*z"===b?u.j.endsWith:u.j.startsWith)),""===S&&(!m||Array.isArray(m)&&0===m.length))return{value:!0};if(Array.isArray(_)&&_.length>=1&&Array.isArray(m)&&1===m.length&&(m[0]=S),m&&Array.isArray(m)&&g!==u.e.object)for(var C=0,I=m.length;C<I;C++)m[C]=(void 0===m[C]||null===m[C]?"":m[C])+"";if(d&&d.params&&d.params.useFormatterOuputToFilter){var A=i&&"function"==typeof i.getIdxById?i.getIdxById(e.id):0;v=d.formatter(A,a,v,d,e,n._grid)}"number"==typeof v&&(v=v.toString());var F={dataKey:p,fieldType:g,searchTerms:m,cellValue:v,operator:b,cellValueLastChar:O,filterSearchType:y};return l.a.executeMappedCondition(F)?void 0:{value:!1}},n=this,o=0,a=Object.keys(t.columnFilters);o<a.length;o++){var d=r(a[o]);if("object"==typeof d)return d.value}return!0},t.prototype.getColumnFilters=function(){return this._columnFilters},t.prototype.getFiltersMetadata=function(){return this._filtersMetadata},t.prototype.getCurrentLocalFilters=function(){var e=[];if(this._columnFilters)for(var t=0,i=Object.keys(this._columnFilters);t<i.length;t++){var r=i[t],n=this._columnFilters[r],o=(n.columnDef,{columnId:r||""});n&&n.searchTerms&&(o.searchTerms=n.searchTerms),n.operator&&(o.operator=n.operator),Array.isArray(o.searchTerms)&&o.searchTerms.length>0&&""!==o.searchTerms[0]&&e.push(o)}return e},t.prototype.emitFilterChanged=function(e){if(e===u.c.remote&&this._gridOptions&&this._gridOptions.backendServiceApi){var t=[],i=this._gridOptions.backendServiceApi.service;i&&i.getCurrentFilters&&(t=i.getCurrentFilters()),this.ea.publish("filterService:filterChanged",t)}else e===u.c.local&&this.ea.publish("filterService:filterChanged",this.getCurrentLocalFilters())},t.prototype.onBackendFilterChange=function(e,t){return y(this,void 0,void 0,(function(){var i,n,o,s,a,l=this;return v(this,(function(d){switch(d.label){case 0:if(!t||!t.grid)throw new Error('Something went wrong when trying to bind the "onBackendFilterChange(event, args)" function, it seems that "args" is not populated correctly');if(!(i=this._gridOptions.backendServiceApi)||!i.process||!i.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');return n=new Date,i.preProcess&&i.preProcess(),o=0,t&&t.clearFilterTriggered||!e||e.keyCode===u.i.ENTER||"input"!==e.type&&"keyup"!==e.type&&"keydown"!==e.type||(o=i.hasOwnProperty("filterTypingDebounce")?i.filterTypingDebounce:500),t&&t.shouldTriggerQuery?o>0?(clearTimeout(r),r=setTimeout((function(){return y(l,void 0,void 0,(function(){var r,o;return v(this,(function(s){switch(s.label){case 0:return[4,i.service.processOnFilterChanged(e,t)];case 1:return r=s.sent(),o=this._gridOptions&&this._gridOptions.pagination&&this._gridOptions.pagination.totalItems||0,Object(c.a)(i,r,t,n,o,this.emitFilterChanged.bind(this)),[2]}}))}))}),o),[3,3]):[3,1]:[3,3];case 1:return[4,i.service.processOnFilterChanged(e,t)];case 2:s=d.sent(),a=this._gridOptions&&this._gridOptions.pagination&&this._gridOptions.pagination.totalItems||0,Object(c.a)(i,s,t,n,a,this.emitFilterChanged.bind(this)),d.label=3;case 3:return[2]}}))}))},t.prototype.populateColumnFilterSearchTermPresets=function(e){return Array.isArray(e)&&e.length>0&&this._columnDefinitions.forEach((function(t){t.filter&&t.filter.searchTerms&&delete t.filter.searchTerms;var i=e.find((function(e){return e.columnId===t.id}));i&&i.searchTerms&&Array.isArray(i.searchTerms)&&(t.filter=t.filter||{},t.filter.operator=i.operator||t.filter.operator||"",t.filter.searchTerms=i.searchTerms)})),this._columnDefinitions},t.prototype.setSortColumnIcons=function(e){this._grid&&Array.isArray(e)&&this._grid.setSortColumns(e)},t.prototype.updateFilters=function(e,t,i){var r=this;if(void 0===t&&(t=!0),void 0===i&&(i=!0),!this._filtersMetadata||0===this._filtersMetadata.length||!this._gridOptions||!this._gridOptions.enableFiltering)throw new Error('[Aurelia-Slickgrid] in order to use "updateFilters" method, you need to have Filterable Columns defined in your grid and "enableFiltering" set in your Grid Options');if(Array.isArray(e)){this.clearFilters(!1),e.forEach((function(e){var t=r._filtersMetadata.find((function(t){return e.columnId===t.columnDef.id}));if(e&&t){var i=e.operator||t.defaultOperator;r.updateColumnFilters(e.searchTerms,t.columnDef,i),t.setValues(e.searchTerms,i)}}));var n=this._gridOptions&&this._gridOptions.backendServiceApi;if(this._dataView.refresh(),n){var o=n&&n.service;o&&o.updateFilters&&(o.updateFilters(e,!0),i&&Object(c.d)(this._gridOptions))}if(t){var s=n?u.c.remote:u.c.local;this.emitFilterChanged(s)}}},t.prototype.addFilterTemplateToHeaderRow=function(e,t){void 0===t&&(t=!0);var i=e.column,r=i&&i.id||"";if(i&&"selector"!==r&&i.filterable){var n=void 0,o=void 0,s=this.filterFactory.createFilter(i.filter);o=i&&i.filter&&i.filter.operator||s&&s.operator,this._columnFilters[i.id]?(n=this._columnFilters[i.id].searchTerms||void 0,o=this._columnFilters[i.id].operator||void 0):i.filter&&(n=i.filter.searchTerms||void 0,this.updateColumnFilters(n,i,o));var a={grid:this._grid,operator:o,searchTerms:n,columnDef:i,callback:this.callbackSearchEvent.bind(this)};if(s){s.init(a,t);var l=this._filtersMetadata.findIndex((function(e){return s.columnDef.id===e.columnDef.id}));-1===l?this._filtersMetadata.push(s):this._filtersMetadata[l]=s,n&&s.setValues&&s.setValues(n)}}},t.prototype.callbackSearchEvent=function(e,t){if(t){var i=e&&e.target?e.target.value:void 0,r=t.searchTerms&&Array.isArray(t.searchTerms)?t.searchTerms:i?[i]:void 0,n=t.columnDef||null,o=n&&n.id||"",l=t.operator||void 0,d=r&&Array.isArray(r),c=d&&r&&r.length,h=f({},this._columnFilters);if(n&&o)if(!d||0===c||1===c&&Array.isArray(r)&&""===r[0])delete this._columnFilters[o];else{var p=""+o,g={columnId:p,columnDef:n,searchTerms:r};l&&(g.operator=l),this._columnFilters[p]=g}var y=e&&"function"!=typeof e.isPropagationStopped?s.extend({},new Slick.EventData,e):e;(e&&e.keyCode)!==u.i.ENTER&&a(h,this._columnFilters)||this._onSearchChange.notify({clearFilterTriggered:t.clearFilterTriggered,shouldTriggerQuery:t.shouldTriggerQuery,columnId:o,columnDef:n,columnFilters:this._columnFilters,operator:l,searchTerms:r,grid:this._grid},y)}},t.prototype.updateColumnFilters=function(e,t,i){e&&t&&(this._columnFilters[t.id]={columnId:t.id,columnDef:t,searchTerms:e,operator:i})},t=g([Object(n.n)(!0),Object(n.m)(o.a,d.a,p.a)],t)}()}).call(this,i("B/eG").default)}}]);
//# sourceMappingURL=vendors~020009e7.aaad3a6b2abd3aa9034f.bundle.map